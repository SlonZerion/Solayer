(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequire1d24;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequire1d24=i),i.register("fxXaZ",(function(n,r){t(n.exports,"BackgroundConnectionProvider",(function(){return f}),(function(e){return f=e})),t(n.exports,"useIncomingBackgroundRequest",(function(){return m}),(function(e){return m=e})),t(n.exports,"usePostOutgoingBackgroundResponse",(function(){return h}),(function(e){return h=e}));var o=i("k8NWT"),a=i("RVqnc"),s=i("29o0l"),l=i("hulLf"),c=i("gcdBN"),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const d={isConnected:!1,lastMessage:null,postMessage:a.NOOP},p=e(s).createContext(d),f=({children:t})=>{const[n,r,i]=function(){const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null);(0,s.useEffect)((()=>{let e;return(()=>u(this,void 0,void 0,(function*(){const n=`notification/${(yield(0,c.getCurrentWindowAsync)()).id}`;e=l.browser.runtime.connect({name:n}),t(e),e.onMessage.addListener((e=>{const t=o.parse(e);!(t&&"string"==typeof t.url&&t.url&&t.req&&"string"==typeof t.req.method&&t.req.method)||r(Object.assign(Object.assign({},t),{url:(0,a.removeHashes)(t.url.toString())}))})),e.onDisconnect.addListener((()=>{t(null)}))})))(),()=>{null==e||e.disconnect()}}),[]);const i=(0,s.useCallback)((t=>{e&&e.postMessage(o.stringify(t))}),[e]);return[!!e,n,i]}();return e(s).createElement(p.Provider,{value:{isConnected:n,lastMessage:r,postMessage:i}},t)};function g(){const e=(0,s.useContext)(p);if(!e)throw new Error("Missing background connection context");return e}function m(){const{lastMessage:e}=g();return e}function h(){const e=m(),{postMessage:t}=g();return(0,s.useCallback)((n=>{if(!e)throw new Error("No request received from the background yet");if(e.req.id!==n.id)throw new Error(`Request id: ${e.req.id} does not match response id: ${n.id}`);t(n)}),[e,t])}})),i.register("bw7Ah",(function(n,r){t(n.exports,"PTrans",(function(){return c}),(function(e){return c=e}));var o=i("43063"),a=i("29o0l"),s=i("8Ub2g"),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const c=e(a).memo((t=>{const{children:n,i18nKey:r}=t,i=l(t,["children","i18nKey"]),{t:c}=(0,o.useTranslation)(),u=(0,a.useMemo)((()=>(r?`${c(r,Object.assign(Object.assign({},i),i.values))}`:"").replace(/<\/?[^>]+(>|$)/g,"")),[r,i,c]);return e(a).createElement(s.ErrorBoundary,{fallback:u},e(a).createElement(o.Trans,Object.assign({i18nKey:r},i),n))}))})),i.register("4DItC",(function(e,t){e.exports=i("j1yuj")(i("2FqAO").getBundleURL("d6IVg")+i("eOkdY").resolve("a07No")).then((()=>i("fniF6")))})),i.register("9CNaJ",(function(e,t){"use strict";var n=i("9MCQQ"),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(g){var i=f(n);i&&i!==g&&e(t,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),h=0;h<a.length;++h){var v=a[h];if(!(o[v]||r&&r[v]||m&&m[v]||s&&s[v])){var y=p(n,v);try{c(t,v,y)}catch(e){}}}}return t}})),i.register("9MCQQ",(function(e,t){"use strict";e.exports=i("dJlAX")})),i.register("dJlAX",(function(e,n){
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r,o,i,a,s,l,c,u,d,p,f,g,m,h,v,y,w,E,x,I,b,k,S,T,C,A,D,P;t(e.exports,"AsyncMode",(function(){return r}),(function(e){return r=e})),t(e.exports,"ConcurrentMode",(function(){return o}),(function(e){return o=e})),t(e.exports,"ContextConsumer",(function(){return i}),(function(e){return i=e})),t(e.exports,"ContextProvider",(function(){return a}),(function(e){return a=e})),t(e.exports,"Element",(function(){return s}),(function(e){return s=e})),t(e.exports,"ForwardRef",(function(){return l}),(function(e){return l=e})),t(e.exports,"Fragment",(function(){return c}),(function(e){return c=e})),t(e.exports,"Lazy",(function(){return u}),(function(e){return u=e})),t(e.exports,"Memo",(function(){return d}),(function(e){return d=e})),t(e.exports,"Portal",(function(){return p}),(function(e){return p=e})),t(e.exports,"Profiler",(function(){return f}),(function(e){return f=e})),t(e.exports,"StrictMode",(function(){return g}),(function(e){return g=e})),t(e.exports,"Suspense",(function(){return m}),(function(e){return m=e})),t(e.exports,"isAsyncMode",(function(){return h}),(function(e){return h=e})),t(e.exports,"isConcurrentMode",(function(){return v}),(function(e){return v=e})),t(e.exports,"isContextConsumer",(function(){return y}),(function(e){return y=e})),t(e.exports,"isContextProvider",(function(){return w}),(function(e){return w=e})),t(e.exports,"isElement",(function(){return E}),(function(e){return E=e})),t(e.exports,"isForwardRef",(function(){return x}),(function(e){return x=e})),t(e.exports,"isFragment",(function(){return I}),(function(e){return I=e})),t(e.exports,"isLazy",(function(){return b}),(function(e){return b=e})),t(e.exports,"isMemo",(function(){return k}),(function(e){return k=e})),t(e.exports,"isPortal",(function(){return S}),(function(e){return S=e})),t(e.exports,"isProfiler",(function(){return T}),(function(e){return T=e})),t(e.exports,"isStrictMode",(function(){return C}),(function(e){return C=e})),t(e.exports,"isSuspense",(function(){return A}),(function(e){return A=e})),t(e.exports,"isValidElementType",(function(){return D}),(function(e){return D=e})),t(e.exports,"typeOf",(function(){return P}),(function(e){return P=e}));var R="function"==typeof Symbol&&Symbol.for,O=R?Symbol.for("react.element"):60103,F=R?Symbol.for("react.portal"):60106,q=R?Symbol.for("react.fragment"):60107,N=R?Symbol.for("react.strict_mode"):60108,M=R?Symbol.for("react.profiler"):60114,j=R?Symbol.for("react.provider"):60109,B=R?Symbol.for("react.context"):60110,L=R?Symbol.for("react.async_mode"):60111,H=R?Symbol.for("react.concurrent_mode"):60111,$=R?Symbol.for("react.forward_ref"):60112,_=R?Symbol.for("react.suspense"):60113,W=R?Symbol.for("react.suspense_list"):60120,U=R?Symbol.for("react.memo"):60115,V=R?Symbol.for("react.lazy"):60116,z=R?Symbol.for("react.block"):60121,G=R?Symbol.for("react.fundamental"):60117,X=R?Symbol.for("react.responder"):60118,Y=R?Symbol.for("react.scope"):60119;function J(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case O:switch(e=e.type){case L:case H:case q:case M:case N:case _:return e;default:switch(e=e&&e.$$typeof){case B:case $:case V:case U:case j:return e;default:return t}}case F:return t}}}function Z(e){return J(e)===H}r=L,o=H,i=B,a=j,s=O,l=$,c=q,u=V,d=U,p=F,f=M,g=N,m=_,h=function(e){return Z(e)||J(e)===L},v=Z,y=function(e){return J(e)===B},w=function(e){return J(e)===j},E=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===O},x=function(e){return J(e)===$},I=function(e){return J(e)===q},b=function(e){return J(e)===V},k=function(e){return J(e)===U},S=function(e){return J(e)===F},T=function(e){return J(e)===M},C=function(e){return J(e)===N},A=function(e){return J(e)===_},D=function(e){return"string"==typeof e||"function"==typeof e||e===q||e===H||e===M||e===N||e===_||e===W||"object"==typeof e&&null!==e&&(e.$$typeof===V||e.$$typeof===U||e.$$typeof===j||e.$$typeof===B||e.$$typeof===$||e.$$typeof===G||e.$$typeof===X||e.$$typeof===Y||e.$$typeof===z)},P=J})),i("eOkdY").register(JSON.parse('{"d6IVg":"notification.cb9be8d5.js","a07No":"EthSelectWallet.d391f92f.js","3M59o":"phishing.f480c608.js","7h3OA":"connect_hardware.69b26c5f.js","b0KbB":"metaplex.a7fe443c.js","2IiBH":"metaplex.a9c3aa20.js","gx0XP":"SettingsConnectHardware.c6bdffb4.js","9Dpy0":"SettingsConnectHardware.5cbd182e.css","9HiOg":"notification.0c29d344.js","dW2iO":"multichainMigration.0d9b34d3.js","bIRmF":"onboarding.83f63894.js"}'));var a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),c=i("8Ub2g"),u=i("e3YvV"),d=i("c8OXT"),p=i("fxXaZ"),f=i("i1NO2"),g=i("41yT6"),m=i("6SBoM"),h={};t(h,"EthSendTransaction",(function(){return $n}),(function(e){return $n=e}));var v=i("4xbAj"),y=i("iOvk1"),w=i("eJxop"),E=i("7mQ3Y"),x=i("3tdpt"),I={};t(I,"rpcRequestData",(function(){return S}),(function(e){return S=e})),t(I,"route",(function(){return T}),(function(e){return T=e}));var b=i("creZv"),k=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};function S(e,t){return{request:e,source:t,id:(0,b.default)()}}function T(){return{parse:e=>function(e){function t(t,n,r){return o=>k(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},o),{request:e.request.parse(o.request)}),a=[];for(const e of n){const n=yield e(i,t);if(n){if("function"!=typeof n)return setTimeout((()=>{for(const e of a)e(n)}),0),n;a.push(n)}}const s=e.response.parse(yield r(i,t));if(s.id!==o.request.id){const e="Request id does not match response id";throw console.error(e,{request:o.request,response:s}),new Error(e)}return setTimeout((()=>{for(const e of a)e(s)}),0),s}))}return{context:e=>({use:(n,r)=>t(e,n,r)}),use:(e,n)=>t(void 0,e,n)}}(e)}}t({},"RpcRouter",(function(){return R}),(function(e){return R=e}));a=i("cFUcx");var C,A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},D=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},P=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class R{init(e,t){const n=new AbortController,{signal:r}=n,o=(i=P(this,C,"f").routes,new TransformStream({transform(e,t){return A(this,void 0,void 0,(function*(){const n=i[e.request.method];if(!n){const n={jsonrpc:"2.0",id:e.request.id,error:{code:0,message:`${e.request.method} isn't implemented`}};return t.enqueue([e,n])}try{const r=yield n(e);return t.enqueue([e,r])}catch(n){console.error("RPC ROUTER: Unexpected error",n);const r={jsonrpc:"2.0",id:e.request.id,error:{code:a.RpcErrorCode.InternalError,message:"Unexpected error"}};return t.enqueue([e,r])}}))}}));var i;return{start:()=>A(this,void 0,void 0,(function*(){if(r.aborted)console.warn("stream already closed");else try{yield e.pipeThrough(o,{signal:r}).pipeTo(t,{signal:r})}catch(e){r.aborted||console.error("RPC router stream error",e)}})),stop:e=>{n.abort(e)}}}constructor(e){C.set(this,void 0),D(this,C,e,"f")}}C=new WeakMap;a=i("cFUcx");var O={};t(O,"result",(function(){return F})),t(O,"error",(function(){return q})),t(O,"any",(function(){return N})),t(O,"chainDisconnected",(function(){return M})),t(O,"invalidInput",(function(){return j})),t(O,"internalError",(function(){return B})),t(O,"methodNotFound",(function(){return L})),t(O,"resourceUnavailable",(function(){return H})),t(O,"transactionRejected",(function(){return $})),t(O,"unauthorized",(function(){return _})),t(O,"userRejectedRequest",(function(){return W}));a=i("cFUcx");const F=(e,t)=>({jsonrpc:"2.0",id:e,result:t}),q=(e,t)=>({jsonrpc:"2.0",id:e,error:t}),N=(e,t)=>Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:e}),M=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.ChainDisconnected,message:null!=t?t:"The Provider is not connected to the requested chain."}}),j=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.InvalidInput,message:null!=t?t:"Missing or invalid parameters."}}),B=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.InternalError,message:null!=t?t:"Something went wrong."}}),L=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.MethodNotFound,message:null!=t?t:"Method does not exist."}}),H=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.ResourceUnavailable,message:null!=t?t:"Requested resource not available."}}),$=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.TransactionRejected,message:null!=t?t:"Transaction creation failed."}}),_=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.Unauthorized,message:null!=t?t:"The requested method and/or account has not been authorized by the user."}}),W=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:a.RpcErrorCode.UserRejectedRequest,message:null!=t?t:"User rejected the request."}});var U=i("5uSEV"),V=i("Dohsj"),z=i("7gANb"),G=i("RVqnc"),X=(l=i("29o0l"),i("88tsI")),Y=i("5MNpG"),J=i("dXIE8"),Z=(p=i("fxXaZ"),f=i("i1NO2"),i("gX5Te")),K=i("twk6W"),Q=i("lz5BI"),ee=(l=i("29o0l"),i("gkfw3")),te=i("jFp5o"),ne=i("8oN8T"),re=(f=i("i1NO2"),Z=i("gX5Te"),i("fYATH"));const oe=(0,ee.default)(Q.motion.div)`
  width: 100%;
  height: ${"calc(100% - 16px)"};
  margin: 0;
  background: #222;
  position: absolute;
  padding: 16px;
  padding-top: 0;
`,ie=ee.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: ${e=>{var t;return null!==(t=e.settingsContainerHeight)&&void 0!==t?t:"100%"}};
`,ae=(t,n)=>{const{pushDetailView:r}=(0,f.useDetailViews)(),{isActive:o,showAutoConfirmRow:i,untilDate:a,save:s,settings:c,isAutoConfirmIsTouched:u,loading:d}=Z.hooks.useAutoConfirmSettingsProps({origin:new URL(t).origin});return{open:e(l).useCallback((o=>{r(e(l).createElement(oe,null,e(l).createElement(te.DappSettingsHeader,{dappUrl:t}),e(l).createElement(ne.FullHeightLoadingContent,{isLoading:d},e(l).createElement(ie,null,e(l).createElement(re.AutoConfirmSettingsSection,{dappUrl:t,autoConfirmStatusCode:o,networkID:n})))))}),[r,t,n,d]),isActive:o,untilDate:a,save:s,settings:c,isAutoConfirmIsTouched:u,showAutoConfirmRow:i}};var se=i("3ljHn");V=i("Dohsj"),l=i("29o0l");function le({block:e,warnings:t,isLoadingSimulation:n}){const{data:[r]}=(0,se.useFeatureFlags)(["enable-friction-interstitial"]),o=(null==t?void 0:t.some((e=>e.severity===V.ScanWarningVariant.criticalAlert)))&&r;let i="loading";!n&&e?i="block":n||(i="main");const[a,s]=(0,l.useState)(i);return(0,l.useEffect)((()=>{s(n?"loading":e?"block":"main")}),[e,n]),{showFrictionInterstitial:!!o,initialScreen:i,screen:a,setScreen:s}}z=i("7gANb"),Q=i("lz5BI"),l=i("29o0l"),ee=i("gkfw3");var ce=i("gTwcH"),ue=i("gG2zL");f=i("i1NO2"),Z=i("gX5Te");const de=e(ce)((e=>({transactionSpeed:z.TransactionSpeed.standard,setTransactionSpeed:t=>e({transactionSpeed:t})}))),pe="calc(100% - 15px)",fe=(0,ee.default)(Q.motion.div)`
  width: 100%;
  height: ${pe};
  margin: 0;
  padding: 15px;
  background: #222;
  position: absolute;
`,ge=(t,n)=>{const{status:r,data:o}=Z.hooks.useTransactionSpeedsToUnitCost({networkID:t,enableFallback:!0}),i=de((e=>e.transactionSpeed)),a=de((e=>e.setTransactionSpeed)),{popDetailView:s,pushDetailView:c}=(0,f.useDetailViews)();let u;return"error"!==r&&o&&i&&n&&(u=()=>{c(e(l).createElement(fe,null,e(l).createElement(ue.TransactionSettings,{onSelectTransactionSpeed:a,selectedTransactionSpeed:i,networkID:t,transactionUnitAmount:n,closeModal:s,settingsContainerHeight:pe})))}),{transactionSpeed:i,openGasSettings:u}};var me={};t(me,"usePostResponseWithAnalytics",(function(){return ye}),(function(e){return ye=e}));var he=i("h0VH5"),ve=(y=i("iOvk1"),a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),K=i("twk6W"),function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))});const ye=function(e,t){return(n,r)=>{const{networkID:o,sequenceId:i,origin:a}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>ve(this,void 0,void 0,(function*(){return y.Chains.isEVMNetworkID(o)&&!s.current&&("error"in r?yield t({networkID:o,sequenceId:i,origin:a}):yield e({networkID:o,sequenceId:i,origin:a}),s.current=!0),n(r)}))),[n,o,a,i])}}((function(e){return ve(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,a.getSupportedChainDescriptor)(e.networkID.replace("eip155:",""));if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield he.dapp.userApprovedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:"eth_sendTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return ve(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,a.getSupportedChainDescriptor)(t);if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield he.dapp.userDeniedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:"eth_sendTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));var we=i("43063"),Ee=(V=i("Dohsj"),l=i("29o0l"),ee=i("gkfw3"),i("hFkH3")),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),ke=i("91Dw6"),Se=(V=i("Dohsj"),i("9yJOd")),Te=(l=i("29o0l"),ee=i("gkfw3"),i("qppYH"));xe=i("27SDj");const Ce=ee.default.div`
  background: #2a2a2a;
  border-radius: 16px;
  display: flex;
  flex-direction: column;
`,Ae=ee.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
`,De=ee.default.div`
  width: ${e=>e.size}px;
  height: ${e=>e.size}px;
  overflow: hidden;
  flex: none;
`,Pe=ee.default.div`
  flex: 2;
  display: flex;
  align-items: center;
  gap: 8px;
`,Re=ee.default.div`
  flex-shrink: 1;
`,Oe=ee.default.div`
  border-bottom: 1px solid #222222;
  border-bottom-width: 1px;
  margin: 0 -16px;
`,Fe=({rows:t})=>e(l).createElement(Ce,null,e(l).createElement("div",null,t.map(((n,r)=>"AssetChange"===n.type?e(l).createElement(e(l).Fragment,{key:`change-row-${r}`},e(l).createElement(qe,{key:`expected-change-${r}`,change:n}),r!==t.length-1&&t.length>1&&e(l).createElement(Oe,null)):"MessageOnly"===n.type?e(l).createElement(e(l).Fragment,{key:`change-row-${r}`},e(l).createElement(Ne,{key:`expected-change-${r}`,change:n}),r!==t.length-1&&t.length>1&&e(l).createElement(Oe,null)):e(l).createElement(Ae,{key:`expected-change-${r}`},e(l).createElement(xe.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"left",color:V.StateChangeColor.White,margin:"0 0 0 8px"},n.fallbackMessage)))))),qe=({change:t})=>{const n="native"===t.asset.type||"unknown"===t.asset.type?"fungible":t.asset.type,r=t.changeText||t.fallbackMessage,o=(0,V.getColorForStateChangeSign)(t.changeSign);return e(l).createElement(Ae,null,e(l).createElement(Pe,null,t.image?e(l).createElement(De,{size:24,"data-testid":"estimated-change-image"},e(l).createElement(Te.EcosystemImage,{image:{type:n,src:t.image},size:24})):e(l).createElement(Se.Box,{style:{backgroundColor:t.changeSign===V.StateChangeSign.Plus?"accentSuccess":t.changeSign===V.StateChangeSign.Minus?"accentAlert":"textSecondary",size:24,flex:"none",borderRadius:12,display:"flex",justifyContent:"center",alignItems:"center"}},t.changeSign===V.StateChangeSign.Plus&&e(l).createElement(Se.icons.Plus,{"data-testid":"estimated-changes-icon-receive",size:16,color:"bgWallet"}),t.changeSign===V.StateChangeSign.Minus&&e(l).createElement(Se.icons.Send,{"data-testid":"estimated-changes-icon-send",size:16,color:"bgWallet"}),t.changeSign===V.StateChangeSign.Equal&&e(l).createElement(Se.icons.Check,{"data-testid":"estimated-changes-icon-check",size:16,color:"bgWallet"})),e(l).createElement(xe.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"left",color:V.StateChangeColor.White},t.name)),e(l).createElement(Re,null,e(l).createElement(xe.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",color:o,textAlign:"right"},r)))},Ne=({change:t})=>e(l).createElement(Ae,null,e(l).createElement(Pe,null,t.image&&e(l).createElement(De,{size:24},e(l).createElement(Te.EcosystemImage,{image:{type:"fungible",src:t.image},size:24})),!t.image&&t.changeType===V.ChangeType.approval&&e(l).createElement(Se.Box,{style:{backgroundColor:"textSecondary",size:24,flex:"none",borderRadius:12,display:"flex",justifyContent:"center",alignItems:"center"}},e(l).createElement(Se.icons.Check,{size:16,color:"bgWallet"})),e(l).createElement(xe.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"left",color:V.StateChangeColor.White},t.message||t.fallbackMessage)));l=i("29o0l"),ee=i("gkfw3");var Me=i("j81qC");xe=i("27SDj");const je=ee.default.div`
  margin-right: 4px;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
`,Be=ee.default.div`
  height: 1px;
  background-color: #222222;
`,Le=ee.default.div`
  padding: 4px;
  display: flex;
  align-items: center;
  cursor: pointer;
`,He=ee.default.div`
  display: flex;
  flex-direction: column;
`,$e=ee.default.div`
  background: #2a2a2a;
  border-top-left-radius: ${({isFirstRow:e})=>e?"16px":"0px"};
  border-top-right-radius: ${({isFirstRow:e})=>e?"16px":"0px"};
  border-bottom-left-radius: ${({isLastRow:e})=>e?"16px":"0px"};
  border-bottom-right-radius: ${({isLastRow:e})=>e?"16px":"0px"};
  width: 100%;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  justify-content: flex-start;
  text-align: left;
`,_e=ee.default.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 8px;
  cursor: ${({onClick:e})=>e?"pointer":"auto"};
`,We=({header:t,rows:n=[]})=>{const r=!!t,[o,i]=(0,l.useState)(!r),a=(0,l.useCallback)((()=>{i(!o)}),[o]);return e(l).createElement(e(l).Fragment,null,t&&e(l).createElement(Le,{"data-testid":"toggle-table",onClick:a},e(l).createElement(je,null,o?e(l).createElement(Me.IconToggleDown,{fill:"#999999"}):e(l).createElement(Me.IconToggleRight,{fill:"#999999"})),e(l).createElement(xe.Text,{color:"#999999",textAlign:"left",size:14,weight:600,lineHeight:17},t)),o&&e(l).createElement(He,null,n.map((({label:t,value:r,description:o,onClick:i},a)=>e(l).createElement(e(l).Fragment,{key:`table-row-${t}-${a}`},t?e(l).createElement($e,{isFirstRow:0===a,isLastRow:a===n.length-1},e(l).createElement(_e,{onClick:i},e(l).createElement(xe.Text,{size:14,weight:400,lineHeight:17,color:"#ffffff"},t),r),o):r,a!==n.length-1&&n.length>1&&e(l).createElement(Be,null))))))};we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3");var Ue=i("aWXnn"),Ve=(Te=i("qppYH"),i("634r8")),ze=(xe=i("27SDj"),Z=i("gX5Te"),{});t(ze,"useTabMeta",(function(){return Qe}),(function(e){return Qe=e}));l=i("29o0l");var Ge=i("YZf6l");l=i("29o0l"),l=i("29o0l");function Xe(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var r,o,i=(0,l.useRef)(0),a=(r=(0,l.useRef)(!1),o=(0,l.useCallback)((function(){return r.current}),[]),(0,l.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),o),s=(0,l.useState)(n),c=s[0],u=s[1],d=(0,l.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++i.current;return c.loading||u((function(e){return(0,Ge.__assign)((0,Ge.__assign)({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return a()&&r===i.current&&u({value:e,loading:!1}),e}),(function(e){return a()&&r===i.current&&u({error:e,loading:!1}),e}))}),t);return[c,d]}function Ye(e,t){void 0===t&&(t=[]);var n=Xe(e,t,{loading:!0}),r=n[0],o=n[1];return(0,l.useEffect)((function(){o()}),[o]),r}var Je=i("hulLf"),Ze=i("gcdBN"),Ke=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const Qe=e=>{const{value:t}=Ye((()=>Ke(void 0,void 0,void 0,(function*(){var t,n;if(void 0===e)return;const r=yield Je.browser.tabs.get(e),o=yield(0,Ze.getTabMarkupMeta)(e);return{iconUrl:null!==(t=null==o?void 0:o.iconUrl)&&void 0!==t?t:null==r?void 0:r.favIconUrl,title:null!==(n=null==o?void 0:o.title)&&void 0!==n?n:null==r?void 0:r.title}}))),[e]);return null!=t?t:{}};ke=i("91Dw6");const et=ee.default.div`
  color: ${({color:e})=>e};
  font-size: 13px;
  font-family: Inter;
  font-weight: 500;
  margin-top: 6px;
  line-height: 16px;
`,tt=(0,ee.default)(xe.Text).attrs({size:22,weight:600,lineHeight:24,textAlign:"left"})``,nt=(0,ee.default)(xe.Text).attrs({size:15,color:"#999999",textAlign:"left",lineHeight:20})``,rt=e=>{const{title:t,type:n,description:r,domain:o}=e,{t:i}=(0,we.useTranslation)(),{originIsBlocklisted:a}=Z.hooks.useOriginIsBlocklisted(e.domain);let s;s=(0,ze.useTabMeta)("tabId"in e?e.tabId:void 0).iconUrl,"iconUrl"in e&&(s=e.iconUrl),a&&(s=void 0);let c="#999999";return a&&(c=ke.DANGER_COLOR),l.createElement(Ue.Column,{margin:"16px 0 8px 0"},l.createElement(Ve.Row,null,l.createElement(Te.EcosystemImage,{image:{type:"dapp",src:s},size:56}),l.createElement(Ue.Column,{margin:"0 0 0 8px"},l.createElement(tt,null,t||i(function(e){switch(e){case"APPROVE_TRANSACTION":return"notificationSignatureRequestConfirmTransactionCapitalized";case"APPROVE_TRANSACTIONS":return"notificationSignatureRequestConfirmTransactionsCapitalized";case"SIGN_MESSAGE":return"dappApprovePopupSignMessage";case"CONNECT":return"notificationApplicationApprovalActionButtonConnect";case"SIGN_IN":return"notificationApplicationApprovalActionButtonSignIn"}}(n))),o&&l.createElement(et,{color:c},(0,G.removeWebPrefixes)(null!=o?o:"")))),r&&l.createElement(Ve.Row,{margin:"8px 0 0 0"},"string"==typeof r?l.createElement(nt,null,r):r))};var ot=i("FGYv9");y=i("iOvk1"),we=i("43063"),l=i("29o0l"),xe=i("27SDj"),ee=i("gkfw3"),Te=i("qppYH"),xe=i("27SDj");const it=ee.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 16px;
`,at=ee.default.div`
  margin-left: 16px;
`,st=(0,ee.default)(Te.EcosystemImage)`
  margin-right: 4px;
`,lt=(0,ee.default)(xe.Text)`
  &:hover {
    color: #ab9ff2;
  }
`,ct=ee.default.div`
  margin-left: 8px;
`,ut=t=>{const{t:n}=(0,we.useTranslation)(),r=y.Chains.getChainName(t);let o="solana";switch(r){case"Solana":o="solana";break;case"Ethereum":o="ethereum";break;case"Polygon":o="polygon";break;case"Bitcoin":o="bitcoin"}const i=e(l).createElement(it,null,e(l).createElement(st,{image:{type:"network",preset:o},size:16}),e(l).createElement(xe.Text,{size:14,weight:400,lineHeight:17,color:"#999999"},r));return{label:n("notificationTransactionApprovalNetwork"),value:i}},dt=ee.default.div`
  margin-top: 24px;
  margin-bottom: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
`,pt=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 8px;
  margin-top: 16px;
`,ft=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,gt=ee.default.div`
  display: flex;
  justify-content: center;
  margin: 16px 0;
`,mt=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,ht=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,vt=(0,ee.default)(ot.Body)`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
`,yt=e(l).memo((({advancedRows:t=[],confirmApproval:n,denyApproval:r,hasSimulationFailed:o,numTransactions:i,domain:a,rows:s=[],networkFeeRows:c=[],isLoading:u,isErrorNetworkFee:d,isErrorNativeTokenBalance:p,simulationResults:f,simulationWarnings:g,tabId:m,networkID:h,showFriction:v,showConfirmAnyway:y})=>{const{t:w}=(0,we.useTranslation)(),E=ut(h),x=g.length>0||d||p||o,I=g.some((e=>e.severity===V.ScanWarningVariant.criticalAlert)),b=0===f.length,k=!(o||b&&x),S=(0,l.useMemo)((()=>{const e=[{text:w(n?"commandCancel":"commandClose"),onClick:r,testID:"secondary-button"}];return v||y||!n||e.push({text:w("commandConfirm"),theme:I||o?"warning":"primary",onClick:()=>n(),disabled:u,testID:"primary-button"}),e}),[n,r,I,o,v,y,u,w]);return e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(vt,null,e(l).createElement("div",null,e(l).createElement(rt,{domain:a,type:i&&i>1?"APPROVE_TRANSACTIONS":"APPROVE_TRANSACTION",tabId:m,description:w("notificationBalanceChangesText")}),x&&e(l).createElement(dt,{"data-testid":"warning-container"},g.map(((t,n)=>e(l).createElement(be.WarningDialog,{message:t.message,variant:t.severity,key:`simulation-warning-${n}`}))),o&&e(l).createElement(be.WarningDialog,{message:w("notificationFailedToScan"),variant:1,"data-testid":"simulation-failed"}),p&&e(l).createElement(be.WarningDialog,{message:w("nativeTokenBalanceErrorWarning"),variant:3}),d&&e(l).createElement(be.WarningDialog,{message:w("gasEstimationErrorWarning"),variant:3})),e(l).createElement(pt,null,k&&e(l).createElement(Fe,{rows:f}),e(l).createElement(We,{rows:[E,...c,...s]}),t.length>0&&e(l).createElement(We,{header:w("notificationAdvancedDetailsText"),rows:[...t]}))),e(l).createElement(gt,null,e(l).createElement(ft,{color:"#999999"},w("notificationConfirmFooter")))),e(l).createElement(ot.Footer,null,e(l).createElement(Ee.ButtonGroup,{buttons:S}),v&&n&&e(l).createElement(mt,null,e(l).createElement(ht,{hoverColor:ke.DANGER_COLOR,onClick:n,color:"#777777"},w("commandConfirmUnsafe"))),y&&n&&!v&&e(l).createElement(mt,null,e(l).createElement(ht,{hoverColor:"#ab9ff2",onClick:n,color:"#777777"},w("commandConfirmAnyway")))))}));we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),Me=i("j81qC"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),K=i("twk6W"),ke=i("91Dw6"),ot=i("FGYv9");const wt=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})`
  margin-top: 16px;
  margin-bottom: 8px;
`,Et=ee.default.div`
  margin-top: 16px;
`,xt=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,It=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,bt=(0,ee.default)(ot.Body)`
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
  padding: 16px 16px;
`,kt=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,St=(0,ee.default)(xe.Text).attrs({size:28,weight:600,lineHeight:32,textAlign:"left",letterSpacing:"-2%"})``,Tt=ee.default.div`
  color: ${ke.DANGER_COLOR};
  font-size: 13px;
  font-family: Inter;
  font-weight: 500;
  line-height: 16px;
`,Ct=({origin:t,onConfirm:n,onClose:r,warningMessage:o})=>{const{t:i}=(0,we.useTranslation)();return e(l).useEffect((()=>{K.analytics.capture("blockScreenSeenByUser",{data:{warningMessage:o,url:t}})}),[t,o]),e(l).createElement(ot.Container,{"data-testid":"blocklist-connect-request"},e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(bt,null,e(l).createElement("div",null,e(l).createElement(kt,null,e(l).createElement(Me.IconShieldStop,{width:36,height:36}),e(l).createElement(St,null,i("maliciousRequestBlockedTitle")),e(l).createElement(Tt,null,(0,G.removeWebPrefixes)(t))),o&&e(l).createElement(Et,null,e(l).createElement(be.WarningDialog,{message:o,variant:1})),e(l).createElement(wt,{color:"#FFFFFF"},i("maliciousRequestBlocked")))),e(l).createElement(ot.Footer,{plain:!0},e(l).createElement(Ee.Button,{onClick:r},i("commandClose")),e(l).createElement(xt,null,e(l).createElement(It,{hoverColor:ke.DANGER_COLOR,onClick:n,color:"#777777"},i("commandProceedAnywayUnsafe")))))};we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),Me=i("j81qC"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),ke=i("91Dw6"),Se=i("9yJOd"),G=i("RVqnc"),l=i("29o0l"),X=i("88tsI"),ee=i("gkfw3");var At=i("lLNMU");ke=i("91Dw6");const Dt=({setRiskAcknowledged:e})=>{const{t:t}=(0,X.useTranslation)(),[n,r]=l.useState(!1);return l.useEffect((()=>{e(n)}),[n,e]),l.createElement(Pt,{onClick:()=>{r((e=>!e))},"data-testid":"acknowledge--button"},l.createElement(At.CheckboxGroup,{align:"flex-start"},l.createElement(Rt,{checked:n,onChange:e=>e.stopPropagation(),color:"#222222",checkColor:ke.DANGER_COLOR}),l.createElement(Ot,{content:t("maliciousRequestAcknowledge")})))},Pt=ee.default.button`
  background-color: ${(0,G.hexToRGB)(ke.DANGER_COLOR,.1)};
  border: none;
  border-radius: 8px;
  padding: 16px;
  display: flex;
  flex-direction: row;
  width: 100%;
  cursor: pointer;
`,Rt=(0,ee.default)(At.Checkbox)`
  border-width: 0;
  margin-right: 0;
  width: 16px;
  height: 16px;
  border-radius: 4px;
  margin-right: 8px;
`,Ot=(0,ee.default)(Se.Text).attrs({size:16,weight:400})`
  color: ${ke.DANGER_COLOR};
  text-align: left;
`;ot=i("FGYv9");const Ft=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})`
  margin-top: 16px;
  margin-bottom: 8px;
`,qt=ee.default.div`
  margin-top: 16px;
`,Nt=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Mt=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin-bottom: 8px;
`,jt=(0,ee.default)(ot.Body)`
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
  padding: 16px 16px;
`,Bt=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,Lt=(0,ee.default)(ot.Footer)`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,Ht=(0,ee.default)(xe.Text).attrs({size:28,weight:600,lineHeight:32,textAlign:"left",letterSpacing:-.56})``,$t=ee.default.div`
  color: #999999;
  font-size: 13px;
  font-family: Inter;
  font-weight: 500;
  line-height: 16px;
`,_t=({origin:t,onConfirm:n,onClose:r,onBack:o,warningMessage:i})=>{const[a,s]=e(l).useState(!1),{t:c}=(0,we.useTranslation)();return e(l).createElement(ot.Container,{"data-testid":"friction-notifictaion"},e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(jt,null,e(l).createElement("div",null,e(l).createElement(Bt,null,e(l).createElement(Me.IconShieldStop,{width:36,height:36}),e(l).createElement(Ht,null,c("maliciousRequestAreYouSure")),e(l).createElement($t,null,(0,G.removeWebPrefixes)(t))),i&&e(l).createElement(qt,null,e(l).createElement(be.WarningDialog,{message:i,variant:1})),e(l).createElement(Ft,{color:"#FFFFFF"},c("maliciousRequestFrictionDescription")))),e(l).createElement(Lt,{plain:!0},e(l).createElement(Dt,{setRiskAcknowledged:s}),e(l).createElement(Ee.ButtonGroup,{buttons:[{text:c("commandBack"),onClick:o},{text:c("commandClose"),onClick:r}]}),e(l).createElement(Mt,null,e(l).createElement(Nt,{onClick:a?n:void 0,color:a?ke.DANGER_COLOR:(0,G.hexToRGB)(ke.DANGER_COLOR,.5)},c("commandYesConfirmUnsafe")))))};we=i("43063"),l=i("29o0l"),ee=i("gkfw3"),Me=i("j81qC");var Wt=i("5YM9i"),Ut=(xe=i("27SDj"),ke=i("91Dw6"),we=i("43063"),l=i("29o0l"),i("jkMDT")),Vt=(ee=i("gkfw3"),Me=i("j81qC"),xe=i("27SDj"),i("2RoPI"));const zt=ee.default.div`
  background: #2a2a2a;
  border-radius: ${({isInTable:e})=>e?"0 0 16px 16px":"16px"};
  overflow: hidden;
  position: relative;
`,Gt=ee.default.div`
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: ${({isOverflow:e})=>e?"pointer":"auto"};
`,Xt=ee.default.div`
  position: relative;
  overflow-wrap: break-word;
  max-height: ${({isOpen:e})=>e?"none":"96px"};

  &:after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
    background: ${({isOverflow:e})=>e?"linear-gradient(to top, #2a2a2a, transparent)":"none"};
    transition: background 200ms ease;
    display: ${({isOpen:e})=>e?"none":"block"};
  }
`,Yt=ee.default.div`
  padding: ${({isOpen:e,isOverflow:t})=>!t||e?"0 16px 16px 16px":"0 16px"};
`,Jt=(0,ee.default)(xe.Text)`
  pre {
    text-align: left;
    font-size: 14px;
    font-weight: 400;
    line-height: 17px;
    color: #999999;
    white-space: pre-wrap;
  }
`,Zt=ee.default.div`
  margin-right: 4px;
`,Kt=ee.default.div`
  display: flex;
  width: 100%;
`,Qt=ee.default.div``,en=(0,ee.default)(Me.IconCopy)`
  &:hover {
    path {
      stroke: #ffffff;
    }
  }
`,tn=e(l).memo((({message:t,allowCopy:n,isInTable:r=!1,header:o})=>{const{t:i}=(0,we.useTranslation)(),a=(0,l.useRef)(null),[s,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)(!1),{copied:p,copy:f}=(0,Vt.useCopyButton)(t),g=(0,l.useCallback)((()=>{f(),Ut.toast.success(i("notificationMessageCopied"),{position:"top-center"})}),[f,i]),m=(0,l.useCallback)((()=>{c(!s)}),[s]);return(0,l.useEffect)((()=>{if(a.current){const e=a.current.scrollHeight>96;d(e)}}),[t,s]),e(l).createElement(zt,{isInTable:r},e(l).createElement(Gt,{isOverflow:u,onClick:u?m:void 0},e(l).createElement(Kt,null,u&&e(l).createElement(Zt,{"data-testid":"toggle"},s?e(l).createElement(Me.IconToggleDown,null):e(l).createElement(Me.IconToggleRight,null)),e(l).createElement(xe.Text,{textAlign:"left",size:14,weight:400,lineHeight:17,wordBreak:"break-word"},o)),n&&e(l).createElement(Qt,{onClick:e=>{e.stopPropagation(),g()}},e(l).createElement(en,{copied:p,fill:"#999999","data-testid":"copy-icon"}))),e(l).createElement(Xt,{isOpen:s,isOverflow:u},e(l).createElement(Yt,{isOpen:s,isOverflow:u},e(l).createElement("div",{ref:a},e(l).createElement(Jt,null,e(l).createElement("pre",null,t))))))})),nn=ee.default.div`
  background: #2a2a2a;
  border-radius: 16px;
`,rn=ee.default.div`
  border-radius: 16px 16px 0 0;
  padding: 12px 16px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
  background: #2a2a2a;
  color: #999999;
`,on=ee.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;

  > * {
    margin-top: 12px;
  }
`,an=ee.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,sn=ee.default.a.attrs({target:"_blank",rel:"noopener noreferrer"})`
  text-decoration: none;
  cursor: pointer;
`,ln=ee.default.div`
  height: 8px;
  background-color: #222222;
`,cn=({parsedInstructions:t})=>t.map((({title:n,rowItems:r},o)=>e(l).createElement(e(l).Fragment,null,e(l).createElement(yn,{key:`instruction-row-${o}`,title:n,rowItems:r}),o!==t.length-1&&t.length>1&&e(l).createElement(ln,null)))),un=({detailName:t,detailValue:n,errorObject:r})=>{const{t:o}=(0,we.useTranslation)(),i=void 0!==r;return e(l).createElement(fn,{style:{flexDirection:"column"}},e(l).createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},e(l).createElement(mn,{size:14,lineHeight:17,wordBreak:"break-word",textAlign:"left"},o(`siwsFieldLable_${t}`)),e(l).createElement(gn,{size:14,lineHeight:17,wordBreak:"break-word",textAlign:"right",style:{width:"70%"}},"resources"===t?n.join("\n"):n)),i&&t in r&&e(l).createElement(xe.Text,{color:i&&t in r?ke.ERROR_COLOR:"default",size:12.5,style:{marginTop:8,textAlign:"left"}},o(r[t])))},dn=({signInData:t,errorObject:n})=>{const{t:r}=(0,we.useTranslation)(),[o,i]=(0,l.useState)(!1),a=(0,l.useCallback)((e=>{i(!o),setTimeout((()=>{!o&&e.target.scrollIntoView({behavior:"smooth",block:"start"})}),1)}),[o]),s=void 0!==n,c=Object.entries(t).filter((([e,t])=>"statement"!==e)),u=o?c:c.filter((([e,t])=>n&&e in n));return e(l).createElement(e(l).Fragment,null,e(l).createElement(pn,{isSticky:o,onClick:a,isCollapsible:!0},e(l).createElement(hn,{isExpanded:o},e(l).createElement(Me.IconToggleRight,{fill:"#999999"})),e(l).createElement(xe.Text,{color:"#999999",textAlign:"left",size:14,weight:600,lineHeight:17},r("notificationAdvancedDetailsText")),s&&e(l).createElement(xe.Text,{color:ke.ERROR_COLOR,textAlign:"left",size:14,weight:400,lineHeight:17},"(",r("siwsErrorNumIssues",{n:Object.keys(n).length}),")")),e(l).createElement(nn,null,u.map((([t,r])=>e(l).createElement(un,{detailName:t,detailValue:r,errorObject:n})))))},pn=ee.default.div`
  border-radius: 16px 16px 0 0;
  display: flex;
  flex-direction: row;
  gap: 4px;
  transition:
    box-shadow 0.2s ease,
    color 0.2s ease;
  scroll-margin-top: 10px;

  ${({isCollapsible:e})=>e&&"\n    cursor: pointer;\n    :hover {\n      color: #ffffff;\n    }\n  "}

  ${({isSticky:e})=>e&&"\n    box-shadow: 0px 81px 33px rgba(0, 0, 0, 0.02), 0px 46px 27px rgba(0, 0, 0, 0.08), 0px 20px 20px rgba(0, 0, 0, 0.13), 0px 5px 11px rgba(0, 0, 0, 0.15), 0px 0px 0px rgba(0, 0, 0, 0.15);\n    position: sticky;\n    top: 0;\n    z-index: 1000;\n  "}
`,fn=ee.default.div`
  padding: 14px 16px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: flex-start;
  border-top: 1px solid #222222;
`,gn=(0,ee.default)(xe.Text)`
  flex-shrink: 1;
`,mn=(0,ee.default)(xe.Text)`
  flex-shrink: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,hn=ee.default.div`
  cursor: pointer;
  transition: background-color 0.2s ease;

  :hover {
    background-color: #333333;
  }

  svg {
    color: currentColor;
    position: relative;
    fill: currentColor;
    transition: transform 0.1s ease-in-out;
    transform: ${({isExpanded:e})=>e?"rotate(90deg)":"none"};

    * {
      color: currentColor;
    }
  }
`,vn=(ee.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 0px;
  gap: 8px;
`,({condition:e,wrapper:t,children:n})=>e?t(n):n),yn=({title:t,rowItems:n})=>e(l).createElement(wn,{title:t,rowItems:n}),wn=({title:t,rowItems:n,emptyDescription:r,info:o})=>e(l).createElement(nn,null,!!t&&e(l).createElement(rn,null,e(l).createElement(xe.Text,{textAlign:"left",size:14,weight:500,lineHeight:17,color:"currentColor"},t),o&&e(l).createElement(Wt.Info,{info:o})),e(l).createElement(on,null,n.map(((t,n)=>e(l).createElement(En,{key:`${t.value||t.key}-${n}`,item:t}))),0===n.length&&e(l).createElement(an,null,e(l).createElement(xe.Text,{"data-testid":"instruction-row-empty-description",size:14,weight:400,lineHeight:17,whiteSpace:"normal",color:"#EB3742"},r))));function En({item:t,key:n}){return e(l).createElement(an,{key:n},t.key&&e(l).createElement(xe.Text,{size:14,lineHeight:17,color:"#777777"},t.key),t.value.length>200&&e(l).createElement(tn,{header:t.key,message:t.value,allowCopy:!0}),t.value.length<=200&&e(l).createElement(vn,{condition:t.link,wrapper:n=>e(l).createElement(sn,{href:t.link},n)},e(l).createElement(xe.Text,{size:14,weight:500,lineHeight:20,color:t.link?"#AB9FF2":void 0,whiteSpace:t.key?"normal":"pre-line",wordBreak:"break-word",textAlign:"left"},t.value)))}ot=i("FGYv9"),l=i("29o0l"),Me=i("j81qC");var xn=i("hiI91");xe=i("27SDj");const In=(t,n,r,o="#999999",i,a,s)=>[{label:t("bottomSheetNetworkFeeRow"),onClick:s,value:e(l).createElement(it,null,e(l).createElement(xe.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word","data-testid":"transactionFee",color:o},r?e(l).createElement(xn.SkeletonLoader,{width:"75px","data-testid":"network-fee-loading",height:"8px",borderRadius:"8px",backgroundColor:"#484848"}):n),s&&e(l).createElement(at,null,e(l).createElement(Me.IconChevronRight,null))),description:i&&e(l).createElement(xe.Text,{size:12,weight:400,lineHeight:14,color:a,textAlign:"left"},i)}],bn=(t,n)=>n?[{label:t("bottomSheetEstimatedTimeRow"),value:e(l).createElement(xe.Text,{size:14,weight:400,lineHeight:17,color:"#999999"},n)}]:[];we=i("43063"),a=i("cFUcx"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Me=i("j81qC");var kn=i("bw7Ah");xe=i("27SDj");const Sn=(0,ee.default)(xe.Text)`
  font-weight: 400;
  font-size: 14px;
  line-height: 17px;
  color: #999999;
  cursor: pointer;
`,Tn=(0,ee.default)(xe.Text)`
  font-weight: 400;
  font-size: 14px;
  line-height: 17px;
  color: #ffdc62;
  cursor: pointer;
`,Cn=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word",color:"#999999"})`
  cursor: pointer;
`,An=({origin:e,autoConfirmStatusCode:t,networkID:n})=>{const{t:r}=(0,we.useTranslation)(),{open:o,isActive:i,untilDate:s}=ae(e,n),c=l.createElement(it,null,null!=t&&t!=a.AutoConfirmStatusCode.Disabled&&t!=a.AutoConfirmStatusCode.OK?l.createElement(Tn,null,l.createElement(kn.PTrans,{i18nKey:"autoConfirmUnavailable"})):i(n)&&s?l.createElement(Sn,null,"Until ",(0,G.formatUntil)(s).toLowerCase()):l.createElement(Cn,{"data-testid":"networkName"},r("notificationAutoConfirmOff")),l.createElement(at,null,l.createElement(Me.IconChevronRight,null)));return{label:r("notificationAutoConfirm"),value:c,onClick:()=>{o(t)}}};l=i("29o0l"),X=i("88tsI"),ee=i("gkfw3"),Ee=i("hFkH3"),xn=i("hiI91"),Ie=i("cleOt"),ot=i("FGYv9");function Dn({domain:t,type:n,onClose:r,tabId:o}){const{t:i}=(0,X.useTranslation)(),a="APPROVE_TRANSACTION"===n||"APPROVE_TRANSACTIONS"===n?i("notificationBalanceChangesText"):void 0;return e(l).createElement(ot.Container,{"data-testid":"scan-loading"},e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(ot.Body,null,e(l).createElement(Rn,null,e(l).createElement(rt,{domain:t,type:n,tabId:o,description:a||e(l).createElement(Bn,null,e(l).createElement(Ln,{width:270}),e(l).createElement(Ln,{width:320}))}),e(l).createElement(Fn,null,e(l).createElement(Pn,null),e(l).createElement(Pn,null),e(l).createElement(Pn,null)))),e(l).createElement(On,null,e(l).createElement(Ee.Button,{onClick:r},i("commandClose"))))}function Pn(){return e(l).createElement(qn,null,e(l).createElement(Nn,null,e(l).createElement(Mn,null),e(l).createElement(jn,null)),e(l).createElement(jn,null))}const Rn=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,On=ee.default.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
  padding-bottom: 24px;
  gap: 16px;
`,Fn=ee.default.div`
  display: flex;
  flex-direction: column;
  border-radius: 16px;
  overflow: hidden;
  gap: 1px;
`,qn=ee.default.div`
  display: flex;
  flex-direction: row;
  padding: 16px;
  background: #2c2d30;
  justify-content: space-between;
`,Nn=ee.default.div`
  display: flex;
  flex-direction: row;
  gap: 8px;
`,Mn=(0,ee.default)(xn.SkeletonLoader)`
  width: 24px;
  height: 24px;
  border-radius: 100%;
`,jn=(0,ee.default)(xn.SkeletonLoader)`
  width: 78px;
  height: 24px;
  border-radius: 16px;
`,Bn=ee.default.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: 8px;
`,Ln=(0,ee.default)(xn.SkeletonLoader)`
  width: ${e=>e.width}px;
  height: 16px;
  background: ${e=>e.theme.skeletonLight};
  border-radius: 16px;
`;var Hn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const $n=t=>{var n,r,o,i,a,s;const c=(0,G.removeWebPrefixes)(t.url.origin),{url:u,requestId:d,sequenceId:g}=t,m=u.origin,h=y.EVMNetworkID.parse(`eip155:${t.transaction.chainId?parseInt(t.transaction.chainId,16):void 0}`),{t:I}=(0,X.useTranslation)(),{data:b,isError:k,isFetched:S,isLoading:T}=Z.hooks.useScannedTransaction({networkID:h,url:u.href,userAccount:t.transaction.from,params:{transactions:[t.transaction],method:"eth_sendTransaction"},type:"transaction"}),C=(null==b?void 0:b.error)===V.SIMULATION_ERRORS.INSUFFICIENT_GAS||(null==b?void 0:b.error)===V.SIMULATION_ERRORS.INSUFFICIENT_FUNDS,{screen:A,setScreen:D,showFrictionInterstitial:P}=le({block:null==b?void 0:b.block,isLoadingSimulation:T&&!S,warnings:null==b?void 0:b.warnings}),R=(0,p.usePostOutgoingBackgroundResponse)(),F=(0,me.usePostResponseWithAnalytics)(R,{networkID:h,sequenceId:g,origin:m}),q=(0,l.useCallback)((()=>{F({jsonrpc:"2.0",id:d,error:O.userRejectedRequest(d).error})}),[d,F]),N=(0,l.useMemo)((()=>"string"==typeof t.transaction.gas?new(0,G.BigNumber)(t.transaction.gas,16):void 0),[t.transaction.gas]),{transactionSpeed:M,openGasSettings:j}=ge(h,N?{gasLimit:N}:void 0),B={networkID:h,unsignedTransaction:t.transaction},{networkFee:L,isLoadingNetworkFee:H,isErrorGasEstimation:$,gasEstimation:_,estimatedTime:W}=((e,t,n,r)=>{const{data:o,isLoading:i,isError:a}=Z.hooks.useGasEstimation({networkID:e,multichainTransaction:t,transactionSpeed:n,queryOptions:{refetchInterval:!1}}),{data:s,isLoading:l}=Z.hooks.useGasEstimationPrice(e,o),c=n&&t.networkID in z.ESTIMATED_EVM_CONFIRMATION_TIMES_ABBREV?r(z.ESTIMATED_EVM_CONFIRMATION_TIMES_ABBREV[t.networkID][n]):"";return{networkFee:(0,z.useNetworkFee)({networkID:t.networkID,gasEstimation:o,gasEstimationPrice:s}),isLoadingNetworkFee:i||l,gasEstimation:o,isErrorGasEstimation:a,estimatedTime:c}})(h,B,M,I),{hasSufficientFunds:Q,nativeTokenSymbol:ee,isLoading:te,isError:ne}=Z.hooks.useHasSufficientFunds(h,E.AddressType.EVM,_,void 0),{maxFeePerGas:re,maxPriorityFeePerGas:oe}=(0,z.buildGasConfig)(_||{gasLimit:new(0,G.BigNumber)(0),maxFeePerGas:new(0,G.BigNumber)(0),maxPriorityFeePerGas:new(0,G.BigNumber)(0),networkID:h}),{ledgerSignTransaction:ie,isLedgerAccount:se}=(({transaction:e,maxFeePerGas:t="0x0",maxPriorityFeePerGas:n="0x0",postOutgoingBackgroundResponse:r,requestId:o})=>{const i=(0,x.useQueryClient)(),{data:a}=Z.hooks.useSelectedMultiChainAccount(),[s,c]=(0,l.useMemo)((()=>{var e;return[null!==(e=null==a?void 0:a.identifier)&&void 0!==e?e:"",(null==a?void 0:a.type)===v.AccountType.Ledger]}),[a]);return{ledgerSignTransaction:(0,l.useCallback)((()=>Hn(void 0,void 0,void 0,(function*(){const a=(0,Y.getVaultProxy)(),l=yield Hn(void 0,void 0,void 0,(function*(){return e.maxFeePerGas=t,e.maxPriorityFeePerGas=n,(0,w.setLedgerTransportStateOverride)(i,w.LEDGER_WAITING_FOR_APPROVAL_STATE),a.sign(s,{chainType:E.AddressType.EVM,signingType:"transaction",message:(0,z.serialize)(e)}).finally((()=>(0,w.setLedgerTransportStateOverride)(i,w.LEDGER_RECONNECTING_STATE)))}));let c;switch(l.status){case"success":c={jsonrpc:"2.0",id:o,result:{type:"send",maxFeePerGas:t,maxPriorityFeePerGas:n,signature:l.signature}};break;case"error":c={jsonrpc:"2.0",id:o,error:O.userRejectedRequest(o).error}}r(c)}))),[s,t,n,r,e,i,o]),isLedgerAccount:c}})({transaction:t.transaction,maxFeePerGas:re,maxPriorityFeePerGas:oe,postOutgoingBackgroundResponse:F,requestId:d}),{pushDetailView:ce}=(0,f.useDetailViews)(),{save:ue,isAutoConfirmIsTouched:de,showAutoConfirmRow:pe}=ae(t.url.origin),fe=(0,l.useCallback)((()=>Hn(void 0,void 0,void 0,(function*(){de&&(yield ue()),se?ce(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerApp:w.LedgerApp.EVM,ledgerAction:ie,cancel:q}))):F({jsonrpc:"2.0",id:d,result:{type:"signAndSend",maxFeePerGas:re||"0x0",maxPriorityFeePerGas:oe||"0x0"}})}))),[de,ue,se,ce,ie,q,F,d,re,oe]),he=(0,l.useCallback)((()=>{K.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:m,sequenceId:t.sequenceId}}),D("main")}),[m,t.sequenceId,D]),{data:ve}=Z.hooks.usePreferredExplorers(),ye=(0,l.useCallback)((e=>{if(!ve)return"";const t=ve.explorers[null!=h?h:y.NetworkIDs.Solana.Mainnet];return(0,U.generateExplorerUrl)({endpoint:"address",explorerType:t,networkID:null!=h?h:y.NetworkIDs.Ethereum.Mainnet,param:e})}),[ve,h]),we=(0,l.useMemo)((()=>{var t;if(!b||!(null===(t=b.advancedDetails)||void 0===t?void 0:t.advancedRows))return[];const n=b.advancedDetails.advancedRows.map((e=>({title:e.title,rowItems:e.items.map((e=>({key:e.title,link:e.isAddress?ye(e.value):void 0,value:e.isAddress?(0,v.formatAddressValue)(e.value):e.value})))})));return 0===n.length?[]:[{value:e(l).createElement(cn,{parsedInstructions:n})}]}),[b,ye]),Ee=An({origin:t.url.origin,networkID:t.transaction.chainId?(0,y.hexToCAIP2)(t.transaction.chainId):void 0,autoConfirmStatusCode:t.autoConfirmStatusCode}),xe=[];if(pe&&xe.push(Ee),"block"===A)return e(l).createElement(Ct,{warningMessage:null!==(r=null===(n=null==b?void 0:b.block)||void 0===n?void 0:n.message)&&void 0!==r?r:"",origin:m,onConfirm:he,onClose:q});const Ie={networkID:h,unsignedTransaction:t.transaction};return"loading"===A?e(l).createElement(Dn,{type:"APPROVE_TRANSACTION",tabId:t.tabId,domain:c,onClose:q}):"friction"===A?e(l).createElement(_t,{onClose:q,onConfirm:fe,onBack:()=>D("main"),origin:m,warningMessage:null===(i=null===(o=null==b?void 0:b.warnings)||void 0===o?void 0:o[0])||void 0===i?void 0:i.message}):e(l).createElement(yt,{advancedRows:we,confirmApproval:P?()=>D("friction"):fe,denyApproval:q,hasSimulationFailed:!!k,numTransactions:1,domain:c,rows:xe,simulationResults:null!==(a=null==b?void 0:b.expectedChanges)&&void 0!==a?a:[],simulationWarnings:null!==(s=null==b?void 0:b.warnings)&&void 0!==s?s:[],tabId:t.tabId,networkID:Ie.networkID,showFriction:P,showConfirmAnyway:!P&&C,isErrorNativeTokenBalance:ne,isErrorNetworkFee:$,isLoading:H||te,networkFeeRows:[...In(I,L,H,"insufficient"===Q?"#EB3742":"#999999","insufficient"===Q?I("transactionNotEnoughNative",{nativeTokenSymbol:ee}):$?I("gasEstimationCouldNotFetch"):void 0,"#EB3742",j),...bn(I,W)]})};var _n={};t(_n,"EthSignMessage",(function(){return Nr}),(function(e){return Nr=e}));v=i("4xbAj"),y=i("iOvk1");var Wn={},Un=i("8tcqI").Buffer;Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.intToUnpaddedBuffer=Wn.bigIntToUnpaddedBuffer=Wn.bigIntToHex=Wn.bufArrToArr=Wn.arrToBufArr=Wn.validateNoLeadingZeroes=Wn.baToJSON=Wn.toUtf8=Wn.short=Wn.addHexPrefix=Wn.toUnsigned=Wn.fromSigned=Wn.bufferToInt=Wn.bigIntToBuffer=Wn.bufferToBigInt=Wn.bufferToHex=Wn.toBuffer=Wn.unpadHexString=Wn.unpadArray=Wn.unpadBuffer=Wn.setLengthRight=Wn.setLengthLeft=Wn.zeros=Wn.intToBuffer=Wn.intToHex=void 0;var Vn={},zn=i("8tcqI").Buffer;Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.assertIsString=Vn.assertIsArray=Vn.assertIsBuffer=Vn.assertIsHexString=void 0;var Gn={},Xn=i("8tcqI").Buffer;function Yn(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.isHexString=Gn.getKeys=Gn.fromAscii=Gn.fromUtf8=Gn.toAscii=Gn.arrayContainsArray=Gn.getBinarySize=Gn.padToEven=Gn.stripHexPrefix=Gn.isHexPrefixed=void 0,Gn.isHexPrefixed=Yn;function Jn(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}Gn.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return Yn(e)?e.slice(2):e},Gn.padToEven=Jn,Gn.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return Xn.byteLength(e,"utf8")},Gn.arrayContainsArray=function(e,t,n){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===n?"some":"every"]((t=>e.indexOf(t)>=0))},Gn.toAscii=function(e){let t="",n=0;const r=e.length;for("0x"===e.substring(0,2)&&(n=2);n<r;n+=2){const r=parseInt(e.substr(n,2),16);t+=String.fromCharCode(r)}return t},Gn.fromUtf8=function(e){return`0x${Jn(Xn.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},Gn.fromAscii=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n).toString(16);t+=r.length<2?`0${r}`:r}return`0x${t}`},Gn.getKeys=function(e,t,n){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const r=[];for(let o=0;o<e.length;o++){let i=e[o][t];if(!0!==n||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";r.push(i)}return r},Gn.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)};Vn.assertIsHexString=function(e){if(!(0,Gn.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};Vn.assertIsBuffer=function(e){if(!zn.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};Vn.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};Vn.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}};Wn.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};Wn.intToBuffer=function(e){const t=(0,Wn.intToHex)(e);return Un.from((0,Gn.padToEven)(t.slice(2)),"hex")};Wn.zeros=function(e){return Un.allocUnsafe(e).fill(0)};const Zn=function(e,t,n){const r=(0,Wn.zeros)(t);return n?e.length<t?(e.copy(r),r):e.slice(0,t):e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)};Wn.setLengthLeft=function(e,t){return(0,Vn.assertIsBuffer)(e),Zn(e,t,!1)};Wn.setLengthRight=function(e,t){return(0,Vn.assertIsBuffer)(e),Zn(e,t,!0)};const Kn=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};Wn.unpadBuffer=function(e){return(0,Vn.assertIsBuffer)(e),Kn(e)};Wn.unpadArray=function(e){return(0,Vn.assertIsArray)(e),Kn(e)};Wn.unpadHexString=function(e){return(0,Vn.assertIsHexString)(e),e=(0,Gn.stripHexPrefix)(e),"0x"+Kn(e)};Wn.toBuffer=function(e){if(null==e)return Un.allocUnsafe(0);if(Un.isBuffer(e))return Un.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return Un.from(e);if("string"==typeof e){if(!(0,Gn.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return Un.from((0,Gn.padToEven)((0,Gn.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,Wn.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),Un.from(t,"hex")}if(e.toArray)return Un.from(e.toArray());if(e.toBuffer)return Un.from(e.toBuffer());throw new Error("invalid type")};function Qn(e){const t=(0,Wn.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function er(e){return(0,Wn.toBuffer)("0x"+e.toString(16))}Wn.bufferToHex=function(e){return"0x"+(e=(0,Wn.toBuffer)(e)).toString("hex")},Wn.bufferToBigInt=Qn,Wn.bigIntToBuffer=er;Wn.bufferToInt=function(e){const t=Number(Qn(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};Wn.fromSigned=function(e){return BigInt.asIntN(256,Qn(e))};Wn.toUnsigned=function(e){return er(BigInt.asUintN(256,e))};Wn.addHexPrefix=function(e){return"string"!=typeof e||(0,Gn.isHexPrefixed)(e)?e:"0x"+e},Wn.short=function(e,t=50){const n=Un.isBuffer(e)?e.toString("hex"):e;return n.length<=t?n:n.slice(0,t)+"…"};Wn.toUtf8=function(e){if((e=(0,Gn.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return Un.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};Wn.baToJSON=function(e){if(Un.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,Wn.baToJSON)(e[n]));return t}};Wn.validateNoLeadingZeroes=function(e){for(const[t,n]of Object.entries(e))if(void 0!==n&&n.length>0&&0===n[0])throw new Error(`${t} cannot have leading zeroes, received: ${n.toString("hex")}`)},Wn.arrToBufArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Un.from(t)},Wn.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};Wn.bigIntToHex=e=>"0x"+e.toString(16),Wn.bigIntToUnpaddedBuffer=function(e){return(0,Wn.unpadBuffer)(er(e))},Wn.intToUnpaddedBuffer=function(e){return(0,Wn.unpadBuffer)((0,Wn.intToBuffer)(e))};var tr=i("8tcqI").Buffer;const nr=/^[0-9A-Fa-f]+$/gu;const rr=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`,or=e=>{const t=tr.from(e.substring(2),"hex");let n;if("hex"===(32===t.length?"hex":"utf8"))n=function(e){try{const t=(0,Gn.stripHexPrefix)(e);if(t.match(nr))return rr(t)}catch(t){return(0,Wn.bufferToHex)(tr.from(e,"utf8"))}return(0,Wn.bufferToHex)(tr.from(e,"utf8"))}(e);else n=t.toString("utf8");return n};w=i("eJxop"),E=i("7mQ3Y"),x=i("3tdpt"),G=i("RVqnc"),l=i("29o0l"),Y=i("5MNpG"),J=i("dXIE8"),p=i("fxXaZ"),f=i("i1NO2"),Z=i("gX5Te"),K=i("twk6W");var ir={};t(ir,"usePostResponseWithAnalytics",(function(){return sr}),(function(e){return sr=e}));he=i("h0VH5"),y=i("iOvk1"),a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),K=i("twk6W");var ar=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const sr=function(e,t){return(n,r)=>{const{networkID:o,sequenceId:i,origin:a,originalMethod:s}=r,c=(0,l.useRef)(!1);return(0,l.useCallback)((r=>ar(this,void 0,void 0,(function*(){if(y.Chains.isEVMNetworkID(o)&&!c.current){const n=s;"error"in r?yield t({networkID:o,sequenceId:i,origin:a,method:n}):yield e({networkID:o,sequenceId:i,origin:a,method:n}),c.current=!0}return n(r)}))),[n,o,a,i,s])}}((function(e){return ar(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,a.getSupportedChainDescriptor)(e.networkID.replace("eip155:",""));if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield he.dapp.userApprovedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:e.method}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return ar(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,a.getSupportedChainDescriptor)(t);if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield he.dapp.userDeniedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:e.method}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));var lr={};t(lr,"EthSignTypedData",(function(){return xr}),(function(e){return xr=e}));se=i("3ljHn"),we=i("43063"),V=i("Dohsj"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),ke=i("91Dw6"),ot=i("FGYv9"),v=i("4xbAj"),we=i("43063"),U=i("5uSEV"),l=i("29o0l"),Me=i("j81qC");const cr=(t,n)=>{const{t:r}=(0,we.useTranslation)(),o=(0,l.useCallback)((()=>{if(t){const e=(0,U.generateExplorerUrl)({networkID:n,endpoint:"address",param:t});window.open(e)}}),[t,n]),i=e(l).createElement(it,null,e(l).createElement(lt,{size:14,weight:400,lineHeight:17,color:"#ab9ff2",onClick:o},(0,v.formatHashMedium)(null!=t?t:"",4)),e(l).createElement(ct,null,e(l).createElement(Me.IconLink,{fill:"#999999"})));return t?{label:r("notificationContractAddress"),value:i}:{label:"",value:null}};const ur=e(l=i("29o0l")).memo((({message:t,isJson:n,isInTable:r=!1,header:o})=>e(l).createElement(tn,{header:o,message:t,allowCopy:n,isInTable:r}))),dr=e=>{let t=e,n=!1;try{const r=JSON.parse(e);t=JSON.stringify(r,null,2),n=!0}catch(e){}return{formattedMessage:t,isJson:n}};var pr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const fr=ee.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex: 1;
  overflow: auto;
  padding: 0px 16px;
`,gr=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,mr=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 24px;
`,hr=ee.default.div`
  display: flex;
  justify-content: center;
  margin: 16px 0;
`,vr=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,yr=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,wr=ee.default.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 24px;
  gap: 8px;
`,Er=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,xr=t=>{const{t:n}=(0,we.useTranslation)(),{data:[r]}=(0,se.useFeatureFlags)(["enable-friction-interstitial"]),{origin:o,message:i,originalMethod:a,advancedDetails:s,tabId:c,networkID:u,autoConfirmStatusCode:d,simulationResults:p,scanWarnings:f,scanFailed:g,confirmApproval:m,denyApproval:h}=t,{formattedMessage:v,isJson:y}=dr(i),w=ut(u),E=cr(null==s?void 0:s.contractAddress,u),{save:x,isAutoConfirmIsTouched:I,showAutoConfirmRow:b}=ae(o),k=An({origin:o,autoConfirmStatusCode:d,networkID:u}),S=["eth_signTypedData_v3","eth_signTypedData_v4"].includes(null!=a?a:""),T=[];E.value&&T.push(E);const C=!!p&&(null==p?void 0:p.length)>0;C&&T.push({value:e(l).createElement(ur,{header:n("notificationMessageHeader"),message:v,isJson:y,isInTable:!0})});const A=()=>pr(void 0,void 0,void 0,(function*(){I&&(yield x()),null==m||m()})),D=(f||[]).some((e=>e.severity===V.ScanWarningVariant.criticalAlert)),P=r&&D,R=[{text:n("commandCancel"),onClick:h,testID:"secondary-button"}];return P||R.push({text:n("commandConfirm"),theme:D?"warning":"primary",onClick:A,testID:"primary-button"}),e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(fr,null,e(l).createElement("div",null,e(l).createElement(rt,{type:"SIGN_MESSAGE",domain:(0,G.removeWebPrefixes)(o),tabId:c}),e(l).createElement(mr,null,C?e(l).createElement(e(l).Fragment,null,e(l).createElement(Er,{color:"#999999"},n("notificationPermissionRequestText")),e(l).createElement(Er,{color:"#999999"},n("notificationBalanceChangesText"))):e(l).createElement(Er,{color:"#999999"},n("notificationBalanceChangesText"))),e(l).createElement("div",null,((null==f?void 0:f.length)||g)&&e(l).createElement(wr,null,f&&(null==f?void 0:f.length)>0&&e(l).createElement(e(l).Fragment,null,f.map(((t,n)=>e(l).createElement(be.WarningDialog,{message:t.message,variant:t.severity,key:`simulation-warning-${n}`})))),g&&e(l).createElement(be.WarningDialog,{message:n("notificationFailedToScan"),variant:1,"data-testid":"simulation-failed"})),e(l).createElement(gr,null,e(l).createElement("div",{"data-testid":"message"},C?p?e(l).createElement(Fe,{rows:p}):null:e(l).createElement(ur,{header:n("notificationMessageHeader"),message:v,isJson:y})),e(l).createElement(We,{rows:[w,...b&&S?[k]:[]]}),T.length>0&&e(l).createElement(We,{rows:T,header:n("notificationAdvancedDetailsText")})))),e(l).createElement(hr,null,e(l).createElement(Er,{color:"#999999"},n("notificationConfirmFooter")))),e(l).createElement(ot.Footer,{plain:!0},e(l).createElement(Ee.ButtonGroup,{buttons:R}),P?e(l).createElement(vr,null,e(l).createElement(yr,{hoverColor:ke.DANGER_COLOR,onClick:A,color:"#777777"},n("commandConfirmUnsafe"))):void 0))};ot=i("FGYv9");var Ir={};t(Ir,"SignPlainMessage",(function(){return Or}),(function(e){return Or=e}));se=i("3ljHn"),we=i("43063"),V=i("Dohsj"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),K=i("twk6W"),ke=i("91Dw6"),ot=i("FGYv9");var br=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const kr=ee.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex: 1;
  overflow: auto;
  padding: 0px 16px;
`,Sr=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,Tr=ee.default.div`
  margin-bottom: 24px;
`,Cr=ee.default.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 24px;
  gap: 8px;
`,Ar=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Dr=ee.default.div`
  display: flex;
  justify-content: center;
  margin: 16px 0;
`,Pr=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,Rr=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Or=t=>{const{t:n}=(0,we.useTranslation)(),{data:[r]}=(0,se.useFeatureFlags)(["enable-friction-interstitial"]),{origin:o,message:i,tabId:a,networkID:s,scanWarnings:c,confirmApproval:u,denyApproval:d,scanFailed:p}=t,{formattedMessage:f,isJson:g}=dr(i),m=(0,l.useCallback)((()=>br(void 0,void 0,void 0,(function*(){var e,n,r;(null==c?void 0:c.length)&&t.advancedDetails&&t.advancedDetails.errorSignInWithSolana&&(yield K.analytics.capture("userIgnoredSignInWithMessageError",{data:{type:null===(e=t.advancedDetails.errorSignInWithSolana)||void 0===e?void 0:e.type,format:null===(n=t.advancedDetails.errorSignInWithSolana)||void 0===n?void 0:n.format,origin:o,error:null===(r=t.advancedDetails.errorSignInWithSolana)||void 0===r?void 0:r.error}})),null==u||u()}))),[c,u,o,t.advancedDetails]),h=ut(s),v=(c||[]).some((e=>e.severity===V.ScanWarningVariant.criticalAlert)),y=r&&v,w=[{text:n(u?"commandCancel":"commandClose"),onClick:d,testID:"secondary-button"}];return!y&&u&&w.push({text:n("commandConfirm"),theme:v||p?"warning":"primary",onClick:()=>u(),testID:"primary-button"}),e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(kr,null,e(l).createElement("div",null,e(l).createElement(rt,{type:"SIGN_MESSAGE",domain:(0,G.removeWebPrefixes)(o),tabId:a}),e(l).createElement(Tr,null,e(l).createElement(Ar,{color:"#999999"},n("notificationSignMessageParagraphText"))),e(l).createElement("div",null,((null==c?void 0:c.length)||p)&&e(l).createElement(Cr,null,c&&(null==c?void 0:c.length)>0&&e(l).createElement(e(l).Fragment,null,c.map(((t,n)=>e(l).createElement(be.WarningDialog,{message:t.message,variant:t.severity,key:`simulation-warning-${n}`})))),p&&e(l).createElement(be.WarningDialog,{message:n("notificationFailedToScan"),variant:1,"data-testid":"simulation-failed"})),e(l).createElement(Sr,null,e(l).createElement("div",{"data-testid":"message"},e(l).createElement(ur,{header:n("notificationMessageHeader"),message:f,isJson:g})),e(l).createElement(We,{rows:[h]})))),e(l).createElement(Dr,null,e(l).createElement(Ar,{color:"#999999"},n("notificationConfirmFooter")))),e(l).createElement(ot.Footer,null,e(l).createElement(Ee.ButtonGroup,{buttons:w}),y?e(l).createElement(Pr,null,e(l).createElement(Rr,{hoverColor:ke.DANGER_COLOR,onClick:m,color:"#777777"},n("commandConfirmUnsafe"))):void 0))};var Fr=i("8tcqI").Buffer,qr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const Nr=t=>{var n,r,o,i;const{tabId:a,url:s,requestId:c,sequenceId:u,message:d,originalMethod:g,hexChainId:m,autoConfirmStatusCode:h}=t,I=s.origin,b=(0,y.hexToCAIP2)(m),k=(0,l.useMemo)((()=>or(d)),[d]),S=(0,x.useQueryClient)(),T=(0,p.usePostOutgoingBackgroundResponse)(),C=(0,ir.usePostResponseWithAnalytics)(T,{networkID:b,sequenceId:u,origin:s.origin,originalMethod:g}),{data:A}=Z.hooks.useSelectedMultiChainAccount(),[D,P]=(0,l.useMemo)((()=>{var e;return[null!==(e=null==A?void 0:A.identifier)&&void 0!==e?e:"",(null==A?void 0:A.type)===v.AccountType.Ledger,null==A?void 0:A.addresses]}),[A]),R=(0,l.useCallback)((()=>{C({jsonrpc:"2.0",id:c,error:O.userRejectedRequest(c).error}),K.analytics.capture("messageSubmissionTransactionBlockedAndClosed",{data:{origin:I}})}),[c,I,C]),{pushDetailView:F}=(0,f.useDetailViews)(),q=(0,l.useCallback)((()=>qr(void 0,void 0,void 0,(function*(){const e=(0,Y.getVaultProxy)(),t=yield qr(void 0,void 0,void 0,(function*(){return(0,w.setLedgerTransportStateOverride)(S,w.LEDGER_WAITING_FOR_APPROVAL_STATE),e.sign(D,{chainType:E.AddressType.EVM,signingType:"message",message:Fr.from(d.substring(2),"hex").toString("utf8")}).finally((()=>(0,w.setLedgerTransportStateOverride)(S,w.LEDGER_RECONNECTING_STATE)))}));let n;switch(t.status){case"success":n={jsonrpc:"2.0",id:c,result:{approvalType:"hardware",signature:t.signature}};break;case"error":n={jsonrpc:"2.0",id:c,error:O.userRejectedRequest(c).error}}C(n)}))),[D,d,C,S,c]),N=(0,l.useCallback)((()=>qr(void 0,void 0,void 0,(function*(){P?F(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerApp:w.LedgerApp.EVM,ledgerAction:q,cancel:R}))):(K.analytics.capture("messageSubmissionTransactionConfirmation",{data:{originalMethod:g}}),C({jsonrpc:"2.0",id:c,result:{approvalType:"user"}}))}))),[P,g,F,q,R,C,c]),{data:M,isError:j,isLoading:B,isFetched:L}=Z.hooks.useScannedMessage({networkID:b,url:s.href,type:"message",params:{message:k}},{disabled:"personal_sign"===g}),{screen:H,setScreen:$,showFrictionInterstitial:_}=le({block:null==M?void 0:M.block,isLoadingSimulation:B&&!L,warnings:null==M?void 0:M.warnings}),W=(0,l.useCallback)((()=>{K.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:I,sequenceId:u}}),$("main")}),[I,u,$]);return"block"===H?e(l).createElement(Ct,{warningMessage:null!==(r=null===(n=null==M?void 0:M.block)||void 0===n?void 0:n.message)&&void 0!==r?r:"",origin:I,onConfirm:W,onClose:R}):"loading"===H?e(l).createElement(Dn,{type:"SIGN_MESSAGE",domain:(0,G.removeWebPrefixes)(I),onClose:R,tabId:a}):"friction"===H?e(l).createElement(_t,{onClose:R,onConfirm:N,onBack:()=>$("main"),origin:I,warningMessage:null===(i=null===(o=null==M?void 0:M.warnings)||void 0===o?void 0:o[0])||void 0===i?void 0:i.message}):"eth_sign"===g||"personal_sign"===g?e(l).createElement(Ir.SignPlainMessage,{denyApproval:R,autoConfirmStatusCode:h,message:k,simulationResults:(null==M?void 0:M.expectedChanges)||[],scanWarnings:(null==M?void 0:M.warnings)||[],scanFailed:j,advancedDetails:null==M?void 0:M.advancedDetails,confirmApproval:_?()=>$("friction"):N,networkID:b,origin:I,tabId:a}):e(l).createElement(lr.EthSignTypedData,{denyApproval:R,autoConfirmStatusCode:h,message:k,simulationResults:(null==M?void 0:M.expectedChanges)||[],scanWarnings:(null==M?void 0:M.warnings)||[],scanFailed:j,advancedDetails:null==M?void 0:M.advancedDetails,confirmApproval:_?()=>$("friction"):N,networkID:b,origin:I,tabId:a})};l=i("29o0l"),p=i("fxXaZ");var Mr=i("gRICw"),jr=(Z=i("gX5Te"),l=i("29o0l"),ee=i("gkfw3"),i("bhnmm"));we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),ne=i("8oN8T"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),Z=i("gX5Te"),ot=i("FGYv9");const Br=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Lr=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin: 16px 0;
`,Hr=ee.default.div`
  display: flex;
  flex-direction: column;
`,$r=ee.default.div`
  margin-bottom: 24px;
`,_r=(0,ee.default)(ot.Body)`
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
`,Wr=ee.default.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 24px;
`,Ur=({tabId:t,origin:n,confirmApproval:r,denyApproval:o,originIsBlocklisted:i})=>{const{t:a}=(0,we.useTranslation)(),{data:s}=Z.hooks.useSelectedMultiChainAccount();return e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,{enableMenu:!0}),e(l).createElement(_r,null,e(l).createElement("div",null,e(l).createElement(rt,{type:"CONNECT",domain:(0,G.removeWebPrefixes)(n),tabId:t}),e(l).createElement($r,null,e(l).createElement(Br,{color:"#999999"},a("notificationApplicationApprovalParagraphText"))),e(l).createElement(ne.FullHeightLoadingContent,{isLoading:!1},e(l).createElement(Hr,null,i&&e(l).createElement(Wr,null,e(l).createElement(be.WarningDialog,{message:a("notificationApplicationApprovalWebsiteIsUnsafeWarning"),variant:1})),e(l).createElement(We,{rows:[{label:"Account",value:e(l).createElement(xe.Text,{size:14,weight:400,lineHeight:17,color:"#999999"},null==s?void 0:s.name)}]})))),e(l).createElement(Lr,null,e(l).createElement(Br,{color:"#999999"},a("notificationApplicationApprovalConnectDisclaimer")))),e(l).createElement(ot.Footer,null,e(l).createElement(Ee.ButtonPair,{primaryText:a("notificationApplicationApprovalActionButtonConnect"),primaryTheme:i?"warning":"primary",secondaryText:a("commandCancel"),onPrimaryClicked:r,onSecondaryClicked:o})))},Vr=ee.default.div.attrs({"data-testid":"loading-wrapper"})`
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
`,zr=e(l).memo((({isLoading:t,originIsBlocklisted:n,tabId:r,origin:o,confirmApproval:i,denyApproval:a})=>{const[s,c]=e(l).useState(!1);return t?e(l).createElement(Vr,null,e(l).createElement(jr.Spinner,null)):n&&!s?e(l).createElement(Ct,{origin:o,onConfirm:()=>{c(!0)},onClose:a}):e(l).createElement(Ur,{tabId:r,origin:o,confirmApproval:i,denyApproval:a,originIsBlocklisted:n})})),Gr=e(l).memo((({tabId:t,url:n,requestId:r,allowSwitchingAccountsFor:o})=>{const i=n.origin,a=(0,p.usePostOutgoingBackgroundResponse)();let s=0;null!==r&&(s=r);const c=(0,l.useCallback)((()=>{a({jsonrpc:"2.0",id:s,error:O.userRejectedRequest(r).error})}),[r,s,a]),u=(0,l.useCallback)((()=>{a({jsonrpc:"2.0",id:s,result:null})}),[s,a]),d=(0,l.useCallback)((e=>{var t;return null===(t=e.addresses)||void 0===t?void 0:t.every((e=>e.addressType!==o))}),[o]),{isLoading:f,originIsBlocklisted:g}=Z.hooks.useOriginIsBlocklisted(i);return e(l).createElement(Mr.MenuProvider,{accountDisabler:d,disableAccountManagement:!0},e(l).createElement(zr,{isLoading:f,originIsBlocklisted:g,tabId:t,origin:i,confirmApproval:u,denyApproval:c}))}));i("8gulk");se=i("3ljHn"),E=i("7mQ3Y"),G=i("RVqnc");var Xr=i("3TM8f"),Yr=i("ljwNC"),Jr=(ee=i("gkfw3"),i("heKso")),Zr=i("gYT35"),Kr=i("iyhug"),Qr={};t(Qr,"BtcSignMessage",(function(){return ro}),(function(e){return ro=e}));v=i("4xbAj"),y=i("iOvk1"),w=i("eJxop"),E=i("7mQ3Y"),l=i("29o0l"),Y=i("5MNpG"),J=i("dXIE8"),p=i("fxXaZ"),f=i("i1NO2"),Z=i("gX5Te"),ot=i("FGYv9");var eo=i("8tcqI").Buffer,to=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const no=(0,Y.getVaultProxy)(),ro=t=>{const n=(t=>{var n,r,o;const{url:i,requestId:a,messageBytes:s,tabId:c}=t,u=i.origin,{data:d}=Z.hooks.useSelectedMultiChainAccount(),g=null!==(n=null==d?void 0:d.identifier)&&void 0!==n?n:"",{networkID:m,addressType:h}=null!==(o=null===(r=null==d?void 0:d.addresses)||void 0===r?void 0:r.find((e=>y.Chains.isBitcoinNetworkID(e.networkID))))&&void 0!==o?o:{addressType:E.AddressType.BitcoinNativeSegwit,networkID:y.NetworkIDs.Bitcoin.Mainnet},x=(null==d?void 0:d.type)===v.AccountType.Ledger,I=(0,l.useCallback)((e=>to(void 0,void 0,void 0,(function*(){const t=yield no.sign(g,{chainType:h,signingType:"message",message:e});if("error"===t.status)throw new Error(`[btc provider][${t.type}] ${t.message}`);const n=t.message;if(!n)throw new Error("[btc sign message notification] no message on vault response");return{type:"send",signature:eo.from(t.signature,"hex"),signedMessage:n}}))),[g,h]),{pushDetailView:b}=(0,f.useDetailViews)(),k=(0,p.usePostOutgoingBackgroundResponse)(),S=(0,l.useCallback)((()=>{const e=O.userRejectedRequest(a);k(e)}),[a,k]),T=(0,l.useCallback)((()=>to(void 0,void 0,void 0,(function*(){try{const e=yield I(s);k(O.result(a,e))}catch(e){const t=O.internalError(a,e.message);k(t)}}))),[I,s,a,k]),C=(0,l.useCallback)((()=>{x?b(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerApp:w.LedgerApp.Bitcoin,ledgerAction:T,cancel:S}))):k(O.result(a,{type:"signAndSend"}))}),[S,x,k,b,a,T]);return{networkID:m,message:eo.from(s).toString("utf8"),tabId:c,origin:u,requestId:a,confirmApproval:C,denyApproval:S}})(Object.assign({},t));return e(l).createElement(Ir.SignPlainMessage,Object.assign({},n))};var oo={};t(oo,"BtcSignTransaction",(function(){return lo}),(function(e){return lo=e}));v=i("4xbAj"),y=i("iOvk1"),w=i("eJxop"),E=i("7mQ3Y"),V=i("Dohsj"),G=i("RVqnc");var io=i("dG1lS"),ao=(l=i("29o0l"),Y=i("5MNpG"),J=i("dXIE8"),p=i("fxXaZ"),f=i("i1NO2"),Z=i("gX5Te"),K=i("twk6W"),ot=i("FGYv9"),i("8tcqI").Buffer),so=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const lo=t=>{var n,r,o,i,a,s,c,u;const{url:d,requestId:g,message:m,tabId:h,inputsToSign:x,finalize:I}=t,b=(0,G.removeWebPrefixes)(d.origin),k=d.origin,{data:S}=Z.hooks.useSelectedMultiChainAccount(),T=null!==(n=null==S?void 0:S.identifier)&&void 0!==n?n:"",{networkID:C,addressType:A,address:D}=null!==(o=null===(r=null==S?void 0:S.addresses)||void 0===r?void 0:r.find((e=>y.Chains.isBitcoinNetworkID(e.networkID))))&&void 0!==o?o:{addressType:E.AddressType.BitcoinNativeSegwit,networkID:y.NetworkIDs.Bitcoin.Mainnet},P=(null==S?void 0:S.type)===v.AccountType.Ledger,{pushDetailView:R}=(0,f.useDetailViews)(),F=(0,p.usePostOutgoingBackgroundResponse)(),q=(0,l.useCallback)((()=>so(void 0,void 0,void 0,(function*(){try{const e=yield(e=>so(void 0,[e],void 0,(function*({message:e,accountIdentifier:t,addressType:n,inputsToSign:r,finalize:o}){const i=yield(0,Y.getVaultProxy)().sign(t,{chainType:n,signingType:"transaction",message:ao.from(e).toString("hex"),inputsToSign:r,finalize:o});if("error"===i.status)throw new Error(`[btc provider][${i.type}] ${i.message}`);return{type:"send",signature:ao.from(i.signature,"hex")}})))({message:ao.from(m,"hex"),accountIdentifier:T,addressType:A,inputsToSign:x,finalize:I});F(O.result(g,e))}catch(e){const t=O.internalError(g,e.message);F(t)}}))),[x,T,A,I,m,g,F]),N=(0,l.useCallback)((()=>{const e=O.userRejectedRequest(g);F(e)}),[g,F]),M=(0,l.useCallback)((()=>{P?R(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerApp:w.LedgerApp.Bitcoin,ledgerAction:q,cancel:N}))):F(O.result(g,{type:"signAndSend"}))}),[q,F,g,N,P,R]),j=null==S?void 0:S.addresses.map((e=>e.address)),{isError:B,data:L,isFetched:H,isLoading:$}=Z.hooks.useScannedTransaction({networkID:y.NetworkIDs.Bitcoin.Mainnet,type:"transaction",url:d.href,userAccount:null!=D?D:"",params:{transaction:m,userAddresses:null!=j?j:[]}}),{screen:_,setScreen:W,showFrictionInterstitial:U}=le({block:null==L?void 0:L.block,isLoadingSimulation:$&&!H,warnings:null==L?void 0:L.warnings}),z=(0,l.useCallback)((()=>{K.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:k,sequenceId:t.sequenceId}}),W("main")}),[k,t.sequenceId,W]),X=(0,l.useMemo)((()=>{var t;const{inputs:n,outputs:r}=null!==(t=null==L?void 0:L.advancedDetails)&&void 0!==t?t:{};return n&&r?[{value:e(l).createElement(cn,{parsedInstructions:[...n.map(((e,t)=>({title:`Input #${t+1}`,rowItems:[{key:"address",value:((null==j?void 0:j.includes(e.address))?"You · ":"")+(0,v.formatHashMedium)(e.address),link:`https://mempool.space/address/${e.address}`},{key:"value",value:`${(0,V.satsToBTC)(e.amount)} BTC`}]}))),...r.map(((e,t)=>({title:`Output #${t+1}`,rowItems:[{key:"address",value:((null==j?void 0:j.includes(e.address))?"You · ":"")+(0,v.formatHashMedium)(e.address),link:`https://mempool.space/address/${e.address}`},{key:"value",value:`${(0,V.satsToBTC)(e.amount)} BTC`}]})))]})}]:[]}),[L,j]),Q={networkID:C,psbt:io.Psbt.fromHex(m),vb:0,inputsToSign:[],psbtChain:void 0};return"block"===_?e(l).createElement(Ct,{warningMessage:(null===(i=null==L?void 0:L.block)||void 0===i?void 0:i.message)||"",origin:k,onConfirm:z,onClose:N}):"loading"===_?e(l).createElement(Dn,{type:"APPROVE_TRANSACTION",tabId:h,domain:b,onClose:N}):"friction"===_?e(l).createElement(_t,{onClose:N,onConfirm:M,onBack:()=>W("main"),origin:k,warningMessage:null===(s=null===(a=null==L?void 0:L.warnings)||void 0===a?void 0:a[0])||void 0===s?void 0:s.message}):e(l).createElement(yt,{advancedRows:X,confirmApproval:U?()=>W("friction"):M,denyApproval:N,hasSimulationFailed:B,numTransactions:1,domain:b,simulationResults:null!==(c=null==L?void 0:L.expectedChanges)&&void 0!==c?c:[],simulationWarnings:null!==(u=null==L?void 0:L.warnings)&&void 0!==u?u:[],tabId:h,networkID:Q.networkID,isErrorNativeTokenBalance:!1,isErrorNetworkFee:!1,isLoading:!1,networkFeeRows:[],showFriction:U})};we=i("43063"),l=i("29o0l"),ee=i("gkfw3"),xe=i("27SDj");var co={};t(co,"UnsupportedNotification",(function(){return po}),(function(e){return po=e}));Se=i("9yJOd"),l=i("29o0l"),X=i("88tsI"),ee=i("gkfw3"),Ee=i("hFkH3");var uo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function po(t){var{origin:n,title:r,children:o,onClose:i}=t,a=uo(t,["origin","title","children","onClose"]);const{t:s}=(0,X.useTranslation)();return e(l).createElement(fo,Object.assign({},a),e(l).createElement(go,null,e(l).createElement(mo,null,e(l).createElement(Se.icons.XCircle,{size:36,color:"accentAlert"}),e(l).createElement(ho,null,r),e(l).createElement(vo,null,n)),e(l).createElement(yo,null,o)),e(l).createElement(wo,null,e(l).createElement(Ee.Button,{onClick:i},s("commandClose"))))}const fo=ee.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
  width: 100%;
  padding: 16px;
`,go=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,mo=ee.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,ho=ee.default.h1`
  font-size: 28px;
  font-weight: 600;
  line-height: 32px;
  letter-spacing: -2%;
  color: #fff;
`,vo=ee.default.p`
  font-size: 13px;
  line-height: 16px;
  color: #999999;
`,yo=ee.default.p`
  font-size: 16px;
  line-height: 20px;
  color: #fff;
`,wo=ee.default.div`
  display: flex;
  gap: 16px;
`,Eo=(0,ee.default)(xe.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,xo=({url:e,connectedChainId:t,messageChainId:n})=>{const{t:r}=(0,we.useTranslation)(),o=e.origin;return l.createElement(co.UnsupportedNotification,{"data-testid":"incorrect-chain_id",origin:o,title:r("notificationIncorrectEIP712ChainId"),onClose:()=>window.close()},l.createElement(Eo,null,r("notificationIncorrectEIP712ChainId")),l.createElement(Eo,{style:{marginTop:16}},r("notificationIncorrectEIP712ChainIdDescription",{messageChainId:parseInt(n,16),connectedChainId:parseInt(t,16)})))};we=i("43063"),l=i("29o0l"),ee=i("gkfw3"),xe=i("27SDj");const Io=(0,ee.default)(xe.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,bo=({hostname:e,enabledChains:t})=>{const{t:n}=(0,we.useTranslation)(),[r,o,i]="testnet"===t?[n("notificationIncorrectModeInTestnetTitle"),n("notificationIncorrectModeInTestnetDescription",{origin:e}),n("notificationIncorrectModeInTestnetProceed")]:[n("notificationIncorrectModeNotInTestnetTitle"),n("notificationIncorrectModeNotInTestnetDescription",{origin:e}),n("notificationIncorrectModeNotInTestnetProceed")];return l.createElement(co.UnsupportedNotification,{origin:e,title:r,onClose:()=>window.close(),"data-testid":"incorrect-mode"},l.createElement(Io,null,o),l.createElement(Io,{style:{marginTop:16}},i))};we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),p=i("fxXaZ"),ot=i("FGYv9");const ko=ee.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;

  > * {
    margin: 0px ${e=>e.spacing}px;
    text-align: left;
  }
`,So=ee.default.div`
  margin-bottom: 24px;
`,To=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Co=e(l).memo((({tabId:t,url:n,requestId:r})=>{const o=n.origin,i=(0,p.usePostOutgoingBackgroundResponse)();let a=0;null!==r&&(a=r);const s=(0,l.useCallback)((()=>{i({jsonrpc:"2.0",id:a,error:O.userRejectedRequest(r).error})}),[r,a,i]);return e(l).createElement(Ao,{tabId:t,origin:o,denyApproval:s})})),Ao=({tabId:t,origin:n,denyApproval:r})=>{const{t:o}=(0,we.useTranslation)();return e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,{enableMenu:!0}),e(l).createElement(ot.Body,null,e(l).createElement(rt,{type:"SIGN_MESSAGE",domain:(0,G.removeWebPrefixes)(n),tabId:t}),e(l).createElement(So,null,e(l).createElement(To,{color:"#999999"},o("notificationSignMessageParagraphText"))),e(l).createElement(Do,null,e(l).createElement(be.WarningDialog,{message:o("bottomSheetReadOnlyAccountDescription"),variant:2})),e(l).createElement(ot.BottomGroup,null,e(l).createElement(ko,{spacing:4},e(l).createElement(xe.Text,{size:14,lineHeight:17,color:"#777"},o("bottomSheetReadOnlyWarning"))))),e(l).createElement(ot.Footer,{plain:!0},e(l).createElement(Ee.Button,{onClick:()=>r(n),"data-testid":"secondary-button"},o("commandCancel"))))},Do=ee.default.div`
  margin-bottom: 12px;
`;var Po={};t(Po,"SolanaSignAllTransactions",(function(){return Wo}),(function(e){return Wo=e}));v=i("4xbAj"),y=i("iOvk1");var Ro=i("5slFC"),Oo=(w=i("eJxop"),we=i("43063"),x=i("3tdpt"),U=i("5uSEV"),V=i("Dohsj"),i("hMVEP")),Fo=(z=i("7gANb"),G=i("RVqnc"),i("85iHy")),qo=(l=i("29o0l"),Y=i("5MNpG"),J=i("dXIE8"),p=i("fxXaZ"),f=i("i1NO2"),Z=i("gX5Te"),i("goVRJ")),No=(K=i("twk6W"),{});t(No,"usePostResponseWithAnalytics",(function(){return jo}),(function(e){return jo=e}));he=i("h0VH5"),y=i("iOvk1"),a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),K=i("twk6W");var Mo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const jo=function(e,t){return(n,r)=>{const{networkID:o,sequenceId:i,origin:a}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>Mo(this,void 0,void 0,(function*(){return o&&y.Chains.isSolanaNetworkID(o)&&!s.current&&("error"in r?yield t({networkID:o,sequenceId:i,origin:a}):yield e({networkID:o,sequenceId:i,origin:a}),s.current=!0),n(r)}))),[n,o,a,i])}}((function(e){return Mo(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userApprovedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signAllTransactions"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return Mo(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userDeniedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signAllTransactions"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));var Bo={};t(Bo,"usePostResponseWithAnalytics",(function(){return Ho}),(function(e){return Ho=e}));he=i("h0VH5"),y=i("iOvk1"),a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),K=i("twk6W");var Lo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const Ho=function(e,t){return(n,r)=>{const{networkID:o,sequenceId:i,origin:a}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>Lo(this,void 0,void 0,(function*(){return o&&y.Chains.isSolanaNetworkID(o)&&!s.current&&("error"in r?yield t({networkID:o,sequenceId:i,origin:a}):yield e({networkID:o,sequenceId:i,origin:a}),s.current=!0),n(r)}))),[n,o,a,i])}}((function(e){return Lo(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userApprovedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return Lo(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userDeniedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));ot=i("FGYv9");var $o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const _o=["signAndSendAllTransactions","signAllTransactions"],Wo=t=>{var n,r,o,i,a,s;const c=t.url.origin,u=(0,G.removeWebPrefixes)(c),{t:d}=(0,we.useTranslation)(),g=(0,l.useMemo)((()=>{const e=[];for(const n of t.transactions){const t=(0,Oo.transactionStringToTransaction)(n,"bs58");e.push(t)}return e}),[t.transactions]),{owner:m,isLedgerAccount:h,ledgerSignAllTransactions:E,networkID:I}=((t,n,r,o,i)=>{const{t:a}=(0,we.useTranslation)(),s=(0,x.useQueryClient)(),{data:c}=Z.hooks.useSelectedMultiChainAccount(),[u,d,g,m]=(0,l.useMemo)((()=>{var e;const t=null===(e=null==c?void 0:c.addresses)||void 0===e?void 0:e.find((e=>y.Chains.isSolanaNetworkID(e.networkID))),n=null==t?void 0:t.address,r=t?t.networkID:void 0,o=(null==c?void 0:c.type)===v.AccountType.Ledger;return[null==c?void 0:c.identifier,null!=n?n:"",r,o]}),[c]),{connection:h}=Z.hooks.useSelectedSolanaConnection(),{pushDetailView:E,popDetailView:I}=(0,f.useDetailViews)(),b=(0,p.usePostOutgoingBackgroundResponse)(),k=(0,Bo.usePostResponseWithAnalytics)(b,{networkID:g,sequenceId:r,origin:o}),S=(0,p.usePostOutgoingBackgroundResponse)(),T=(0,No.usePostResponseWithAnalytics)(S,{networkID:g,sequenceId:r,origin:o}),C=(0,l.useCallback)((()=>$o(void 0,void 0,void 0,(function*(){const r=new(0,qo.LegacyIndexedDBProxy);if(!u||!g||!t||Array.isArray(t)&&0===t.length)throw new Error("missing accountIdentifier or chainId or transaction");const o=_o.includes(i);try{const i=(0,Y.getVaultProxy)(),l={ownerAddress:d,networkID:g,data:{signature:""},type:z.PendingTransactionType.DappInteraction,display:{summary:{topLeft:{label:a("transactionsPendingAppInteraction")}}}},c=[];for(let e=0;e<t.length;e++){const n=t[e];(0,w.setLedgerTransportStateOverride)(s,w.LEDGER_WAITING_FOR_APPROVAL_STATE),c.push(yield(0,z.signSolanaTransactionAsync)({accountIdentifier:u,feePayer:new(0,Oo.PublicKey)(d),connection:h,accountSigner:i,transaction:n,pendingTransactionInput:l,storage:r}).finally((()=>(0,w.setLedgerTransportStateOverride)(s,w.LEDGER_RECONNECTING_STATE))))}const p=c.map((t=>({signedTransaction:z.TransactionSerializationUtils.serialize(t).transaction,signature:e(Fo).encode((0,Oo.getSignatures)(t)[0]),version:"version"in t?t.version:"legacy"})));o?T(O.result(n,{type:"send",result:p})):k(O.result(n,Object.assign({type:"send"},p[0])))}catch(t){throw(0,J.isKnownLedgerActionError)(t)&&E(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerActionError,{ledgerActionError:t,onRetryClick:()=>{I()},onCancelClick:()=>{const e=O.userRejectedRequest(n);o?T(e):k(e)}}))),new Error("error signing with ledger: "+t,{cause:t})}}))),[u,g,t,i,d,a,s,h,T,n,k,E,I]);return{owner:d,isLedgerAccount:m,connection:h,ledgerSignAllTransactions:C,networkID:g}})(g,t.requestId,t.sequenceId,c,t.originalMethod),{pushDetailView:b}=(0,f.useDetailViews)(),k=(0,p.usePostOutgoingBackgroundResponse)(),S=(0,Bo.usePostResponseWithAnalytics)(k,{networkID:I,sequenceId:t.sequenceId,origin:c}),T=(0,p.usePostOutgoingBackgroundResponse)(),C=(0,No.usePostResponseWithAnalytics)(T,{networkID:I,sequenceId:t.sequenceId,origin:c}),A=(0,l.useMemo)((()=>_o.includes(t.originalMethod)?C:S),[t.originalMethod,C,S]),{connection:D}=Z.hooks.useSelectedSolanaConnection(),{data:P,isLoading:R,isError:F}=(0,z.useEstimateFeeForMessages)(D,t.transactions),{isError:q,data:N,isFetched:M,isLoading:j}=Z.hooks.useScannedTransaction({networkID:null!=I?I:y.SolanaNetworkID.Mainnet,type:"transaction",url:t.url.href,userAccount:m,params:{transactions:t.transactions,method:t.originalMethod}}),{fungible:B}=Z.hooks.useGetFungibleBalance({key:Ro.FungibleTokenType.SolanaNative}),L=(0,l.useMemo)((()=>{var e;const t=null!==(e=null==B?void 0:B.data.amount)&&void 0!==e?e:"";return!!t&&(!P||BigInt(t)>P.estimatedFee)}),[B,P]),H=(null==N?void 0:N.error)===V.SIMULATION_ERRORS.INSUFFICIENT_GAS||(null==N?void 0:N.error)===V.SIMULATION_ERRORS.INSUFFICIENT_FUNDS||!L,{screen:$,setScreen:_,showFrictionInterstitial:W}=le({block:null==N?void 0:N.block,isLoadingSimulation:j&&!M,warnings:null==N?void 0:N.warnings}),X=(0,l.useCallback)((()=>{const e=O.userRejectedRequest(t.requestId);A(e)}),[t.requestId,A]),{save:Q,isAutoConfirmIsTouched:ee,showAutoConfirmRow:te}=ae(t.url.origin),ne=(0,l.useCallback)((()=>$o(void 0,void 0,void 0,(function*(){ee&&(yield Q()),h?b(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerAction:E,cancel:X}))):A(O.result(t.requestId,{type:"signAndSend"}))}))),[ee,Q,h,b,E,X,A,t.requestId]),re=(0,l.useCallback)((()=>{K.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:c,sequenceId:t.sequenceId}}),_("main")}),[c,t.sequenceId,_]),{data:oe}=Z.hooks.usePreferredExplorers(),ie=(0,l.useCallback)((e=>{if(!oe)return"";const t=oe.explorers[null!=I?I:y.NetworkIDs.Solana.Mainnet];return(0,U.generateExplorerUrl)({endpoint:"address",explorerType:t,networkID:null!=I?I:y.NetworkIDs.Solana.Mainnet,param:e})}),[oe,I]),se=(0,l.useMemo)((()=>{var t;if(!N||!(null===(t=N.advancedDetails)||void 0===t?void 0:t.advancedRows))return[];const n=N.advancedDetails.advancedRows.map((e=>({title:e.title,rowItems:e.items.map((e=>({key:e.title,link:e.isAddress?ie(e.value):void 0,value:e.isAddress?(0,v.formatAddressValue)(e.value):e.value})))})));return 0===n.length?[]:[{value:e(l).createElement(cn,{parsedInstructions:n})}]}),[N,ie]),ce=An({origin:t.url.origin,autoConfirmStatusCode:t.autoConfirmStatusCode,networkID:I||void 0}),ue=[],de=(0,l.useMemo)((()=>(null==P?void 0:P.highFees)?d("notificationTransactionApprovalNetworkFeeHighWarning"):H?d("transactionNotEnoughNative",{nativeTokenSymbol:"SOL"}):F?d("networkFeeCouldNotFetch"):void 0),[P,d,H,F]);if(te&&ue.push(ce),"block"===$)return e(l).createElement(Ct,{warningMessage:null!==(r=null===(n=null==N?void 0:N.block)||void 0===n?void 0:n.message)&&void 0!==r?r:"",origin:t.url.origin,onConfirm:re,onClose:X});const pe={networkID:null!=I?I:y.SolanaNetworkID.Mainnet,transaction:g};return"loading"===$?e(l).createElement(Dn,{type:1===t.transactions.length?"APPROVE_TRANSACTIONS":"APPROVE_TRANSACTION",tabId:t.tabId,domain:u,onClose:X}):"friction"===$?e(l).createElement(_t,{onClose:X,onConfirm:ne,onBack:()=>_("main"),origin:t.url.origin,warningMessage:null===(i=null===(o=null==N?void 0:N.warnings)||void 0===o?void 0:o[0])||void 0===i?void 0:i.message}):e(l).createElement(yt,{advancedRows:se,confirmApproval:W?()=>_("friction"):ne,denyApproval:X,hasSimulationFailed:!!q,numTransactions:g.length,domain:u,rows:ue,simulationResults:null!==(a=null==N?void 0:N.expectedChanges)&&void 0!==a?a:[],simulationWarnings:null!==(s=null==N?void 0:N.warnings)&&void 0!==s?s:[],tabId:t.tabId,networkID:pe.networkID,showFriction:W,showConfirmAnyway:!W&&H,isErrorNativeTokenBalance:!1,isErrorNetworkFee:F,isLoading:R,networkFeeRows:[...In(d,P?`${(0,Ro.formatAmount)((0,Oo.lamportsToSolana)(null==P?void 0:P.estimatedFee))} SOL`:"",R,H?"#EB3742":"#999999",de,(null==P?void 0:P.highFees)||H||de?"#EB3742":"#999999")]})};var Uo={};t(Uo,"SolanaSignIn",(function(){return li}),(function(e){return li=e}));v=i("4xbAj"),y=i("iOvk1"),E=i("7mQ3Y"),Fo=i("85iHy"),l=i("29o0l"),Y=i("5MNpG"),J=i("dXIE8"),p=i("fxXaZ"),f=i("i1NO2"),Z=i("gX5Te");var Vo={};t(Vo,"usePostResponseWithAnalytics",(function(){return Go}),(function(e){return Go=e}));he=i("h0VH5"),y=i("iOvk1"),a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),K=i("twk6W");var zo=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const Go=function(e,t){return(n,r)=>{const{networkID:o,sequenceId:i,origin:a}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>zo(this,void 0,void 0,(function*(){return o&&y.Chains.isSolanaNetworkID(o)&&!s.current&&("error"in r?yield t({networkID:o,sequenceId:i,origin:a}):yield e({networkID:o,sequenceId:i,origin:a}),s.current=!0),n(r)}))),[n,o,a,i])}}((function(e){return zo(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userApprovedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signIn"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return zo(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userDeniedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signIn"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));ot=i("FGYv9"),we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),Ue=i("aWXnn"),xe=i("27SDj"),Ie=i("cleOt"),be=i("SkwOZ"),ot=i("FGYv9");const Xo=ee.default.div`
  margin-bottom: 24px;
`,Yo=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Jo=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin: 16px 0;
  align-items: flex-end;
`,Zo=(0,ee.default)(ot.Body)`
  display: flex;
  flex-direction: column;
  align-content: space-between;
`,Ko=t=>{const{tabId:n,origin:r,signInData:o,errorDetails:i,confirmApproval:a,denyApproval:s}=t,{t:c}=(0,we.useTranslation)(),u=i.reduce(((e,t)=>(e[t.label]=t.message,e)),{}),d=ut(t.networkID);return e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(Zo,null,e(l).createElement("div",null,e(l).createElement(rt,{type:"SIGN_IN",domain:(0,G.removeWebPrefixes)(r),tabId:n}),e(l).createElement(Xo,null,e(l).createElement(Yo,{color:"#999999"},c("notificationApplicationApprovalParagraphText"))),e(l).createElement(Ue.Column,{margin:"24px 0px 24px 0px ",justify:"center"},e(l).createElement(be.WarningDialog,{message:c("siwsVerificationErrorDescription"),variant:3})),e(l).createElement("div",{style:{display:"flex",gap:8,flexDirection:"column",marginBottom:8}},e(l).createElement(ur,{header:c("notificationMessageHeader"),message:t.message,isJson:!1}),e(l).createElement(We,{rows:[d]}),e(l).createElement(dn,{signInData:o,errorObject:u}))),e(l).createElement(Jo,null,e(l).createElement(Yo,{color:"#999999"},c("notificationApplicationApprovalSignInDisclaimer")))),e(l).createElement(ot.Footer,null,e(l).createElement(Ee.ButtonPair,{primaryText:c("commandConfirm"),secondaryText:c("commandCancel"),onPrimaryClicked:a,onSecondaryClicked:s,primaryTheme:"warning"})))};we=i("43063"),G=i("RVqnc"),l=i("29o0l"),ee=i("gkfw3"),Ee=i("hFkH3"),xe=i("27SDj"),Ie=i("cleOt"),ot=i("FGYv9");const Qo=ee.default.div`
  margin-bottom: 24px;
`,ei=(0,ee.default)(xe.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,ti=ee.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin: 16px 0;
  align-items: flex-end;
`,ni=(0,ee.default)(ot.Body)`
  display: flex;
  flex-direction: column;
  align-content: space-between;
`,ri=t=>{const{tabId:n,origin:r,signInData:o,confirmApproval:i,denyApproval:a}=t,{t:s}=(0,we.useTranslation)(),c=ut(t.networkID);return e(l).createElement(ot.Container,null,e(l).createElement(Ie.MultichainAccountHeader,null),e(l).createElement(ni,null,e(l).createElement("div",null,e(l).createElement(rt,{type:"SIGN_IN",domain:(0,G.removeWebPrefixes)(r),tabId:n}),e(l).createElement(Qo,null,e(l).createElement(ei,{color:"#999999"},s("notificationApplicationApprovalParagraphText"))),e(l).createElement("div",{style:{display:"flex",gap:8,flexDirection:"column"}},e(l).createElement(ur,{header:s("notificationMessageHeader"),message:t.message,isJson:!1}),e(l).createElement(We,{rows:[c]}),e(l).createElement(dn,{signInData:o}))),e(l).createElement(ti,null,e(l).createElement(ei,{color:"#999999"},s("notificationApplicationApprovalSignInDisclaimer")))),e(l).createElement(ot.Footer,null,e(l).createElement(Ee.ButtonPair,{primaryText:s("commandConfirm"),secondaryText:s("commandCancel"),onPrimaryClicked:i,onSecondaryClicked:a})))};var oi=i("8tcqI").Buffer,ii=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const ai=(0,Y.getVaultProxy)(),si=t=>{const{isLedger:n,networkID:r,signMessage:o}=(()=>{const{data:e}=Z.hooks.useSelectedMultiChainAccount();return(0,l.useMemo)((()=>{var t,n;const r=null!==(t=null==e?void 0:e.identifier)&&void 0!==t?t:"",o=null===(n=null==e?void 0:e.addresses)||void 0===n?void 0:n.find((e=>y.Chains.isSolanaNetworkID(e.networkID)));return{isLedger:(null==e?void 0:e.type)===v.AccountType.Ledger,networkID:null==o?void 0:o.networkID,signMessage:e=>ii(void 0,void 0,void 0,(function*(){const t=oi.from(e).toString("utf-8"),n=yield ai.sign(r,{chainType:E.AddressType.Solana,signingType:"message",message:t});if("success"===n.status)return n.signature;throw new Error(`[${n.type}] ${n.message}`)}))}}),[e])})(),{tabId:i,url:a,requestId:s,sequenceId:c,signInData:u,message:d,errorDetails:g}=t,m=a.origin,h=e(Fo).decode(d),w=(0,p.usePostOutgoingBackgroundResponse)(),x=(0,Vo.usePostResponseWithAnalytics)(w,{networkID:r,sequenceId:c,origin:m}),{pushDetailView:I}=(0,f.useDetailViews)(),b=(0,l.useCallback)((()=>{const e=O.userRejectedRequest(s);x(e)}),[s,x]),k=(0,l.useCallback)((()=>ii(void 0,void 0,void 0,(function*(){try{const e=yield o(h),t=O.result(s,{type:"send",signature:e});x(t)}catch(e){const t=O.internalError(s,e.message);x(t)}}))),[o,h,s,x]),S=(0,l.useCallback)((()=>{n?I(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerAction:k,cancel:b}))):x(O.result(s,{type:"signAndSend"}))}),[b,x,n,I,s,k]);return{tabId:i,origin:m,signInData:u,message:h.toString("utf8"),errorDetails:g,networkID:null!=r?r:y.SolanaNetworkID.Mainnet,confirmApproval:S,denyApproval:b}},li=t=>{const n=si(t);return"errorDetails"in n&&n.errorDetails?e(l).createElement(Ko,Object.assign({},n)):e(l).createElement(ri,Object.assign({},n))};var ci={};t(ci,"SolanaSignMessage",(function(){return yi}),(function(e){return yi=e}));v=i("4xbAj"),y=i("iOvk1"),E=i("7mQ3Y"),Fo=i("85iHy"),l=i("29o0l"),Y=i("5MNpG"),J=i("dXIE8"),p=i("fxXaZ"),f=i("i1NO2"),Z=i("gX5Te");var ui={};t(ui,"usePostResponseWithAnalytics",(function(){return pi}),(function(e){return pi=e}));he=i("h0VH5"),y=i("iOvk1"),a=i("cFUcx"),s=i("csW2r"),l=i("29o0l"),K=i("twk6W");var di=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const pi=function(e,t){return(n,r)=>{const{networkID:o,sequenceId:i,origin:a}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>di(this,void 0,void 0,(function*(){return y.Chains.isSolanaNetworkID(o)&&!s.current&&("error"in r?yield t({networkID:o,sequenceId:i,origin:a}):yield e({networkID:o,sequenceId:i,origin:a}),s.current=!0),n(r)}))),[n,o,a,i])}}((function(e){return di(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userApprovedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signMessage"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return di(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,a.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,a.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield he.dapp.userDeniedAction(K.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signMessage"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));ot=i("FGYv9"),l=i("29o0l");var fi=i("8tcqI").Buffer;const gi=l.memo((({tabId:e,origin:t,message:n,display:r,confirmApproval:o,denyApproval:i,networkID:a,isSimulationLoading:s,hasSimulationFailed:c,scanResult:u})=>{const d=l.useMemo((()=>"hex"===r?`0x${fi.from(n).toString("hex")}`:(new TextDecoder).decode(n)),[r,n]);return s?l.createElement(Dn,{type:"SIGN_MESSAGE",tabId:e,domain:t,onClose:i}):l.createElement(Ir.SignPlainMessage,{tabId:e,origin:t,message:d,networkID:a,confirmApproval:o,denyApproval:i,scanFailed:c,scanIsLoading:s,scanWarnings:(null==u?void 0:u.warnings)||[],advancedDetails:null==u?void 0:u.advancedDetails})}));var mi=i("8tcqI").Buffer,hi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};const vi=(0,Y.getVaultProxy)(),yi=t=>{const n=(()=>{const{data:e}=Z.hooks.useSelectedMultiChainAccount();return(0,l.useMemo)((()=>{var t,n,r;const o=null!==(t=null==e?void 0:e.identifier)&&void 0!==t?t:"",{address:i,networkID:a}=null!==(r=null===(n=null==e?void 0:e.addresses)||void 0===n?void 0:n.find((e=>y.Chains.isSolanaNetworkID(e.networkID))))&&void 0!==r?r:{address:"",networkID:y.NetworkIDs.Solana.Mainnet};return{isLedger:(null==e?void 0:e.type)===v.AccountType.Ledger,publicKey:i,networkID:a,signMessage:e=>hi(void 0,void 0,void 0,(function*(){const t=mi.from(e).toString("utf-8"),n=yield vi.sign(o,{chainType:E.AddressType.Solana,signingType:"message",message:t});if("success"===n.status)return n.signature;throw new Error(`[${n.type}] ${n.message}`)}))}}),[e])})(),r=(t=>{const{url:n,requestId:r,sequenceId:o,message:i,display:a,tabId:s,networkID:c}=t,u=n.origin,d=e(Fo).decode(i),g=(0,p.usePostOutgoingBackgroundResponse)(),m=(0,ui.usePostResponseWithAnalytics)(g,{networkID:c,sequenceId:o,origin:u}),{pushDetailView:h}=(0,f.useDetailViews)(),v=(0,l.useCallback)((()=>{const e=O.userRejectedRequest(r);m(e)}),[r,m]),w=(0,l.useCallback)((()=>hi(void 0,void 0,void 0,(function*(){try{const e=yield t.signMessage(d),n=O.result(r,{type:"send",signature:e});m(n)}catch(e){const t=O.internalError(r,e.message);m(t)}}))),[t,d,r,m]),E=(0,l.useCallback)((()=>{t.isLedger?h(e(l).createElement(ot.LedgerWrapper,null,e(l).createElement(J.LedgerAction,{ledgerAction:w,cancel:v}))):m(O.result(r,{type:"signAndSend"}))}),[v,m,t.isLedger,h,r,w]),{isError:x,data:I,isLoading:b}=Z.hooks.useScannedMessage({networkID:null!=c?c:y.SolanaNetworkID.Mainnet,type:"message",url:n.href,params:{message:mi.from(d).toString("utf8")}});return{networkID:c,tabId:s,origin:u,requestId:r,message:d,display:a,isSimulationLoading:b,hasSimulationFailed:x,scanResult:I,confirmApproval:E,denyApproval:v}})(Object.assign(Object.assign({},t),n));return e(l).createElement(gi,Object.assign({},r))};we=i("43063"),E=i("7mQ3Y"),l=i("29o0l"),ee=i("gkfw3"),kn=i("bw7Ah"),xe=i("27SDj");const wi=(0,ee.default)(xe.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,Ei=({url:e,targetAddressType:t,addressType:n})=>{const{t:r}=(0,we.useTranslation)(),o=e.origin;return l.createElement(co.UnsupportedNotification,{origin:o,title:r("notificationUnsupportedAccount"),onClose:()=>window.close()},l.createElement(wi,null,l.createElement(kn.PTrans,{t:r,i18nKey:"notificationUnsupportedAccountDescription",values:{origin:o,targetChainType:E.AddressTypes.getDisplayName(t),chainType:E.AddressTypes.getDisplayName(n)}})),l.createElement(wi,{margin:"16px 0 0 0"},r("notificationUnsupportedAccountDescription2")))};we=i("43063"),l=i("29o0l"),ee=i("gkfw3"),kn=i("bw7Ah"),xe=i("27SDj");const xi=(0,ee.default)(xe.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,Ii=({url:e})=>{const{t:t}=(0,we.useTranslation)(),n=e.origin;return l.createElement(co.UnsupportedNotification,{origin:n,title:t("unsupported_network",{defaultValue:"Unsupported network"}),onClose:()=>window.close()},l.createElement(xi,null,t("notificationUnsupportedNetworkDescription")),l.createElement(xi,{margin:"16px 0 0 0"},l.createElement(kn.PTrans,{t:t,i18nKey:"notificationUnsupportedNetworkDescriptionInterpolated"},"To proceed with a different extension, turn off",l.createElement("strong",null,"Settings → Default App Wallet, and select Always Ask"),". Then refresh the page and reconnect.")))};Z=i("gX5Te");var bi=i("cI6uH"),ki=i("feAoQ"),Si=i("4K7Du"),Ti=i("lznD3"),Ci=(K=i("twk6W"),Ze=i("gcdBN"),i("dNPkM")),Ai=i("17H3T"),Di=i("ilZfT"),Pi=i("8tcqI").Buffer;const Ri=e(l).lazy((()=>i("4DItC")));s.fileLogger.init({provider:Ai.ClientFileLoggerProvider}),s.telemetry.init({appVersion:(0,Ze.getManifestVersion)()}),s.telemetry.setUser({id:K.analytics.getDeviceId()}),(0,Ci.initializeFeatureFlags)();const Oi=({req:t,url:n,tabId:r})=>{const{method:o}=t,{data:i=[]}=Z.hooks.useAllMultiChainAccounts(),{data:[a]}=(0,se.useFeatureFlags)(["frontend-enable-session-start"]);return(0,bi.useEffectOnce)((()=>{Ti.accountAnalytics.onAppSessionStart(i)}),i.length>0&&a),(0,l.useEffect)((()=>{K.analytics.captureOptOutStatus()}),[]),(0,l.useEffect)((()=>{K.analytics.capture("notificationOpen",{data:{method:o}})}),[o]),e(l).createElement(Fi,{req:t,url:n,tabId:r})},Fi=e(l).memo((({req:t,url:n,tabId:r})=>{const{id:o}=t,i=new URL(n),s=a.user.user_confirmIncorrectMode.request.safeParse(t);if(s.success){const{params:t}=s.data;return e(l).createElement(bo,{hostname:(0,G.removeWebPrefixes)(i.origin),enabledChains:t[1]})}const c=a.user.user_confirmEIP712IncorrectChainId.request.safeParse(t);if(c.success){const{params:t}=c.data,{connectedChainId:n,messageChainId:r}=t[1];return e(l).createElement(xo,{url:i,connectedChainId:n,messageChainId:r})}const u=a.user.user_confirmUnsupportedNetwork.request.safeParse(t);if(u.success){const t=u.data.params[1];return e(l).createElement(Ii,{url:i,targetNetworkId:t})}const d=a.user.user_confirmUnsupportedAccount.request.safeParse(t);if(d.success&&"ethereum"===d.data.params[1])return e(l).createElement(Ei,{targetAddressType:E.AddressType.EVM,addressType:E.AddressType.Solana,url:i});if(d.success&&"solana"===d.data.params[1])return e(l).createElement(Ei,{targetAddressType:E.AddressType.Solana,addressType:E.AddressType.EVM,url:i});if(a.user.user_approveSolConnect.request.safeParse(t).success)return e(l).createElement(Gr,{tabId:r,url:i,requestId:o,allowSwitchingAccountsFor:E.AddressType.Solana});const p=a.user.user_approveSolSignTransaction.request.safeParse(t);if(p.success){const{params:t}=p.data,{transaction:n,sequenceId:a,autoConfirmStatusCode:s}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(Po.SolanaSignAllTransactions,{tabId:r,url:i,requestId:o,transactions:[n],autoConfirmStatusCode:s,sequenceId:a,originalMethod:"signTransaction"}))}const g=a.user.user_approveSolSignAndSendTransaction.request.safeParse(t);if(g.success){const{params:t}=g.data,{transaction:n,sequenceId:a,autoConfirmStatusCode:s}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(Po.SolanaSignAllTransactions,{tabId:r,url:i,requestId:o,transactions:[n],autoConfirmStatusCode:s,sequenceId:a,originalMethod:"signAndSendTransaction"}))}const m=a.user.user_approveSolSignAllTransactions.request.safeParse(t);if(m.success){const{params:t}=m.data,{transactions:n,sequenceId:a,autoConfirmStatusCode:s}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(Po.SolanaSignAllTransactions,{tabId:r,url:i,requestId:o,transactions:n,autoConfirmStatusCode:s,sequenceId:a,originalMethod:"signAllTransactions"}))}const v=a.user.user_approveSolSignAndSendAllTransactions.request.safeParse(t);if(v.success){const{params:t}=v.data,{transactions:n,sequenceId:a,autoConfirmStatusCode:s}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(Po.SolanaSignAllTransactions,{tabId:r,url:i,requestId:o,transactions:n,autoConfirmStatusCode:s,sequenceId:a,originalMethod:"signAndSendAllTransactions"}))}const y=a.user.user_approveSolSignMessage.request.safeParse(t);if(y.success){const{params:t}=y.data,{message:n,display:a,sequenceId:s}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(ci.SolanaSignMessage,{tabId:r,url:i,requestId:o,message:n,display:a,sequenceId:s}))}const w=a.user.user_approveSolSignIn.request.safeParse(t);if(w.success){const{params:t}=w.data,{signInData:n,message:a,errorDetails:s,sequenceId:c}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(Uo.SolanaSignIn,{tabId:r,url:i,requestId:o,signInData:n,message:a,errorDetails:s,sequenceId:c}))}if(a.user.user_approveEthRequestAccounts.request.safeParse(t).success)return e(l).createElement(Gr,{tabId:r,url:i,requestId:o,allowSwitchingAccountsFor:E.AddressType.EVM});const x=a.user.user_approveEthSendTransaction.request.safeParse(t);if(x.success){const{params:t}=x.data,{transaction:n,sequenceId:a,autoConfirmStatusCode:s}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(h.EthSendTransaction,{tabId:r,url:i,requestId:o,sequenceId:a,transaction:n,autoConfirmStatusCode:s}))}const I=a.user.user_approveEthSignMessage.request.safeParse(t);if(I.success){const{params:t}=I.data,{message:n,originalMethod:a,chainId:s,autoConfirmStatusCode:c,sequenceId:u}=t[1];return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(_n.EthSignMessage,{tabId:r,url:i,requestId:o,message:n,originalMethod:a,hexChainId:s,autoConfirmStatusCode:c,sequenceId:u}))}if(a.user.user_approveBtcRequestAccounts.request.safeParse(t).success)return e(l).createElement(Gr,{tabId:r,url:i,requestId:o,allowSwitchingAccountsFor:E.AddressType.BitcoinTaproot});const b=a.user.user_approveBtcSignPSBT.request.safeParse(t);if(b.success)return e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(oo.BtcSignTransaction,{tabId:r,url:i,requestId:o,message:Pi.from(b.data.params[1].psbt).toString("hex"),sequenceId:b.data.params[1].sequenceId,finalize:b.data.params[1].finalize,inputsToSign:b.data.params[1].inputsToSign}));const k=a.user.user_approveBtcSignMessage.request.safeParse(t);return k.success?e(l).createElement(f.DetailViewsProvider,null,e(l).createElement(Qr.BtcSignMessage,{tabId:r,url:i,requestId:o,messageBytes:k.data.params[1].message,sequenceId:k.data.params[1].sequenceId})):null})),qi=()=>{const t=(0,l.useCallback)((()=>{(0,Ze.openTabAsync)({url:"onboarding.html"}),window.close()}),[]),n=(0,p.useIncomingBackgroundRequest)(),{data:r}=Z.hooks.useSelectedMultiChainAccount(),o=null==r?void 0:r.isReadOnly;if(!n)return null;const{url:i,req:s,tabId:u}=n,{id:d,method:f}=s,g=a.user.user_selectEthWallet.method.safeParse(f).success,h=a.user.user_approveEthRequestAccounts.method.safeParse(f).success||a.user.user_approveSolConnect.method.safeParse(f).success||a.user.user_approveBtcRequestAccounts.method.safeParse(f).success,v=h?"Connection Error":"Transaction Error",y=`There was an error attempting to ${h?"connect to the application":"sign the transaction"}. Please try again.`;return e(l).createElement(e(l).Fragment,null,g?e(l).createElement(l.Suspense,{fallback:e(l).createElement(Jr.IconLoading,{color:"#AB9FF2"})},e(l).createElement(Ri,{requestId:d})):e(l).createElement(m.ExtensionLockWrapper,{openOnboarding:t},e(l).createElement(Kr.LegacyModalsProvider,null,e(l).createElement(ki.Modals,null,e(l).createElement(c.PopupAndNotificationErrorBoundary,{title:v,message:y},o&&!h?e(l).createElement(Co,{tabId:u,url:new URL(i),requestId:d}):e(l).createElement(Oi,{req:s,url:i,tabId:u}),e(l).createElement(Zr.Toaster,null))))))},Ni=()=>e(l).createElement(e(l).Fragment,null,e(l).createElement(Yr.MemoryRouter,{future:{v7_startTransition:!0}},e(l).createElement(ee.ThemeProvider,{theme:Si.theme},e(l).createElement(Di.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(l).createElement(c.PopupAndNotificationErrorBoundary,null,e(l).createElement(u.Main,null,e(l).createElement(g.QueryProvider,null,e(l).createElement(p.BackgroundConnectionProvider,null,e(l).createElement(qi,null))),e(l).createElement("div",{id:d.MODAL_ID})))))),Mi=document.getElementById("root");(0,Xr.createRoot)(Mi).render(e(l).createElement(Ni,null))}();
//# sourceMappingURL=notification.cb9be8d5.js.map
define=__define;})(window.define);