(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},i=n.parcelRequire1d24;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},n.parcelRequire1d24=i),i.register("cJ96h",(function(n,r){t(n.exports,"BackgroundConnectionProvider",(function(){return p}),(function(e){return p=e})),t(n.exports,"useIncomingBackgroundRequest",(function(){return m}),(function(e){return m=e})),t(n.exports,"usePostOutgoingBackgroundResponse",(function(){return h}),(function(e){return h=e}));var a=i("c9gT2"),o=i("4y59b"),s=i("lDSNw"),l=i("f44BS"),c=i("d1qx3"),u=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const d={isConnected:!1,lastMessage:null,postMessage:o.NOOP},g=e(s).createContext(d),p=({children:t})=>{const[n,r,i]=function(){const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null);(0,s.useEffect)((()=>{let e;return(()=>u(this,void 0,void 0,(function*(){const n=`notification/${(yield(0,c.getCurrentWindowAsync)()).id}`;e=l.browser.runtime.connect({name:n}),t(e),e.onMessage.addListener((e=>{const t=a.parse(e);!(t&&"string"==typeof t.url&&t.url&&t.req&&"string"==typeof t.req.method&&t.req.method)||r(Object.assign(Object.assign({},t),{url:(0,o.removeHashes)(t.url.toString())}))})),e.onDisconnect.addListener((()=>{t(null)}))})))(),()=>{null==e||e.disconnect()}}),[]);const i=(0,s.useCallback)((t=>{e&&e.postMessage(a.stringify(t))}),[e]);return[!!e,n,i]}();return e(s).createElement(g.Provider,{value:{isConnected:n,lastMessage:r,postMessage:i}},t)};function f(){const e=(0,s.useContext)(g);if(!e)throw new Error("Missing background connection context");return e}function m(){const{lastMessage:e}=f();return e}function h(){const e=m(),{postMessage:t}=f();return(0,s.useCallback)((n=>{if(!e)throw new Error("No request received from the background yet");if(e.req.id!==n.id)throw new Error(`Request id: ${e.req.id} does not match response id: ${n.id}`);t(n)}),[e,t])}})),i.register("axUHJ",(function(n,r){t(n.exports,"PTrans",(function(){return c}),(function(e){return c=e}));var a=i("lMzyG"),o=i("lDSNw"),s=i("kBpKb"),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const c=e(o).memo((t=>{const{children:n,i18nKey:r}=t,i=l(t,["children","i18nKey"]),{t:c}=(0,a.useTranslation)(),u=(0,o.useMemo)((()=>(r?`${c(r,Object.assign(Object.assign({},i),i.values))}`:"").replace(/<\/?[^>]+(>|$)/g,"")),[r,i,c]);return e(o).createElement(s.ErrorBoundary,{fallback:u},e(o).createElement(a.Trans,Object.assign({i18nKey:r},i),n))}))})),i.register("1Ahka",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("kfaxL")).then((()=>i("6VDxw")))})),i("5V6iE").register(JSON.parse('{"044Un":"notification.dc3d6c69.js","kfaxL":"EthSelectWallet.9c373740.js","7pN3b":"phishing.1096e7b7.js","8KxY3":"connect_hardware.9e2cd709.js","5b8g1":"SettingsConnectHardware.176435ec.js","9Dpy0":"SettingsConnectHardware.5cbd182e.css","dBWv5":"notification.c6d4701e.js","lNX29":"onboarding.125a20e0.js"}'));var o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),c=i("kBpKb"),u=i("b883z"),d=i("ibYAx"),g=i("cJ96h"),p=i("6ha3o"),f=i("5Doro"),m=i("GDiVM"),h={};t(h,"EthSendTransaction",(function(){return Pn}),(function(e){return Pn=e}));var v=i("6Tvfa"),y=i("belzv"),w=i("hsoDC"),E=i("gd9Oy"),x=i("gsllN");i("8PPME");o=i("4chX7");new WeakMap;o=i("4chX7");var I={};t(I,"result",(function(){return b})),t(I,"error",(function(){return k})),t(I,"any",(function(){return S})),t(I,"chainDisconnected",(function(){return T})),t(I,"invalidInput",(function(){return C})),t(I,"internalError",(function(){return A})),t(I,"methodNotFound",(function(){return D})),t(I,"resourceUnavailable",(function(){return N})),t(I,"transactionRejected",(function(){return P})),t(I,"unauthorized",(function(){return R})),t(I,"userRejectedRequest",(function(){return M}));o=i("4chX7");const b=(e,t)=>({jsonrpc:"2.0",id:e,result:t}),k=(e,t)=>({jsonrpc:"2.0",id:e,error:t}),S=(e,t)=>Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:e}),T=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.ChainDisconnected,message:null!=t?t:"The Provider is not connected to the requested chain."}}),C=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.InvalidInput,message:null!=t?t:"Missing or invalid parameters."}}),A=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.InternalError,message:null!=t?t:"Something went wrong."}}),D=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.MethodNotFound,message:null!=t?t:"Method does not exist."}}),N=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.ResourceUnavailable,message:null!=t?t:"Requested resource not available."}}),P=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.TransactionRejected,message:null!=t?t:"Transaction creation failed."}}),R=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.Unauthorized,message:null!=t?t:"The requested method and/or account has not been authorized by the user."}}),M=(e,t)=>({id:e,jsonrpc:"2.0",error:{code:o.RpcErrorCode.UserRejectedRequest,message:null!=t?t:"User rejected the request."}});var O=i("iPvw0"),B=i("cxfOD"),F=i("4raQz"),L=i("4y59b"),q=(l=i("lDSNw"),i("bjaYq")),j=i("5ZL0s"),z=i("hmgez"),G=(g=i("cJ96h"),p=i("6ha3o"),i("gMNJN")),_=i("h5kyv"),H=i("c1thM"),U=(l=i("lDSNw"),i("cZIbv")),W=i("9Flrm"),$=i("ll4uk"),V=(p=i("6ha3o"),G=i("gMNJN"),i("kzNlw"));const J=(0,U.default)(H.motion.div)`
  width: 100%;
  height: ${"calc(100% - 16px)"};
  margin: 0;
  background: #222;
  position: absolute;
  padding: 16px;
  padding-top: 0;
`,Z=U.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: ${e=>{var t;return null!==(t=e.settingsContainerHeight)&&void 0!==t?t:"100%"}};
`,Y=(t,n)=>{const{pushDetailView:r}=(0,p.useDetailViews)(),{isActive:a,showAutoConfirmRow:i,untilDate:o,save:s,settings:c,isAutoConfirmIsTouched:u,loading:d}=G.hooks.useAutoConfirmSettingsProps({origin:new URL(t).origin});return{open:e(l).useCallback((a=>{r(e(l).createElement(J,null,e(l).createElement(W.DappSettingsHeader,{dappUrl:t}),e(l).createElement($.FullHeightLoadingContent,{isLoading:d},e(l).createElement(Z,null,e(l).createElement(V.AutoConfirmSettingsSection,{dappUrl:t,autoConfirmStatusCode:a,networkID:n})))))}),[r,t,n,d]),isActive:a,untilDate:o,save:s,settings:c,isAutoConfirmIsTouched:u,showAutoConfirmRow:i}};var K=i("lBuGR");B=i("cxfOD"),l=i("lDSNw");function X({block:e,warnings:t,isLoadingSimulation:n}){const{data:[r]}=(0,K.useFeatureFlags)(["enable-friction-interstitial"]),a=(null==t?void 0:t.some((e=>e.severity===B.ScanWarningVariant.criticalAlert)))&&r;let i="loading";!n&&e?i="block":n||(i="main");const[o,s]=(0,l.useState)(i);return(0,l.useEffect)((()=>{s(n?"loading":e?"block":"main")}),[e,n]),{showFrictionInterstitial:!!a,initialScreen:i,screen:o,setScreen:s}}F=i("4raQz"),H=i("c1thM"),l=i("lDSNw"),U=i("cZIbv");var Q=i("9xrNA"),ee=i("aC4X3");p=i("6ha3o"),G=i("gMNJN");const te=e(Q)((e=>({transactionSpeed:F.TransactionSpeed.standard,setTransactionSpeed:t=>e({transactionSpeed:t})}))),ne="calc(100% - 15px)",re=(0,U.default)(H.motion.div)`
  width: 100%;
  height: ${ne};
  margin: 0;
  padding: 15px;
  background: #222;
  position: absolute;
`,ae=(t,n)=>{const{status:r,data:a}=G.hooks.useTransactionSpeedsToUnitCost({networkID:t,enableFallback:!0}),i=te((e=>e.transactionSpeed)),o=te((e=>e.setTransactionSpeed)),{popDetailView:s,pushDetailView:c}=(0,p.useDetailViews)();let u;return"error"!==r&&a&&i&&n&&(u=()=>{c(e(l).createElement(re,null,e(l).createElement(ee.TransactionSettings,{onSelectTransactionSpeed:o,selectedTransactionSpeed:i,networkID:t,transactionUnitAmount:n,closeModal:s,settingsContainerHeight:ne})))}),{transactionSpeed:i,openGasSettings:u}};var ie={};t(ie,"usePostResponseWithAnalytics",(function(){return le}),(function(e){return le=e}));var oe=i("9ktGj"),se=(y=i("belzv"),o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),_=i("h5kyv"),function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))});const le=function(e,t){return(n,r)=>{const{networkID:a,sequenceId:i,origin:o}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>se(this,void 0,void 0,(function*(){return y.Chains.isEVMNetworkID(a)&&!s.current&&("error"in r?yield t({networkID:a,sequenceId:i,origin:o}):yield e({networkID:a,sequenceId:i,origin:o}),s.current=!0),n(r)}))),[n,a,o,i])}}((function(e){return se(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,o.getSupportedChainDescriptor)(e.networkID.replace("eip155:",""));if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield oe.dapp.userApprovedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:"eth_sendTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return se(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,o.getSupportedChainDescriptor)(t);if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield oe.dapp.userDeniedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:"eth_sendTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));var ce=i("lMzyG"),ue=(B=i("cxfOD"),l=i("lDSNw"),U=i("cZIbv"),i("laYjG")),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),fe=i("e0omL"),me=(B=i("cxfOD"),i("jlKgL")),he=(l=i("lDSNw"),U=i("cZIbv"),i("6EObQ"));de=i("kn91D");const ve=U.default.div`
  background: #2a2a2a;
  border-radius: 16px;
  display: flex;
  flex-direction: column;
`,ye=U.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
`,we=U.default.div`
  width: ${e=>e.size}px;
  height: ${e=>e.size}px;
  overflow: hidden;
  flex: none;
`,Ee=U.default.div`
  flex: 2;
  display: flex;
  align-items: center;
  gap: 8px;
`,xe=U.default.div`
  flex-shrink: 1;
`,Ie=U.default.div`
  border-bottom: 1px solid #222222;
  border-bottom-width: 1px;
  margin: 0 -16px;
`,be=({rows:t})=>e(l).createElement(ve,null,e(l).createElement("div",null,t.map(((n,r)=>"AssetChange"===n.type?e(l).createElement(e(l).Fragment,{key:`change-row-${r}`},e(l).createElement(ke,{key:`expected-change-${r}`,change:n}),r!==t.length-1&&t.length>1&&e(l).createElement(Ie,null)):"MessageOnly"===n.type?e(l).createElement(e(l).Fragment,{key:`change-row-${r}`},e(l).createElement(Se,{key:`expected-change-${r}`,change:n}),r!==t.length-1&&t.length>1&&e(l).createElement(Ie,null)):e(l).createElement(ye,{key:`expected-change-${r}`},e(l).createElement(de.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"left",color:B.StateChangeColor.White,margin:"0 0 0 8px"},n.fallbackMessage)))))),ke=({change:t})=>{const n="native"===t.asset.type||"unknown"===t.asset.type?"fungible":t.asset.type,r=t.changeText||t.fallbackMessage,a=(0,B.getColorForStateChangeSign)(t.changeSign);return e(l).createElement(ye,null,e(l).createElement(Ee,null,t.image?e(l).createElement(we,{size:24,"data-testid":"estimated-change-image"},e(l).createElement(he.EcosystemImage,{image:{type:n,src:t.image},size:24})):e(l).createElement(me.Box,{style:{backgroundColor:t.changeSign===B.StateChangeSign.Plus?"accentSuccess":t.changeSign===B.StateChangeSign.Minus?"accentAlert":"textSecondary",size:24,flex:"none",borderRadius:12,display:"flex",justifyContent:"center",alignItems:"center"}},t.changeSign===B.StateChangeSign.Plus&&e(l).createElement(me.icons.Plus,{"data-testid":"estimated-changes-icon-receive",size:16,color:"bgWallet"}),t.changeSign===B.StateChangeSign.Minus&&e(l).createElement(me.icons.Send,{"data-testid":"estimated-changes-icon-send",size:16,color:"bgWallet"}),t.changeSign===B.StateChangeSign.Equal&&e(l).createElement(me.icons.Check,{"data-testid":"estimated-changes-icon-check",size:16,color:"bgWallet"})),e(l).createElement(de.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"left",color:B.StateChangeColor.White},t.name)),e(l).createElement(xe,null,e(l).createElement(de.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",color:a,textAlign:"right"},r)))},Se=({change:t})=>e(l).createElement(ye,null,e(l).createElement(Ee,null,t.image&&e(l).createElement(we,{size:24},e(l).createElement(he.EcosystemImage,{image:{type:"fungible",src:t.image},size:24})),!t.image&&t.changeType===B.ChangeType.approval&&e(l).createElement(me.Box,{style:{backgroundColor:"textSecondary",size:24,flex:"none",borderRadius:12,display:"flex",justifyContent:"center",alignItems:"center"}},e(l).createElement(me.icons.Check,{size:16,color:"bgWallet"})),e(l).createElement(de.Text,{size:14,weight:500,lineHeight:20,whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"left",color:B.StateChangeColor.White},t.message||t.fallbackMessage)));l=i("lDSNw"),U=i("cZIbv");var Te=i("aanFI");de=i("kn91D");const Ce=U.default.div`
  margin-right: 4px;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
`,Ae=U.default.div`
  height: 1px;
  background-color: #222222;
`,De=U.default.div`
  padding: 4px;
  display: flex;
  align-items: center;
  cursor: pointer;
`,Ne=U.default.div`
  display: flex;
  flex-direction: column;
`,Pe=U.default.div`
  background: #2a2a2a;
  border-top-left-radius: ${({isFirstRow:e})=>e?"16px":"0px"};
  border-top-right-radius: ${({isFirstRow:e})=>e?"16px":"0px"};
  border-bottom-left-radius: ${({isLastRow:e})=>e?"16px":"0px"};
  border-bottom-right-radius: ${({isLastRow:e})=>e?"16px":"0px"};
  width: 100%;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  justify-content: flex-start;
  text-align: left;
`,Re=U.default.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 8px;
  cursor: ${({onClick:e})=>e?"pointer":"auto"};
`,Me=({header:t,rows:n=[]})=>{const r=!!t,[a,i]=(0,l.useState)(!r),o=(0,l.useCallback)((()=>{i(!a)}),[a]);return e(l).createElement(e(l).Fragment,null,t&&e(l).createElement(De,{"data-testid":"toggle-table",onClick:o},e(l).createElement(Ce,null,a?e(l).createElement(Te.IconToggleDown,{fill:"#999999"}):e(l).createElement(Te.IconToggleRight,{fill:"#999999"})),e(l).createElement(de.Text,{color:"#999999",textAlign:"left",size:14,weight:600,lineHeight:17},t)),a&&e(l).createElement(Ne,null,n.map((({label:t,value:r,description:a,onClick:i},o)=>e(l).createElement(e(l).Fragment,{key:`table-row-${t}-${o}`},t?e(l).createElement(Pe,{isFirstRow:0===o,isLastRow:o===n.length-1},e(l).createElement(Re,{onClick:i},e(l).createElement(de.Text,{size:14,weight:400,lineHeight:17,color:"#ffffff"},t),r),a):r,o!==n.length-1&&n.length>1&&e(l).createElement(Ae,null))))))};ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv");var Oe=i("44I6u"),Be=(he=i("6EObQ"),i("6l2nq")),Fe=(de=i("kn91D"),G=i("gMNJN"),{});t(Fe,"useTabMeta",(function(){return He}),(function(e){return He=e}));l=i("lDSNw");var Le=i("2WUgS");l=i("lDSNw"),l=i("lDSNw");function qe(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var r,a,i=(0,l.useRef)(0),o=(r=(0,l.useRef)(!1),a=(0,l.useCallback)((function(){return r.current}),[]),(0,l.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),a),s=(0,l.useState)(n),c=s[0],u=s[1],d=(0,l.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++i.current;return c.loading||u((function(e){return(0,Le.__assign)((0,Le.__assign)({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return o()&&r===i.current&&u({value:e,loading:!1}),e}),(function(e){return o()&&r===i.current&&u({error:e,loading:!1}),e}))}),t);return[c,d]}function je(e,t){void 0===t&&(t=[]);var n=qe(e,t,{loading:!0}),r=n[0],a=n[1];return(0,l.useEffect)((function(){a()}),[a]),r}var ze=i("f44BS"),Ge=i("d1qx3"),_e=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const He=e=>{const{value:t}=je((()=>_e(void 0,void 0,void 0,(function*(){var t,n;if(void 0===e)return;const r=yield ze.browser.tabs.get(e),a=yield(0,Ge.getTabMarkupMeta)(e);return{iconUrl:null!==(t=null==a?void 0:a.iconUrl)&&void 0!==t?t:null==r?void 0:r.favIconUrl,title:null!==(n=null==a?void 0:a.title)&&void 0!==n?n:null==r?void 0:r.title}}))),[e]);return null!=t?t:{}};fe=i("e0omL");const Ue=U.default.div`
  color: ${({color:e})=>e};
  font-size: 13px;
  font-family: Inter;
  font-weight: 500;
  margin-top: 6px;
  line-height: 16px;
`,We=(0,U.default)(de.Text).attrs({size:22,weight:600,lineHeight:24,textAlign:"left"})``,$e=(0,U.default)(de.Text).attrs({size:15,color:"#999999",textAlign:"left",lineHeight:20})``,Ve=e=>{const{title:t,type:n,description:r,domain:a}=e,{t:i}=(0,ce.useTranslation)(),{originIsBlocklisted:o}=G.hooks.useOriginIsBlocklisted(e.domain);let s;s=(0,Fe.useTabMeta)("tabId"in e?e.tabId:void 0).iconUrl,"iconUrl"in e&&(s=e.iconUrl),o&&(s=void 0);let c="#999999";return o&&(c=fe.DANGER_COLOR),l.createElement(Oe.Column,{margin:"16px 0 8px 0"},l.createElement(Be.Row,null,l.createElement(he.EcosystemImage,{image:{type:"dapp",src:s},size:56}),l.createElement(Oe.Column,{margin:"0 0 0 8px"},l.createElement(We,null,t||i(function(e){switch(e){case"APPROVE_TRANSACTION":return"notificationSignatureRequestConfirmTransactionCapitalized";case"APPROVE_TRANSACTIONS":return"notificationSignatureRequestConfirmTransactionsCapitalized";case"SIGN_MESSAGE":return"dappApprovePopupSignMessage";case"CONNECT":return"notificationApplicationApprovalActionButtonConnect";case"SIGN_IN":return"notificationApplicationApprovalActionButtonSignIn"}}(n))),a&&l.createElement(Ue,{color:c},(0,L.removeWebPrefixes)(null!=a?a:"")))),r&&l.createElement(Be.Row,{margin:"8px 0 0 0"},"string"==typeof r?l.createElement($e,null,r):r))};var Je=i("j5DyG");y=i("belzv"),ce=i("lMzyG"),l=i("lDSNw"),de=i("kn91D"),U=i("cZIbv"),he=i("6EObQ"),de=i("kn91D");const Ze=U.default.div`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 16px;
`,Ye=U.default.div`
  margin-left: 16px;
`,Ke=(0,U.default)(he.EcosystemImage)`
  margin-right: 4px;
`,Xe=(0,U.default)(de.Text)`
  &:hover {
    color: #ab9ff2;
  }
`,Qe=U.default.div`
  margin-left: 8px;
`,et=t=>{const{t:n}=(0,ce.useTranslation)(),r=y.Chains.getChainName(t);let a="solana";switch(r){case"Solana":a="solana";break;case"Ethereum":a="ethereum";break;case"Polygon":a="polygon";break;case"Bitcoin":a="bitcoin"}const i=e(l).createElement(Ze,null,e(l).createElement(Ke,{image:{type:"network",preset:a},size:16}),e(l).createElement(de.Text,{size:14,weight:400,lineHeight:17,color:"#999999"},r));return{label:n("notificationTransactionApprovalNetwork"),value:i}},tt=U.default.div`
  margin-top: 24px;
  margin-bottom: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
`,nt=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 8px;
  margin-top: 16px;
`,rt=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,at=U.default.div`
  display: flex;
  justify-content: center;
  margin: 16px 0;
`,it=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,ot=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,st=(0,U.default)(Je.Body)`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
`,lt=e(l).memo((({advancedRows:t=[],confirmApproval:n,denyApproval:r,hasSimulationFailed:a,numTransactions:i,domain:o,rows:s=[],networkFeeRows:c=[],isLoading:u,isErrorNetworkFee:d,isErrorNativeTokenBalance:g,simulationResults:p,simulationWarnings:f,tabId:m,networkID:h,showFriction:v,showConfirmAnyway:y})=>{const{t:w}=(0,ce.useTranslation)(),E=et(h),x=f.length>0||d||g||a,I=f.some((e=>e.severity===B.ScanWarningVariant.criticalAlert)),b=0===p.length,k=!(a||b&&x),S=(0,l.useMemo)((()=>{const e=[{text:w(n?"commandCancel":"commandClose"),onClick:r,testID:"secondary-button"}];return v||y||!n||e.push({text:w("commandConfirm"),theme:I||a?"warning":"primary",onClick:()=>n(),disabled:u,testID:"primary-button"}),e}),[n,r,I,a,v,y,u,w]);return e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(st,null,e(l).createElement("div",null,e(l).createElement(Ve,{domain:o,type:i&&i>1?"APPROVE_TRANSACTIONS":"APPROVE_TRANSACTION",tabId:m,description:w("notificationBalanceChangesText")}),x&&e(l).createElement(tt,{"data-testid":"warning-container"},f.map(((t,n)=>e(l).createElement(pe.WarningDialog,{message:t.message,variant:t.severity,key:`simulation-warning-${n}`}))),a&&e(l).createElement(pe.WarningDialog,{message:w("notificationFailedToScan"),variant:1,"data-testid":"simulation-failed"}),g&&e(l).createElement(pe.WarningDialog,{message:w("nativeTokenBalanceErrorWarning"),variant:3}),d&&e(l).createElement(pe.WarningDialog,{message:w("gasEstimationErrorWarning"),variant:3})),e(l).createElement(nt,null,k&&e(l).createElement(be,{rows:p}),e(l).createElement(Me,{rows:[E,...c,...s]}),t.length>0&&e(l).createElement(Me,{header:w("notificationAdvancedDetailsText"),rows:[...t]}))),e(l).createElement(at,null,e(l).createElement(rt,{color:"#999999"},w("notificationConfirmFooter")))),e(l).createElement(Je.Footer,null,e(l).createElement(ue.ButtonGroup,{buttons:S}),v&&n&&e(l).createElement(it,null,e(l).createElement(ot,{hoverColor:fe.DANGER_COLOR,onClick:n,color:"#777777"},w("commandConfirmUnsafe"))),y&&n&&!v&&e(l).createElement(it,null,e(l).createElement(ot,{hoverColor:"#ab9ff2",onClick:n,color:"#777777"},w("commandConfirmAnyway")))))}));ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),Te=i("aanFI"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),_=i("h5kyv"),fe=i("e0omL"),Je=i("j5DyG");const ct=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})`
  margin-top: 16px;
  margin-bottom: 8px;
`,ut=U.default.div`
  margin-top: 16px;
`,dt=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,gt=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,pt=(0,U.default)(Je.Body)`
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
  padding: 16px 16px;
`,ft=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,mt=(0,U.default)(de.Text).attrs({size:28,weight:600,lineHeight:32,textAlign:"left",letterSpacing:"-2%"})``,ht=U.default.div`
  color: ${fe.DANGER_COLOR};
  font-size: 13px;
  font-family: Inter;
  font-weight: 500;
  line-height: 16px;
`,vt=({origin:t,onConfirm:n,onClose:r,warningMessage:a})=>{const{t:i}=(0,ce.useTranslation)();return e(l).useEffect((()=>{_.analytics.capture("blockScreenSeenByUser",{data:{warningMessage:a,url:t}})}),[t,a]),e(l).createElement(Je.Container,{"data-testid":"blocklist-connect-request"},e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(pt,null,e(l).createElement("div",null,e(l).createElement(ft,null,e(l).createElement(Te.IconShieldStop,{width:36,height:36}),e(l).createElement(mt,null,i("maliciousRequestBlockedTitle")),e(l).createElement(ht,null,(0,L.removeWebPrefixes)(t))),a&&e(l).createElement(ut,null,e(l).createElement(pe.WarningDialog,{message:a,variant:1})),e(l).createElement(ct,{color:"#FFFFFF"},i("maliciousRequestBlocked")))),e(l).createElement(Je.Footer,{plain:!0},e(l).createElement(ue.Button,{onClick:r},i("commandClose")),e(l).createElement(dt,null,e(l).createElement(gt,{hoverColor:fe.DANGER_COLOR,onClick:n,color:"#777777"},i("commandProceedAnywayUnsafe")))))};ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),Te=i("aanFI"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),fe=i("e0omL"),me=i("jlKgL"),L=i("4y59b"),l=i("lDSNw"),q=i("bjaYq"),U=i("cZIbv");var yt=i("7E6dj");fe=i("e0omL");const wt=({setRiskAcknowledged:e})=>{const{t:t}=(0,q.useTranslation)(),[n,r]=l.useState(!1);return l.useEffect((()=>{e(n)}),[n,e]),l.createElement(Et,{onClick:()=>{r((e=>!e))},"data-testid":"acknowledge--button"},l.createElement(yt.CheckboxGroup,{align:"flex-start"},l.createElement(xt,{checked:n,onChange:e=>e.stopPropagation(),color:"#222222",checkColor:fe.DANGER_COLOR}),l.createElement(It,{content:t("maliciousRequestAcknowledge")})))},Et=U.default.button`
  background-color: ${(0,L.hexToRGB)(fe.DANGER_COLOR,.1)};
  border: none;
  border-radius: 8px;
  padding: 16px;
  display: flex;
  flex-direction: row;
  width: 100%;
  cursor: pointer;
`,xt=(0,U.default)(yt.Checkbox)`
  border-width: 0;
  margin-right: 0;
  width: 16px;
  height: 16px;
  border-radius: 4px;
  margin-right: 8px;
`,It=(0,U.default)(me.Text).attrs({size:16,weight:400})`
  color: ${fe.DANGER_COLOR};
  text-align: left;
`;Je=i("j5DyG");const bt=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})`
  margin-top: 16px;
  margin-bottom: 8px;
`,kt=U.default.div`
  margin-top: 16px;
`,St=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Tt=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin-bottom: 8px;
`,Ct=(0,U.default)(Je.Body)`
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
  padding: 16px 16px;
`,At=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,Dt=(0,U.default)(Je.Footer)`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,Nt=(0,U.default)(de.Text).attrs({size:28,weight:600,lineHeight:32,textAlign:"left",letterSpacing:-.56})``,Pt=U.default.div`
  color: #999999;
  font-size: 13px;
  font-family: Inter;
  font-weight: 500;
  line-height: 16px;
`,Rt=({origin:t,onConfirm:n,onClose:r,onBack:a,warningMessage:i})=>{const[o,s]=e(l).useState(!1),{t:c}=(0,ce.useTranslation)();return e(l).createElement(Je.Container,{"data-testid":"friction-notifictaion"},e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(Ct,null,e(l).createElement("div",null,e(l).createElement(At,null,e(l).createElement(Te.IconShieldStop,{width:36,height:36}),e(l).createElement(Nt,null,c("maliciousRequestAreYouSure")),e(l).createElement(Pt,null,(0,L.removeWebPrefixes)(t))),i&&e(l).createElement(kt,null,e(l).createElement(pe.WarningDialog,{message:i,variant:1})),e(l).createElement(bt,{color:"#FFFFFF"},c("maliciousRequestFrictionDescription")))),e(l).createElement(Dt,{plain:!0},e(l).createElement(wt,{setRiskAcknowledged:s}),e(l).createElement(ue.ButtonGroup,{buttons:[{text:c("commandBack"),onClick:a},{text:c("commandClose"),onClick:r}]}),e(l).createElement(Tt,null,e(l).createElement(St,{onClick:o?n:void 0,color:o?fe.DANGER_COLOR:(0,L.hexToRGB)(fe.DANGER_COLOR,.5)},c("commandYesConfirmUnsafe")))))};ce=i("lMzyG"),l=i("lDSNw"),U=i("cZIbv"),Te=i("aanFI");var Mt=i("eWecA"),Ot=(de=i("kn91D"),fe=i("e0omL"),ce=i("lMzyG"),l=i("lDSNw"),i("aoFe8")),Bt=(U=i("cZIbv"),Te=i("aanFI"),de=i("kn91D"),i("as7Iq"));const Ft=U.default.div`
  background: #2a2a2a;
  border-radius: ${({isInTable:e})=>e?"0 0 16px 16px":"16px"};
  overflow: hidden;
  position: relative;
`,Lt=U.default.div`
  padding: 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: ${({isOverflow:e})=>e?"pointer":"auto"};
`,qt=U.default.div`
  position: relative;
  overflow-wrap: break-word;
  max-height: ${({isOpen:e})=>e?"none":"96px"};

  &:after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100%;
    width: 100%;
    background: ${({isOverflow:e})=>e?"linear-gradient(to top, #2a2a2a, transparent)":"none"};
    transition: background 200ms ease;
    display: ${({isOpen:e})=>e?"none":"block"};
  }
`,jt=U.default.div`
  padding: ${({isOpen:e,isOverflow:t})=>!t||e?"0 16px 16px 16px":"0 16px"};
`,zt=(0,U.default)(de.Text)`
  pre {
    text-align: left;
    font-size: 14px;
    font-weight: 400;
    line-height: 17px;
    color: #999999;
    white-space: pre-wrap;
  }
`,Gt=U.default.div`
  margin-right: 4px;
`,_t=U.default.div`
  display: flex;
  width: 100%;
`,Ht=U.default.div``,Ut=(0,U.default)(Te.IconCopy)`
  &:hover {
    path {
      stroke: #ffffff;
    }
  }
`,Wt=e(l).memo((({message:t,allowCopy:n,isInTable:r=!1,header:a})=>{const{t:i}=(0,ce.useTranslation)(),o=(0,l.useRef)(null),[s,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)(!1),{copied:g,copy:p}=(0,Bt.useCopyButton)(t),f=(0,l.useCallback)((()=>{p(),Ot.toast.success(i("notificationMessageCopied"),{position:"top-center"})}),[p,i]),m=(0,l.useCallback)((()=>{c(!s)}),[s]);return(0,l.useEffect)((()=>{if(o.current){const e=o.current.scrollHeight>96;d(e)}}),[t,s]),e(l).createElement(Ft,{isInTable:r},e(l).createElement(Lt,{isOverflow:u,onClick:u?m:void 0},e(l).createElement(_t,null,u&&e(l).createElement(Gt,{"data-testid":"toggle"},s?e(l).createElement(Te.IconToggleDown,null):e(l).createElement(Te.IconToggleRight,null)),e(l).createElement(de.Text,{textAlign:"left",size:14,weight:400,lineHeight:17,wordBreak:"break-word"},a)),n&&e(l).createElement(Ht,{onClick:e=>{e.stopPropagation(),f()}},e(l).createElement(Ut,{copied:g,fill:"#999999","data-testid":"copy-icon"}))),e(l).createElement(qt,{isOpen:s,isOverflow:u},e(l).createElement(jt,{isOpen:s,isOverflow:u},e(l).createElement("div",{ref:o},e(l).createElement(zt,null,e(l).createElement("pre",null,t))))))})),$t=U.default.div`
  background: #2a2a2a;
  border-radius: 16px;
`,Vt=U.default.div`
  border-radius: 16px 16px 0 0;
  padding: 12px 16px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
  background: #2a2a2a;
  color: #999999;
`,Jt=U.default.div`
  padding-top: 0px;
  padding-bottom: 12px;
  padding-left: 18px;
  padding-right: 18px;
  border-top: 1px solid #222222;

  > * {
    margin-top: 12px;
  }
`,Zt=U.default.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,Yt=U.default.a.attrs({target:"_blank",rel:"noopener noreferrer"})`
  text-decoration: none;
  cursor: pointer;
`,Kt=U.default.div`
  height: 8px;
  background-color: #222222;
`,Xt=({parsedInstructions:t})=>t.map((({title:n,rowItems:r},a)=>e(l).createElement(e(l).Fragment,null,e(l).createElement(ln,{key:`instruction-row-${a}`,title:n,rowItems:r}),a!==t.length-1&&t.length>1&&e(l).createElement(Kt,null)))),Qt=({detailName:t,detailValue:n,errorObject:r})=>{const{t:a}=(0,ce.useTranslation)(),i=void 0!==r;return e(l).createElement(nn,{style:{flexDirection:"column"}},e(l).createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},e(l).createElement(an,{size:14,lineHeight:17,wordBreak:"break-word",textAlign:"left"},a(`siwsFieldLable_${t}`)),e(l).createElement(rn,{size:14,lineHeight:17,wordBreak:"break-word",textAlign:"right",style:{width:"70%"}},"resources"===t?n.join("\n"):n)),i&&t in r&&e(l).createElement(de.Text,{color:i&&t in r?fe.ERROR_COLOR:"default",size:12.5,style:{marginTop:8,textAlign:"left"}},a(r[t])))},en=({signInData:t,errorObject:n})=>{const{t:r}=(0,ce.useTranslation)(),[a,i]=(0,l.useState)(!1),o=(0,l.useCallback)((e=>{i(!a),setTimeout((()=>{!a&&e.target.scrollIntoView({behavior:"smooth",block:"start"})}),1)}),[a]),s=void 0!==n,c=Object.entries(t).filter((([e,t])=>"statement"!==e)),u=a?c:c.filter((([e,t])=>n&&e in n));return e(l).createElement(e(l).Fragment,null,e(l).createElement(tn,{isSticky:a,onClick:o,isCollapsible:!0},e(l).createElement(on,{isExpanded:a},e(l).createElement(Te.IconToggleRight,{fill:"#999999"})),e(l).createElement(de.Text,{color:"#999999",textAlign:"left",size:14,weight:600,lineHeight:17},r("notificationAdvancedDetailsText")),s&&e(l).createElement(de.Text,{color:fe.ERROR_COLOR,textAlign:"left",size:14,weight:400,lineHeight:17},"(",r("siwsErrorNumIssues",{n:Object.keys(n).length}),")")),e(l).createElement($t,null,u.map((([t,r])=>e(l).createElement(Qt,{detailName:t,detailValue:r,errorObject:n})))))},tn=U.default.div`
  border-radius: 16px 16px 0 0;
  display: flex;
  flex-direction: row;
  gap: 4px;
  transition:
    box-shadow 0.2s ease,
    color 0.2s ease;
  scroll-margin-top: 10px;

  ${({isCollapsible:e})=>e&&"\n    cursor: pointer;\n    :hover {\n      color: #ffffff;\n    }\n  "}

  ${({isSticky:e})=>e&&"\n    box-shadow: 0px 81px 33px rgba(0, 0, 0, 0.02), 0px 46px 27px rgba(0, 0, 0, 0.08), 0px 20px 20px rgba(0, 0, 0, 0.13), 0px 5px 11px rgba(0, 0, 0, 0.15), 0px 0px 0px rgba(0, 0, 0, 0.15);\n    position: sticky;\n    top: 0;\n    z-index: 1000;\n  "}
`,nn=U.default.div`
  padding: 14px 16px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: flex-start;
  border-top: 1px solid #222222;
`,rn=(0,U.default)(de.Text)`
  flex-shrink: 1;
`,an=(0,U.default)(de.Text)`
  flex-shrink: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,on=U.default.div`
  cursor: pointer;
  transition: background-color 0.2s ease;

  :hover {
    background-color: #333333;
  }

  svg {
    color: currentColor;
    position: relative;
    fill: currentColor;
    transition: transform 0.1s ease-in-out;
    transform: ${({isExpanded:e})=>e?"rotate(90deg)":"none"};

    * {
      color: currentColor;
    }
  }
`,sn=(U.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 0px;
  gap: 8px;
`,({condition:e,wrapper:t,children:n})=>e?t(n):n),ln=({title:t,rowItems:n})=>e(l).createElement(cn,{title:t,rowItems:n}),cn=({title:t,rowItems:n,emptyDescription:r,info:a})=>e(l).createElement($t,null,!!t&&e(l).createElement(Vt,null,e(l).createElement(de.Text,{textAlign:"left",size:14,weight:500,lineHeight:17,color:"currentColor"},t),a&&e(l).createElement(Mt.Info,{info:a})),e(l).createElement(Jt,null,n.map(((t,n)=>e(l).createElement(un,{key:`${t.value||t.key}-${n}`,item:t}))),0===n.length&&e(l).createElement(Zt,null,e(l).createElement(de.Text,{"data-testid":"instruction-row-empty-description",size:14,weight:400,lineHeight:17,whiteSpace:"normal",color:"#EB3742"},r))));function un({item:t,key:n}){return e(l).createElement(Zt,{key:n},t.key&&e(l).createElement(de.Text,{size:14,lineHeight:17,color:"#777777"},t.key),t.value.length>200&&e(l).createElement(Wt,{header:t.key,message:t.value,allowCopy:!0}),t.value.length<=200&&e(l).createElement(sn,{condition:t.link,wrapper:n=>e(l).createElement(Yt,{href:t.link},n)},e(l).createElement(de.Text,{size:14,weight:500,lineHeight:20,color:t.link?"#AB9FF2":void 0,whiteSpace:t.key?"normal":"pre-line",wordBreak:"break-word",textAlign:"left"},t.value)))}Je=i("j5DyG"),l=i("lDSNw"),Te=i("aanFI");var dn=i("hjnIF");de=i("kn91D");const gn=(t,n,r,a="#999999",i,o,s)=>[{label:t("bottomSheetNetworkFeeRow"),onClick:s,value:e(l).createElement(Ze,null,e(l).createElement(de.Text,{size:14,weight:400,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word","data-testid":"transactionFee",color:a},r?e(l).createElement(dn.SkeletonLoader,{width:"75px","data-testid":"network-fee-loading",height:"8px",borderRadius:"8px",backgroundColor:"#484848"}):n),s&&e(l).createElement(Ye,null,e(l).createElement(Te.IconChevronRight,null))),description:i&&e(l).createElement(de.Text,{size:12,weight:400,lineHeight:14,color:o,textAlign:"left"},i)}],pn=(t,n)=>n?[{label:t("bottomSheetEstimatedTimeRow"),value:e(l).createElement(de.Text,{size:14,weight:400,lineHeight:17,color:"#999999"},n)}]:[];ce=i("lMzyG"),o=i("4chX7"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),Te=i("aanFI");var fn=i("axUHJ");de=i("kn91D");const mn=(0,U.default)(de.Text)`
  font-weight: 400;
  font-size: 14px;
  line-height: 17px;
  color: #999999;
  cursor: pointer;
`,hn=(0,U.default)(de.Text)`
  font-weight: 400;
  font-size: 14px;
  line-height: 17px;
  color: #ffdc62;
  cursor: pointer;
`,vn=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,whiteSpace:"normal",wordBreak:"break-word",color:"#999999"})`
  cursor: pointer;
`,yn=({origin:e,autoConfirmStatusCode:t,networkID:n})=>{const{t:r}=(0,ce.useTranslation)(),{open:a,isActive:i,untilDate:s}=Y(e,n),c=l.createElement(Ze,null,null!=t&&t!=o.AutoConfirmStatusCode.Disabled&&t!=o.AutoConfirmStatusCode.OK?l.createElement(hn,null,l.createElement(fn.PTrans,{i18nKey:"autoConfirmUnavailable"})):i(n)&&s?l.createElement(mn,null,"Until ",(0,L.formatUntil)(s).toLowerCase()):l.createElement(vn,{"data-testid":"networkName"},r("notificationAutoConfirmOff")),l.createElement(Ye,null,l.createElement(Te.IconChevronRight,null)));return{label:r("notificationAutoConfirm"),value:c,onClick:()=>{a(t)}}};l=i("lDSNw"),q=i("bjaYq"),U=i("cZIbv"),ue=i("laYjG"),dn=i("hjnIF"),ge=i("ad7JL"),Je=i("j5DyG");function wn({domain:t,type:n,onClose:r,tabId:a}){const{t:i}=(0,q.useTranslation)(),o="APPROVE_TRANSACTION"===n||"APPROVE_TRANSACTIONS"===n?i("notificationBalanceChangesText"):void 0;return e(l).createElement(Je.Container,{"data-testid":"scan-loading"},e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(Je.Body,null,e(l).createElement(xn,null,e(l).createElement(Ve,{domain:t,type:n,tabId:a,description:o||e(l).createElement(An,null,e(l).createElement(Dn,{width:270}),e(l).createElement(Dn,{width:320}))}),e(l).createElement(bn,null,e(l).createElement(En,null),e(l).createElement(En,null),e(l).createElement(En,null)))),e(l).createElement(In,null,e(l).createElement(ue.Button,{onClick:r},i("commandClose"))))}function En(){return e(l).createElement(kn,null,e(l).createElement(Sn,null,e(l).createElement(Tn,null),e(l).createElement(Cn,null)),e(l).createElement(Cn,null))}const xn=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,In=U.default.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
  padding-bottom: 24px;
  gap: 16px;
`,bn=U.default.div`
  display: flex;
  flex-direction: column;
  border-radius: 16px;
  overflow: hidden;
  gap: 1px;
`,kn=U.default.div`
  display: flex;
  flex-direction: row;
  padding: 16px;
  background: #2c2d30;
  justify-content: space-between;
`,Sn=U.default.div`
  display: flex;
  flex-direction: row;
  gap: 8px;
`,Tn=(0,U.default)(dn.SkeletonLoader)`
  width: 24px;
  height: 24px;
  border-radius: 100%;
`,Cn=(0,U.default)(dn.SkeletonLoader)`
  width: 78px;
  height: 24px;
  border-radius: 16px;
`,An=U.default.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: 8px;
`,Dn=(0,U.default)(dn.SkeletonLoader)`
  width: ${e=>e.width}px;
  height: 16px;
  background: ${e=>e.theme.skeletonLight};
  border-radius: 16px;
`;var Nn=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Pn=t=>{var n,r,a,i,o,s;const c=(0,L.removeWebPrefixes)(t.url.origin),{url:u,requestId:d,sequenceId:f}=t,m=u.origin,h=y.EVMNetworkID.parse(`eip155:${t.transaction.chainId?parseInt(t.transaction.chainId,16):void 0}`),{t:b}=(0,q.useTranslation)(),{data:k,isError:S,isFetched:T,isLoading:C}=G.hooks.useScannedTransaction({networkID:h,url:u.href,userAccount:t.transaction.from,params:{transactions:[t.transaction],method:"eth_sendTransaction"},type:"transaction"}),A=(null==k?void 0:k.error)===B.SIMULATION_ERRORS.INSUFFICIENT_GAS||(null==k?void 0:k.error)===B.SIMULATION_ERRORS.INSUFFICIENT_FUNDS,{screen:D,setScreen:N,showFrictionInterstitial:P}=X({block:null==k?void 0:k.block,isLoadingSimulation:C&&!T,warnings:null==k?void 0:k.warnings}),R=(0,g.usePostOutgoingBackgroundResponse)(),M=(0,ie.usePostResponseWithAnalytics)(R,{networkID:h,sequenceId:f,origin:m}),H=(0,l.useCallback)((()=>{M({jsonrpc:"2.0",id:d,error:I.userRejectedRequest(d).error})}),[d,M]),U=(0,l.useMemo)((()=>"string"==typeof t.transaction.gas?new(0,L.BigNumber)(t.transaction.gas,16):void 0),[t.transaction.gas]),{transactionSpeed:W,openGasSettings:$}=ae(h,U?{gasLimit:U}:void 0),V={networkID:h,unsignedTransaction:t.transaction},{networkFee:J,isLoadingNetworkFee:Z,isErrorGasEstimation:K,gasEstimation:Q,estimatedTime:ee}=((e,t,n,r)=>{const{data:a,isLoading:i,isError:o}=G.hooks.useGasEstimation({networkID:e,multichainTransaction:t,transactionSpeed:n,queryOptions:{refetchInterval:!1}}),{data:s,isLoading:l}=G.hooks.useGasEstimationPrice(e,a),c=n&&t.networkID in F.ESTIMATED_EVM_CONFIRMATION_TIMES_ABBREV?r(F.ESTIMATED_EVM_CONFIRMATION_TIMES_ABBREV[t.networkID][n]):"";return{networkFee:(0,F.useNetworkFee)({networkID:t.networkID,gasEstimation:a,gasEstimationPrice:s}),isLoadingNetworkFee:i||l,gasEstimation:a,isErrorGasEstimation:o,estimatedTime:c}})(h,V,W,b),{hasSufficientFunds:te,nativeTokenSymbol:ne,isLoading:re,isError:oe}=G.hooks.useHasSufficientFunds(h,E.AddressType.EVM,Q,void 0),{maxFeePerGas:se,maxPriorityFeePerGas:le}=(0,F.buildGasConfig)(Q||{gasLimit:new(0,L.BigNumber)(0),maxFeePerGas:new(0,L.BigNumber)(0),maxPriorityFeePerGas:new(0,L.BigNumber)(0),networkID:h}),{ledgerSignTransaction:ce,isLedgerAccount:ue}=(({transaction:e,maxFeePerGas:t="0x0",maxPriorityFeePerGas:n="0x0",postOutgoingBackgroundResponse:r,requestId:a})=>{const i=(0,x.useQueryClient)(),{data:o}=G.hooks.useSelectedMultiChainAccount(),[s,c]=(0,l.useMemo)((()=>{var e;return[null!==(e=null==o?void 0:o.identifier)&&void 0!==e?e:"",(null==o?void 0:o.type)===v.AccountType.Ledger]}),[o]);return{ledgerSignTransaction:(0,l.useCallback)((()=>Nn(void 0,void 0,void 0,(function*(){const o=(0,j.getVaultProxy)(),l=yield Nn(void 0,void 0,void 0,(function*(){return e.maxFeePerGas=t,e.maxPriorityFeePerGas=n,(0,w.setLedgerTransportStateOverride)(i,w.LEDGER_WAITING_FOR_APPROVAL_STATE),o.sign(s,{chainType:E.AddressType.EVM,signingType:"transaction",message:(0,F.serialize)(e)}).finally((()=>(0,w.setLedgerTransportStateOverride)(i,w.LEDGER_RECONNECTING_STATE)))}));let c;switch(l.status){case"success":c={jsonrpc:"2.0",id:a,result:{type:"send",maxFeePerGas:t,maxPriorityFeePerGas:n,signature:l.signature}};break;case"error":c={jsonrpc:"2.0",id:a,error:I.userRejectedRequest(a).error}}r(c)}))),[s,t,n,r,e,i,a]),isLedgerAccount:c}})({transaction:t.transaction,maxFeePerGas:se,maxPriorityFeePerGas:le,postOutgoingBackgroundResponse:M,requestId:d}),{pushDetailView:de}=(0,p.useDetailViews)(),{save:ge,isAutoConfirmIsTouched:pe,showAutoConfirmRow:fe}=Y(t.url.origin),me=(0,l.useCallback)((()=>Nn(void 0,void 0,void 0,(function*(){pe&&(yield ge()),ue?de(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerApp:w.LedgerApp.EVM,ledgerAction:ce,cancel:H}))):M({jsonrpc:"2.0",id:d,result:{type:"signAndSend",maxFeePerGas:se||"0x0",maxPriorityFeePerGas:le||"0x0"}})}))),[pe,ge,ue,de,ce,H,M,d,se,le]),he=(0,l.useCallback)((()=>{_.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:m,sequenceId:t.sequenceId}}),N("main")}),[m,t.sequenceId,N]),{data:ve}=G.hooks.usePreferredExplorers(),ye=(0,l.useCallback)((e=>{if(!ve)return"";const t=ve.explorers[null!=h?h:y.NetworkIDs.Solana.Mainnet];return(0,O.generateExplorerUrl)({endpoint:"address",explorerType:t,networkID:null!=h?h:y.NetworkIDs.Ethereum.Mainnet,param:e})}),[ve,h]),we=(0,l.useMemo)((()=>{var t;if(!k||!(null===(t=k.advancedDetails)||void 0===t?void 0:t.advancedRows))return[];const n=k.advancedDetails.advancedRows.map((e=>({title:e.title,rowItems:e.items.map((e=>({key:e.title,link:e.isAddress?ye(e.value):void 0,value:e.isAddress?(0,v.formatAddressValue)(e.value):e.value})))})));return 0===n.length?[]:[{value:e(l).createElement(Xt,{parsedInstructions:n})}]}),[k,ye]),Ee=yn({origin:t.url.origin,networkID:t.transaction.chainId?(0,y.hexToCAIP2)(t.transaction.chainId):void 0,autoConfirmStatusCode:t.autoConfirmStatusCode}),xe=[];if(fe&&xe.push(Ee),"block"===D)return e(l).createElement(vt,{warningMessage:null!==(r=null===(n=null==k?void 0:k.block)||void 0===n?void 0:n.message)&&void 0!==r?r:"",origin:m,onConfirm:he,onClose:H});const Ie={networkID:h,unsignedTransaction:t.transaction};return"loading"===D?e(l).createElement(wn,{type:"APPROVE_TRANSACTION",tabId:t.tabId,domain:c,onClose:H}):"friction"===D?e(l).createElement(Rt,{onClose:H,onConfirm:me,onBack:()=>N("main"),origin:m,warningMessage:null===(i=null===(a=null==k?void 0:k.warnings)||void 0===a?void 0:a[0])||void 0===i?void 0:i.message}):e(l).createElement(lt,{advancedRows:we,confirmApproval:P?()=>N("friction"):me,denyApproval:H,hasSimulationFailed:!!S,numTransactions:1,domain:c,rows:xe,simulationResults:null!==(o=null==k?void 0:k.expectedChanges)&&void 0!==o?o:[],simulationWarnings:null!==(s=null==k?void 0:k.warnings)&&void 0!==s?s:[],tabId:t.tabId,networkID:Ie.networkID,showFriction:P,showConfirmAnyway:!P&&A,isErrorNativeTokenBalance:oe,isErrorNetworkFee:K,isLoading:Z||re,networkFeeRows:[...gn(b,J,Z,"insufficient"===te?"#EB3742":"#999999","insufficient"===te?b("transactionNotEnoughNative",{nativeTokenSymbol:ne}):K?b("gasEstimationCouldNotFetch"):void 0,"#EB3742",$),...pn(b,ee)]})};var Rn={};t(Rn,"EthSignMessage",(function(){return Sr}),(function(e){return Sr=e}));v=i("6Tvfa"),y=i("belzv");var Mn={},On=i("6rT8n").Buffer;Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.intToUnpaddedBuffer=Mn.bigIntToUnpaddedBuffer=Mn.bigIntToHex=Mn.bufArrToArr=Mn.arrToBufArr=Mn.validateNoLeadingZeroes=Mn.baToJSON=Mn.toUtf8=Mn.short=Mn.addHexPrefix=Mn.toUnsigned=Mn.fromSigned=Mn.bufferToInt=Mn.bigIntToBuffer=Mn.bufferToBigInt=Mn.bufferToHex=Mn.toBuffer=Mn.unpadHexString=Mn.unpadArray=Mn.unpadBuffer=Mn.setLengthRight=Mn.setLengthLeft=Mn.zeros=Mn.intToBuffer=Mn.intToHex=void 0;var Bn={},Fn=i("6rT8n").Buffer;Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.assertIsString=Bn.assertIsArray=Bn.assertIsBuffer=Bn.assertIsHexString=void 0;var Ln={},qn=i("6rT8n").Buffer;function jn(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.isHexString=Ln.getKeys=Ln.fromAscii=Ln.fromUtf8=Ln.toAscii=Ln.arrayContainsArray=Ln.getBinarySize=Ln.padToEven=Ln.stripHexPrefix=Ln.isHexPrefixed=void 0,Ln.isHexPrefixed=jn;function zn(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}Ln.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return jn(e)?e.slice(2):e},Ln.padToEven=zn,Ln.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return qn.byteLength(e,"utf8")},Ln.arrayContainsArray=function(e,t,n){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===n?"some":"every"]((t=>e.indexOf(t)>=0))},Ln.toAscii=function(e){let t="",n=0;const r=e.length;for("0x"===e.substring(0,2)&&(n=2);n<r;n+=2){const r=parseInt(e.substr(n,2),16);t+=String.fromCharCode(r)}return t},Ln.fromUtf8=function(e){return`0x${zn(qn.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},Ln.fromAscii=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n).toString(16);t+=r.length<2?`0${r}`:r}return`0x${t}`},Ln.getKeys=function(e,t,n){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const r=[];for(let a=0;a<e.length;a++){let i=e[a][t];if(!0!==n||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";r.push(i)}return r},Ln.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)};Bn.assertIsHexString=function(e){if(!(0,Ln.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};Bn.assertIsBuffer=function(e){if(!Fn.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};Bn.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};Bn.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}};Mn.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};Mn.intToBuffer=function(e){const t=(0,Mn.intToHex)(e);return On.from((0,Ln.padToEven)(t.slice(2)),"hex")};Mn.zeros=function(e){return On.allocUnsafe(e).fill(0)};const Gn=function(e,t,n){const r=(0,Mn.zeros)(t);return n?e.length<t?(e.copy(r),r):e.slice(0,t):e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)};Mn.setLengthLeft=function(e,t){return(0,Bn.assertIsBuffer)(e),Gn(e,t,!1)};Mn.setLengthRight=function(e,t){return(0,Bn.assertIsBuffer)(e),Gn(e,t,!0)};const _n=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};Mn.unpadBuffer=function(e){return(0,Bn.assertIsBuffer)(e),_n(e)};Mn.unpadArray=function(e){return(0,Bn.assertIsArray)(e),_n(e)};Mn.unpadHexString=function(e){return(0,Bn.assertIsHexString)(e),e=(0,Ln.stripHexPrefix)(e),"0x"+_n(e)};Mn.toBuffer=function(e){if(null==e)return On.allocUnsafe(0);if(On.isBuffer(e))return On.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return On.from(e);if("string"==typeof e){if(!(0,Ln.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return On.from((0,Ln.padToEven)((0,Ln.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,Mn.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t="0"+t),On.from(t,"hex")}if(e.toArray)return On.from(e.toArray());if(e.toBuffer)return On.from(e.toBuffer());throw new Error("invalid type")};function Hn(e){const t=(0,Mn.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function Un(e){return(0,Mn.toBuffer)("0x"+e.toString(16))}Mn.bufferToHex=function(e){return"0x"+(e=(0,Mn.toBuffer)(e)).toString("hex")},Mn.bufferToBigInt=Hn,Mn.bigIntToBuffer=Un;Mn.bufferToInt=function(e){const t=Number(Hn(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};Mn.fromSigned=function(e){return BigInt.asIntN(256,Hn(e))};Mn.toUnsigned=function(e){return Un(BigInt.asUintN(256,e))};Mn.addHexPrefix=function(e){return"string"!=typeof e||(0,Ln.isHexPrefixed)(e)?e:"0x"+e},Mn.short=function(e,t=50){const n=On.isBuffer(e)?e.toString("hex"):e;return n.length<=t?n:n.slice(0,t)+"…"};Mn.toUtf8=function(e){if((e=(0,Ln.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return On.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};Mn.baToJSON=function(e){if(On.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,Mn.baToJSON)(e[n]));return t}};Mn.validateNoLeadingZeroes=function(e){for(const[t,n]of Object.entries(e))if(void 0!==n&&n.length>0&&0===n[0])throw new Error(`${t} cannot have leading zeroes, received: ${n.toString("hex")}`)},Mn.arrToBufArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):On.from(t)},Mn.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};Mn.bigIntToHex=e=>"0x"+e.toString(16),Mn.bigIntToUnpaddedBuffer=function(e){return(0,Mn.unpadBuffer)(Un(e))},Mn.intToUnpaddedBuffer=function(e){return(0,Mn.unpadBuffer)((0,Mn.intToBuffer)(e))};var Wn=i("6rT8n").Buffer;const $n=/^[0-9A-Fa-f]+$/gu;const Vn=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`,Jn=e=>{const t=Wn.from(e.substring(2),"hex");let n;if("hex"===(32===t.length?"hex":"utf8"))n=function(e){try{const t=(0,Ln.stripHexPrefix)(e);if(t.match($n))return Vn(t)}catch(t){return(0,Mn.bufferToHex)(Wn.from(e,"utf8"))}return(0,Mn.bufferToHex)(Wn.from(e,"utf8"))}(e);else n=t.toString("utf8");return n};w=i("hsoDC"),E=i("gd9Oy"),x=i("gsllN"),L=i("4y59b"),l=i("lDSNw"),j=i("5ZL0s"),z=i("hmgez"),g=i("cJ96h"),p=i("6ha3o"),G=i("gMNJN"),_=i("h5kyv");var Zn={};t(Zn,"usePostResponseWithAnalytics",(function(){return Kn}),(function(e){return Kn=e}));oe=i("9ktGj"),y=i("belzv"),o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),_=i("h5kyv");var Yn=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Kn=function(e,t){return(n,r)=>{const{networkID:a,sequenceId:i,origin:o,originalMethod:s}=r,c=(0,l.useRef)(!1);return(0,l.useCallback)((r=>Yn(this,void 0,void 0,(function*(){if(y.Chains.isEVMNetworkID(a)&&!c.current){const n=s;"error"in r?yield t({networkID:a,sequenceId:i,origin:o,method:n}):yield e({networkID:a,sequenceId:i,origin:o,method:n}),c.current=!0}return n(r)}))),[n,a,o,i,s])}}((function(e){return Yn(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,o.getSupportedChainDescriptor)(e.networkID.replace("eip155:",""));if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield oe.dapp.userApprovedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:e.method}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return Yn(this,void 0,void 0,(function*(){try{const t=e.networkID.replace("eip155:",""),n=(0,o.getSupportedChainDescriptor)(t);if("eip155"!==(null==n?void 0:n.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Ethereum Network ID "${t}"`);return yield oe.dapp.userDeniedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},n),{origin:e.origin,method:e.method}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));var Xn={};t(Xn,"EthSignTypedData",(function(){return dr}),(function(e){return dr=e}));K=i("lBuGR"),ce=i("lMzyG"),B=i("cxfOD"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),fe=i("e0omL"),Je=i("j5DyG"),v=i("6Tvfa"),ce=i("lMzyG"),O=i("iPvw0"),l=i("lDSNw"),Te=i("aanFI");const Qn=(t,n)=>{const{t:r}=(0,ce.useTranslation)(),a=(0,l.useCallback)((()=>{if(t){const e=(0,O.generateExplorerUrl)({networkID:n,endpoint:"address",param:t});window.open(e)}}),[t,n]),i=e(l).createElement(Ze,null,e(l).createElement(Xe,{size:14,weight:400,lineHeight:17,color:"#ab9ff2",onClick:a},(0,v.formatHashMedium)(null!=t?t:"",4)),e(l).createElement(Qe,null,e(l).createElement(Te.IconLink,{fill:"#999999"})));return t?{label:r("notificationContractAddress"),value:i}:{label:"",value:null}};const er=e(l=i("lDSNw")).memo((({message:t,isJson:n,isInTable:r=!1,header:a})=>e(l).createElement(Wt,{header:a,message:t,allowCopy:n,isInTable:r}))),tr=e=>{let t=e,n=!1;try{const r=JSON.parse(e);t=JSON.stringify(r,null,2),n=!0}catch(e){}return{formattedMessage:t,isJson:n}};var nr=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const rr=U.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex: 1;
  overflow: auto;
  padding: 0px 16px;
`,ar=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,ir=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 24px;
`,or=U.default.div`
  display: flex;
  justify-content: center;
  margin: 16px 0;
`,sr=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,lr=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,cr=U.default.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 24px;
  gap: 8px;
`,ur=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,dr=t=>{const{t:n}=(0,ce.useTranslation)(),{data:[r]}=(0,K.useFeatureFlags)(["enable-friction-interstitial"]),{origin:a,message:i,originalMethod:o,advancedDetails:s,tabId:c,networkID:u,autoConfirmStatusCode:d,simulationResults:g,scanWarnings:p,scanFailed:f,confirmApproval:m,denyApproval:h}=t,{formattedMessage:v,isJson:y}=tr(i),w=et(u),E=Qn(null==s?void 0:s.contractAddress,u),{save:x,isAutoConfirmIsTouched:I,showAutoConfirmRow:b}=Y(a),k=yn({origin:a,autoConfirmStatusCode:d,networkID:u}),S=["eth_signTypedData_v3","eth_signTypedData_v4"].includes(null!=o?o:""),T=[];E.value&&T.push(E);const C=!!g&&(null==g?void 0:g.length)>0;C&&T.push({value:e(l).createElement(er,{header:n("notificationMessageHeader"),message:v,isJson:y,isInTable:!0})});const A=()=>nr(void 0,void 0,void 0,(function*(){I&&(yield x()),null==m||m()})),D=(p||[]).some((e=>e.severity===B.ScanWarningVariant.criticalAlert)),N=r&&D,P=[{text:n("commandCancel"),onClick:h,testID:"secondary-button"}];return N||P.push({text:n("commandConfirm"),theme:D?"warning":"primary",onClick:A,testID:"primary-button"}),e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(rr,null,e(l).createElement("div",null,e(l).createElement(Ve,{type:"SIGN_MESSAGE",domain:(0,L.removeWebPrefixes)(a),tabId:c}),e(l).createElement(ir,null,C?e(l).createElement(e(l).Fragment,null,e(l).createElement(ur,{color:"#999999"},n("notificationPermissionRequestText")),e(l).createElement(ur,{color:"#999999"},n("notificationBalanceChangesText"))):e(l).createElement(ur,{color:"#999999"},n("notificationBalanceChangesText"))),e(l).createElement("div",null,((null==p?void 0:p.length)||f)&&e(l).createElement(cr,null,p&&(null==p?void 0:p.length)>0&&e(l).createElement(e(l).Fragment,null,p.map(((t,n)=>e(l).createElement(pe.WarningDialog,{message:t.message,variant:t.severity,key:`simulation-warning-${n}`})))),f&&e(l).createElement(pe.WarningDialog,{message:n("notificationFailedToScan"),variant:1,"data-testid":"simulation-failed"})),e(l).createElement(ar,null,e(l).createElement("div",{"data-testid":"message"},C?g?e(l).createElement(be,{rows:g}):null:e(l).createElement(er,{header:n("notificationMessageHeader"),message:v,isJson:y})),e(l).createElement(Me,{rows:[w,...b&&S?[k]:[]]}),T.length>0&&e(l).createElement(Me,{rows:T,header:n("notificationAdvancedDetailsText")})))),e(l).createElement(or,null,e(l).createElement(ur,{color:"#999999"},n("notificationConfirmFooter")))),e(l).createElement(Je.Footer,{plain:!0},e(l).createElement(ue.ButtonGroup,{buttons:P}),N?e(l).createElement(sr,null,e(l).createElement(lr,{hoverColor:fe.DANGER_COLOR,onClick:A,color:"#777777"},n("commandConfirmUnsafe"))):void 0))};Je=i("j5DyG");var gr={};t(gr,"SignPlainMessage",(function(){return Ir}),(function(e){return Ir=e}));K=i("lBuGR"),ce=i("lMzyG"),B=i("cxfOD"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),_=i("h5kyv"),fe=i("e0omL"),Je=i("j5DyG");var pr=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const fr=U.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex: 1;
  overflow: auto;
  padding: 0px 16px;
`,mr=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,hr=U.default.div`
  margin-bottom: 24px;
`,vr=U.default.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 24px;
  gap: 8px;
`,yr=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,wr=U.default.div`
  display: flex;
  justify-content: center;
  margin: 16px 0;
`,Er=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  padding: 16px 0 8px;
`,xr=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Ir=t=>{const{t:n}=(0,ce.useTranslation)(),{data:[r]}=(0,K.useFeatureFlags)(["enable-friction-interstitial"]),{origin:a,message:i,tabId:o,networkID:s,scanWarnings:c,confirmApproval:u,denyApproval:d,scanFailed:g}=t,{formattedMessage:p,isJson:f}=tr(i),m=(0,l.useCallback)((()=>pr(void 0,void 0,void 0,(function*(){var e,n,r;(null==c?void 0:c.length)&&t.advancedDetails&&t.advancedDetails.errorSignInWithSolana&&(yield _.analytics.capture("userIgnoredSignInWithMessageError",{data:{type:null===(e=t.advancedDetails.errorSignInWithSolana)||void 0===e?void 0:e.type,format:null===(n=t.advancedDetails.errorSignInWithSolana)||void 0===n?void 0:n.format,origin:a,error:null===(r=t.advancedDetails.errorSignInWithSolana)||void 0===r?void 0:r.error}})),null==u||u()}))),[c,u,a,t.advancedDetails]),h=et(s),v=(c||[]).some((e=>e.severity===B.ScanWarningVariant.criticalAlert)),y=r&&v,w=[{text:n(u?"commandCancel":"commandClose"),onClick:d,testID:"secondary-button"}];return!y&&u&&w.push({text:n("commandConfirm"),theme:v||g?"warning":"primary",onClick:()=>u(),testID:"primary-button"}),e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(fr,null,e(l).createElement("div",null,e(l).createElement(Ve,{type:"SIGN_MESSAGE",domain:(0,L.removeWebPrefixes)(a),tabId:o}),e(l).createElement(hr,null,e(l).createElement(yr,{color:"#999999"},n("notificationSignMessageParagraphText"))),e(l).createElement("div",null,((null==c?void 0:c.length)||g)&&e(l).createElement(vr,null,c&&(null==c?void 0:c.length)>0&&e(l).createElement(e(l).Fragment,null,c.map(((t,n)=>e(l).createElement(pe.WarningDialog,{message:t.message,variant:t.severity,key:`simulation-warning-${n}`})))),g&&e(l).createElement(pe.WarningDialog,{message:n("notificationFailedToScan"),variant:1,"data-testid":"simulation-failed"})),e(l).createElement(mr,null,e(l).createElement("div",{"data-testid":"message"},e(l).createElement(er,{header:n("notificationMessageHeader"),message:p,isJson:f})),e(l).createElement(Me,{rows:[h]})))),e(l).createElement(wr,null,e(l).createElement(yr,{color:"#999999"},n("notificationConfirmFooter")))),e(l).createElement(Je.Footer,null,e(l).createElement(ue.ButtonGroup,{buttons:w}),y?e(l).createElement(Er,null,e(l).createElement(xr,{hoverColor:fe.DANGER_COLOR,onClick:m,color:"#777777"},n("commandConfirmUnsafe"))):void 0))};var br=i("6rT8n").Buffer,kr=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Sr=t=>{var n,r,a,i;const{tabId:o,url:s,requestId:c,sequenceId:u,message:d,originalMethod:f,hexChainId:m,autoConfirmStatusCode:h}=t,b=s.origin,k=(0,y.hexToCAIP2)(m),S=(0,l.useMemo)((()=>Jn(d)),[d]),T=(0,x.useQueryClient)(),C=(0,g.usePostOutgoingBackgroundResponse)(),A=(0,Zn.usePostResponseWithAnalytics)(C,{networkID:k,sequenceId:u,origin:s.origin,originalMethod:f}),{data:D}=G.hooks.useSelectedMultiChainAccount(),[N,P]=(0,l.useMemo)((()=>{var e;return[null!==(e=null==D?void 0:D.identifier)&&void 0!==e?e:"",(null==D?void 0:D.type)===v.AccountType.Ledger,null==D?void 0:D.addresses]}),[D]),R=(0,l.useCallback)((()=>{A({jsonrpc:"2.0",id:c,error:I.userRejectedRequest(c).error}),_.analytics.capture("messageSubmissionTransactionBlockedAndClosed",{data:{origin:b}})}),[c,b,A]),{pushDetailView:M}=(0,p.useDetailViews)(),O=(0,l.useCallback)((()=>kr(void 0,void 0,void 0,(function*(){const e=(0,j.getVaultProxy)(),t=yield kr(void 0,void 0,void 0,(function*(){return(0,w.setLedgerTransportStateOverride)(T,w.LEDGER_WAITING_FOR_APPROVAL_STATE),e.sign(N,{chainType:E.AddressType.EVM,signingType:"message",message:br.from(d.substring(2),"hex").toString("utf8")}).finally((()=>(0,w.setLedgerTransportStateOverride)(T,w.LEDGER_RECONNECTING_STATE)))}));let n;switch(t.status){case"success":n={jsonrpc:"2.0",id:c,result:{approvalType:"hardware",signature:t.signature}};break;case"error":n={jsonrpc:"2.0",id:c,error:I.userRejectedRequest(c).error}}A(n)}))),[N,d,A,T,c]),B=(0,l.useCallback)((()=>kr(void 0,void 0,void 0,(function*(){P?M(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerApp:w.LedgerApp.EVM,ledgerAction:O,cancel:R}))):(_.analytics.capture("messageSubmissionTransactionConfirmation",{data:{originalMethod:f}}),A({jsonrpc:"2.0",id:c,result:{approvalType:"user"}}))}))),[P,f,M,O,R,A,c]),{data:F,isError:q,isLoading:H,isFetched:U}=G.hooks.useScannedMessage({networkID:k,url:s.href,type:"message",params:{message:S}},{disabled:"personal_sign"===f}),{screen:W,setScreen:$,showFrictionInterstitial:V}=X({block:null==F?void 0:F.block,isLoadingSimulation:H&&!U,warnings:null==F?void 0:F.warnings}),J=(0,l.useCallback)((()=>{_.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:b,sequenceId:u}}),$("main")}),[b,u,$]);return"block"===W?e(l).createElement(vt,{warningMessage:null!==(r=null===(n=null==F?void 0:F.block)||void 0===n?void 0:n.message)&&void 0!==r?r:"",origin:b,onConfirm:J,onClose:R}):"loading"===W?e(l).createElement(wn,{type:"SIGN_MESSAGE",domain:(0,L.removeWebPrefixes)(b),onClose:R,tabId:o}):"friction"===W?e(l).createElement(Rt,{onClose:R,onConfirm:B,onBack:()=>$("main"),origin:b,warningMessage:null===(i=null===(a=null==F?void 0:F.warnings)||void 0===a?void 0:a[0])||void 0===i?void 0:i.message}):"eth_sign"===f||"personal_sign"===f?e(l).createElement(gr.SignPlainMessage,{denyApproval:R,autoConfirmStatusCode:h,message:S,simulationResults:(null==F?void 0:F.expectedChanges)||[],scanWarnings:(null==F?void 0:F.warnings)||[],scanFailed:q,advancedDetails:null==F?void 0:F.advancedDetails,confirmApproval:V?()=>$("friction"):B,networkID:k,origin:b,tabId:o}):e(l).createElement(Xn.EthSignTypedData,{denyApproval:R,autoConfirmStatusCode:h,message:S,simulationResults:(null==F?void 0:F.expectedChanges)||[],scanWarnings:(null==F?void 0:F.warnings)||[],scanFailed:q,advancedDetails:null==F?void 0:F.advancedDetails,confirmApproval:V?()=>$("friction"):B,networkID:k,origin:b,tabId:o})};l=i("lDSNw"),g=i("cJ96h");var Tr=i("eQcMe"),Cr=(G=i("gMNJN"),l=i("lDSNw"),U=i("cZIbv"),i("02iAW"));ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),$=i("ll4uk"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),G=i("gMNJN"),Je=i("j5DyG");const Ar=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Dr=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin: 16px 0;
`,Nr=U.default.div`
  display: flex;
  flex-direction: column;
`,Pr=U.default.div`
  margin-bottom: 24px;
`,Rr=(0,U.default)(Je.Body)`
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
`,Mr=U.default.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 24px;
`,Or=({tabId:t,origin:n,confirmApproval:r,denyApproval:a,originIsBlocklisted:i})=>{const{t:o}=(0,ce.useTranslation)(),{data:s}=G.hooks.useSelectedMultiChainAccount();return e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,{enableMenu:!0}),e(l).createElement(Rr,null,e(l).createElement("div",null,e(l).createElement(Ve,{type:"CONNECT",domain:(0,L.removeWebPrefixes)(n),tabId:t}),e(l).createElement(Pr,null,e(l).createElement(Ar,{color:"#999999"},o("notificationApplicationApprovalParagraphText"))),e(l).createElement($.FullHeightLoadingContent,{isLoading:!1},e(l).createElement(Nr,null,i&&e(l).createElement(Mr,null,e(l).createElement(pe.WarningDialog,{message:o("notificationApplicationApprovalWebsiteIsUnsafeWarning"),variant:1})),e(l).createElement(Me,{rows:[{label:"Account",value:e(l).createElement(de.Text,{size:14,weight:400,lineHeight:17,color:"#999999"},null==s?void 0:s.name)}]})))),e(l).createElement(Dr,null,e(l).createElement(Ar,{color:"#999999"},o("notificationApplicationApprovalConnectDisclaimer")))),e(l).createElement(Je.Footer,null,e(l).createElement(ue.ButtonPair,{primaryText:o("notificationApplicationApprovalActionButtonConnect"),primaryTheme:i?"warning":"primary",secondaryText:o("commandCancel"),onPrimaryClicked:r,onSecondaryClicked:a})))},Br=U.default.div.attrs({"data-testid":"loading-wrapper"})`
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
`,Fr=e(l).memo((({isLoading:t,originIsBlocklisted:n,tabId:r,origin:a,confirmApproval:i,denyApproval:o})=>{const[s,c]=e(l).useState(!1);return t?e(l).createElement(Br,null,e(l).createElement(Cr.Spinner,null)):n&&!s?e(l).createElement(vt,{origin:a,onConfirm:()=>{c(!0)},onClose:o}):e(l).createElement(Or,{tabId:r,origin:a,confirmApproval:i,denyApproval:o,originIsBlocklisted:n})})),Lr=e(l).memo((({tabId:t,url:n,requestId:r,allowSwitchingAccountsFor:a})=>{const i=n.origin,o=(0,g.usePostOutgoingBackgroundResponse)();let s=0;null!==r&&(s=r);const c=(0,l.useCallback)((()=>{o({jsonrpc:"2.0",id:s,error:I.userRejectedRequest(r).error})}),[r,s,o]),u=(0,l.useCallback)((()=>{o({jsonrpc:"2.0",id:s,result:null})}),[s,o]),d=(0,l.useCallback)((e=>{var t;return null===(t=e.addresses)||void 0===t?void 0:t.every((e=>e.addressType!==a))}),[a]),{isLoading:p,originIsBlocklisted:f}=G.hooks.useOriginIsBlocklisted(i);return e(l).createElement(Tr.MenuProvider,{accountDisabler:d,disableAccountManagement:!0},e(l).createElement(Fr,{isLoading:p,originIsBlocklisted:f,tabId:t,origin:i,confirmApproval:u,denyApproval:c}))}));i("1KK14");K=i("lBuGR"),E=i("gd9Oy"),L=i("4y59b");var qr=i("dU2RF"),jr=i("aJuCi"),zr=(U=i("cZIbv"),i("9J813")),Gr=i("8WrfF"),_r=i("6AorB"),Hr={};t(Hr,"BtcSignMessage",(function(){return Vr}),(function(e){return Vr=e}));v=i("6Tvfa"),y=i("belzv"),w=i("hsoDC"),E=i("gd9Oy"),l=i("lDSNw"),j=i("5ZL0s"),z=i("hmgez"),g=i("cJ96h"),p=i("6ha3o"),G=i("gMNJN"),Je=i("j5DyG");var Ur=i("6rT8n").Buffer,Wr=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const $r=(0,j.getVaultProxy)(),Vr=t=>{const n=(t=>{var n,r,a;const{url:i,requestId:o,messageBytes:s,tabId:c}=t,u=i.origin,{data:d}=G.hooks.useSelectedMultiChainAccount(),f=null!==(n=null==d?void 0:d.identifier)&&void 0!==n?n:"",{networkID:m,addressType:h}=null!==(a=null===(r=null==d?void 0:d.addresses)||void 0===r?void 0:r.find((e=>y.Chains.isBitcoinNetworkID(e.networkID))))&&void 0!==a?a:{addressType:E.AddressType.BitcoinNativeSegwit,networkID:y.NetworkIDs.Bitcoin.Mainnet},x=(null==d?void 0:d.type)===v.AccountType.Ledger,b=(0,l.useCallback)((e=>Wr(void 0,void 0,void 0,(function*(){const t=yield $r.sign(f,{chainType:h,signingType:"message",message:e});if("error"===t.status)throw new Error(`[btc provider][${t.type}] ${t.message}`);const n=t.message;if(!n)throw new Error("[btc sign message notification] no message on vault response");return{type:"send",signature:Ur.from(t.signature,"hex"),signedMessage:n}}))),[f,h]),{pushDetailView:k}=(0,p.useDetailViews)(),S=(0,g.usePostOutgoingBackgroundResponse)(),T=(0,l.useCallback)((()=>{const e=I.userRejectedRequest(o);S(e)}),[o,S]),C=(0,l.useCallback)((()=>Wr(void 0,void 0,void 0,(function*(){try{const e=yield b(s);S(I.result(o,e))}catch(e){const t=I.internalError(o,e.message);S(t)}}))),[b,s,o,S]),A=(0,l.useCallback)((()=>{x?k(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerApp:w.LedgerApp.Bitcoin,ledgerAction:C,cancel:T}))):S(I.result(o,{type:"signAndSend"}))}),[T,x,S,k,o,C]);return{networkID:m,message:Ur.from(s).toString("utf8"),tabId:c,origin:u,requestId:o,confirmApproval:A,denyApproval:T}})(Object.assign({},t));return e(l).createElement(gr.SignPlainMessage,Object.assign({},n))};var Jr={};t(Jr,"BtcSignTransaction",(function(){return Xr}),(function(e){return Xr=e}));v=i("6Tvfa"),y=i("belzv"),w=i("hsoDC"),E=i("gd9Oy"),B=i("cxfOD"),L=i("4y59b");var Zr=i("5GnSC"),Yr=(l=i("lDSNw"),j=i("5ZL0s"),z=i("hmgez"),g=i("cJ96h"),p=i("6ha3o"),G=i("gMNJN"),_=i("h5kyv"),Je=i("j5DyG"),i("6rT8n").Buffer),Kr=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Xr=t=>{var n,r,a,i,o,s,c,u;const{url:d,requestId:f,message:m,tabId:h,inputsToSign:x,finalize:b}=t,k=(0,L.removeWebPrefixes)(d.origin),S=d.origin,{data:T}=G.hooks.useSelectedMultiChainAccount(),C=null!==(n=null==T?void 0:T.identifier)&&void 0!==n?n:"",{networkID:A,addressType:D,address:N}=null!==(a=null===(r=null==T?void 0:T.addresses)||void 0===r?void 0:r.find((e=>y.Chains.isBitcoinNetworkID(e.networkID))))&&void 0!==a?a:{addressType:E.AddressType.BitcoinNativeSegwit,networkID:y.NetworkIDs.Bitcoin.Mainnet},P=(null==T?void 0:T.type)===v.AccountType.Ledger,{pushDetailView:R}=(0,p.useDetailViews)(),M=(0,g.usePostOutgoingBackgroundResponse)(),O=(0,l.useCallback)((()=>Kr(void 0,void 0,void 0,(function*(){try{const e=yield(e=>Kr(void 0,[e],void 0,(function*({message:e,accountIdentifier:t,addressType:n,inputsToSign:r,finalize:a}){const i=yield(0,j.getVaultProxy)().sign(t,{chainType:n,signingType:"transaction",message:Yr.from(e).toString("hex"),inputsToSign:r,finalize:a});if("error"===i.status)throw new Error(`[btc provider][${i.type}] ${i.message}`);return{type:"send",signature:Yr.from(i.signature,"hex")}})))({message:Yr.from(m,"hex"),accountIdentifier:C,addressType:D,inputsToSign:x,finalize:b});M(I.result(f,e))}catch(e){const t=I.internalError(f,e.message);M(t)}}))),[x,C,D,b,m,f,M]),F=(0,l.useCallback)((()=>{const e=I.userRejectedRequest(f);M(e)}),[f,M]),q=(0,l.useCallback)((()=>{P?R(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerApp:w.LedgerApp.Bitcoin,ledgerAction:O,cancel:F}))):M(I.result(f,{type:"signAndSend"}))}),[O,M,f,F,P,R]),H=null==T?void 0:T.addresses.map((e=>e.address)),{isError:U,data:W,isFetched:$,isLoading:V}=G.hooks.useScannedTransaction({networkID:y.NetworkIDs.Bitcoin.Mainnet,type:"transaction",url:d.href,userAccount:null!=N?N:"",params:{transaction:m,userAddresses:null!=H?H:[]}}),{screen:J,setScreen:Z,showFrictionInterstitial:Y}=X({block:null==W?void 0:W.block,isLoadingSimulation:V&&!$,warnings:null==W?void 0:W.warnings}),K=(0,l.useCallback)((()=>{_.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:S,sequenceId:t.sequenceId}}),Z("main")}),[S,t.sequenceId,Z]),Q=(0,l.useMemo)((()=>{var t;const{inputs:n,outputs:r}=null!==(t=null==W?void 0:W.advancedDetails)&&void 0!==t?t:{};return n&&r?[{value:e(l).createElement(Xt,{parsedInstructions:[...n.map(((e,t)=>({title:`Input #${t+1}`,rowItems:[{key:"address",value:((null==H?void 0:H.includes(e.address))?"You · ":"")+(0,v.formatHashMedium)(e.address),link:`https://mempool.space/address/${e.address}`},{key:"value",value:`${(0,B.satsToBTC)(e.amount)} BTC`}]}))),...r.map(((e,t)=>({title:`Output #${t+1}`,rowItems:[{key:"address",value:((null==H?void 0:H.includes(e.address))?"You · ":"")+(0,v.formatHashMedium)(e.address),link:`https://mempool.space/address/${e.address}`},{key:"value",value:`${(0,B.satsToBTC)(e.amount)} BTC`}]})))]})}]:[]}),[W,H]),ee={networkID:A,psbt:Zr.Psbt.fromHex(m),vb:0,inputsToSign:[],psbtChain:void 0};return"block"===J?e(l).createElement(vt,{warningMessage:(null===(i=null==W?void 0:W.block)||void 0===i?void 0:i.message)||"",origin:S,onConfirm:K,onClose:F}):"loading"===J?e(l).createElement(wn,{type:"APPROVE_TRANSACTION",tabId:h,domain:k,onClose:F}):"friction"===J?e(l).createElement(Rt,{onClose:F,onConfirm:q,onBack:()=>Z("main"),origin:S,warningMessage:null===(s=null===(o=null==W?void 0:W.warnings)||void 0===o?void 0:o[0])||void 0===s?void 0:s.message}):e(l).createElement(lt,{advancedRows:Q,confirmApproval:Y?()=>Z("friction"):q,denyApproval:F,hasSimulationFailed:U,numTransactions:1,domain:k,simulationResults:null!==(c=null==W?void 0:W.expectedChanges)&&void 0!==c?c:[],simulationWarnings:null!==(u=null==W?void 0:W.warnings)&&void 0!==u?u:[],tabId:h,networkID:ee.networkID,isErrorNativeTokenBalance:!1,isErrorNetworkFee:!1,isLoading:!1,networkFeeRows:[],showFriction:Y})};ce=i("lMzyG"),l=i("lDSNw"),U=i("cZIbv"),de=i("kn91D");var Qr={};t(Qr,"UnsupportedNotification",(function(){return ta}),(function(e){return ta=e}));me=i("jlKgL"),l=i("lDSNw"),q=i("bjaYq"),U=i("cZIbv"),ue=i("laYjG");var ea=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function ta(t){var{origin:n,title:r,children:a,onClose:i}=t,o=ea(t,["origin","title","children","onClose"]);const{t:s}=(0,q.useTranslation)();return e(l).createElement(na,Object.assign({},o),e(l).createElement(ra,null,e(l).createElement(aa,null,e(l).createElement(me.icons.XCircle,{size:36,color:"accentAlert"}),e(l).createElement(ia,null,r),e(l).createElement(oa,null,n)),e(l).createElement(sa,null,a)),e(l).createElement(la,null,e(l).createElement(ue.Button,{onClick:i},s("commandClose"))))}const na=U.default.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
  width: 100%;
  padding: 16px;
`,ra=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,aa=U.default.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,ia=U.default.h1`
  font-size: 28px;
  font-weight: 600;
  line-height: 32px;
  letter-spacing: -2%;
  color: #fff;
`,oa=U.default.p`
  font-size: 13px;
  line-height: 16px;
  color: #999999;
`,sa=U.default.p`
  font-size: 16px;
  line-height: 20px;
  color: #fff;
`,la=U.default.div`
  display: flex;
  gap: 16px;
`,ca=(0,U.default)(de.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,ua=({url:e,connectedChainId:t,messageChainId:n})=>{const{t:r}=(0,ce.useTranslation)(),a=e.origin;return l.createElement(Qr.UnsupportedNotification,{"data-testid":"incorrect-chain_id",origin:a,title:r("notificationIncorrectEIP712ChainId"),onClose:()=>window.close()},l.createElement(ca,null,r("notificationIncorrectEIP712ChainId")),l.createElement(ca,{style:{marginTop:16}},r("notificationIncorrectEIP712ChainIdDescription",{messageChainId:parseInt(n,16),connectedChainId:parseInt(t,16)})))};ce=i("lMzyG"),l=i("lDSNw"),U=i("cZIbv"),de=i("kn91D");const da=(0,U.default)(de.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,ga=({hostname:e,enabledChains:t})=>{const{t:n}=(0,ce.useTranslation)(),[r,a,i]="testnet"===t?[n("notificationIncorrectModeInTestnetTitle"),n("notificationIncorrectModeInTestnetDescription",{origin:e}),n("notificationIncorrectModeInTestnetProceed")]:[n("notificationIncorrectModeNotInTestnetTitle"),n("notificationIncorrectModeNotInTestnetDescription",{origin:e}),n("notificationIncorrectModeNotInTestnetProceed")];return l.createElement(Qr.UnsupportedNotification,{origin:e,title:r,onClose:()=>window.close(),"data-testid":"incorrect-mode"},l.createElement(da,null,a),l.createElement(da,{style:{marginTop:16}},i))};ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),g=i("cJ96h"),Je=i("j5DyG");const pa=U.default.div`
  display: flex;
  flex-direction: row;
  align-items: center;

  > * {
    margin: 0px ${e=>e.spacing}px;
    text-align: left;
  }
`,fa=U.default.div`
  margin-bottom: 24px;
`,ma=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,ha=e(l).memo((({tabId:t,url:n,requestId:r})=>{const a=n.origin,i=(0,g.usePostOutgoingBackgroundResponse)();let o=0;null!==r&&(o=r);const s=(0,l.useCallback)((()=>{i({jsonrpc:"2.0",id:o,error:I.userRejectedRequest(r).error})}),[r,o,i]);return e(l).createElement(va,{tabId:t,origin:a,denyApproval:s})})),va=({tabId:t,origin:n,denyApproval:r})=>{const{t:a}=(0,ce.useTranslation)();return e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,{enableMenu:!0}),e(l).createElement(Je.Body,null,e(l).createElement(Ve,{type:"SIGN_MESSAGE",domain:(0,L.removeWebPrefixes)(n),tabId:t}),e(l).createElement(fa,null,e(l).createElement(ma,{color:"#999999"},a("notificationSignMessageParagraphText"))),e(l).createElement(ya,null,e(l).createElement(pe.WarningDialog,{message:a("bottomSheetReadOnlyAccountDescription"),variant:2})),e(l).createElement(Je.BottomGroup,null,e(l).createElement(pa,{spacing:4},e(l).createElement(de.Text,{size:14,lineHeight:17,color:"#777"},a("bottomSheetReadOnlyWarning"))))),e(l).createElement(Je.Footer,{plain:!0},e(l).createElement(ue.Button,{onClick:()=>r(n),"data-testid":"secondary-button"},a("commandCancel"))))},ya=U.default.div`
  margin-bottom: 12px;
`;var wa={};t(wa,"SolanaSignAllTransactions",(function(){return Ra}),(function(e){return Ra=e}));v=i("6Tvfa"),y=i("belzv");var Ea=i("gYh0e"),xa=(w=i("hsoDC"),ce=i("lMzyG"),x=i("gsllN"),O=i("iPvw0"),B=i("cxfOD"),i("3fvLJ")),Ia=(F=i("4raQz"),L=i("4y59b"),i("13Nf3")),ba=(l=i("lDSNw"),j=i("5ZL0s"),z=i("hmgez"),g=i("cJ96h"),p=i("6ha3o"),G=i("gMNJN"),i("jPDaF")),ka=(_=i("h5kyv"),{});t(ka,"usePostResponseWithAnalytics",(function(){return Ta}),(function(e){return Ta=e}));oe=i("9ktGj"),y=i("belzv"),o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),_=i("h5kyv");var Sa=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Ta=function(e,t){return(n,r)=>{const{networkID:a,sequenceId:i,origin:o}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>Sa(this,void 0,void 0,(function*(){return a&&y.Chains.isSolanaNetworkID(a)&&!s.current&&("error"in r?yield t({networkID:a,sequenceId:i,origin:o}):yield e({networkID:a,sequenceId:i,origin:o}),s.current=!0),n(r)}))),[n,a,o,i])}}((function(e){return Sa(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userApprovedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signAllTransactions"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return Sa(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userDeniedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signAllTransactions"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));var Ca={};t(Ca,"usePostResponseWithAnalytics",(function(){return Da}),(function(e){return Da=e}));oe=i("9ktGj"),y=i("belzv"),o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),_=i("h5kyv");var Aa=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Da=function(e,t){return(n,r)=>{const{networkID:a,sequenceId:i,origin:o}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>Aa(this,void 0,void 0,(function*(){return a&&y.Chains.isSolanaNetworkID(a)&&!s.current&&("error"in r?yield t({networkID:a,sequenceId:i,origin:o}):yield e({networkID:a,sequenceId:i,origin:o}),s.current=!0),n(r)}))),[n,a,o,i])}}((function(e){return Aa(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userApprovedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return Aa(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture transaction signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userDeniedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signTransaction"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));Je=i("j5DyG");var Na=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Pa=["signAndSendAllTransactions","signAllTransactions"],Ra=t=>{var n,r,a,i,o,s;const c=t.url.origin,u=(0,L.removeWebPrefixes)(c),{t:d}=(0,ce.useTranslation)(),f=(0,l.useMemo)((()=>{const e=[];for(const n of t.transactions){const t=(0,xa.transactionStringToTransaction)(n,"bs58");e.push(t)}return e}),[t.transactions]),{owner:m,isLedgerAccount:h,ledgerSignAllTransactions:E,networkID:b}=((t,n,r,a,i)=>{const{t:o}=(0,ce.useTranslation)(),s=(0,x.useQueryClient)(),{data:c}=G.hooks.useSelectedMultiChainAccount(),[u,d,f,m]=(0,l.useMemo)((()=>{var e;const t=null===(e=null==c?void 0:c.addresses)||void 0===e?void 0:e.find((e=>y.Chains.isSolanaNetworkID(e.networkID))),n=null==t?void 0:t.address,r=t?t.networkID:void 0,a=(null==c?void 0:c.type)===v.AccountType.Ledger;return[null==c?void 0:c.identifier,null!=n?n:"",r,a]}),[c]),{connection:h}=G.hooks.useSelectedSolanaConnection(),{pushDetailView:E,popDetailView:b}=(0,p.useDetailViews)(),k=(0,g.usePostOutgoingBackgroundResponse)(),S=(0,Ca.usePostResponseWithAnalytics)(k,{networkID:f,sequenceId:r,origin:a}),T=(0,g.usePostOutgoingBackgroundResponse)(),C=(0,ka.usePostResponseWithAnalytics)(T,{networkID:f,sequenceId:r,origin:a}),A=(0,l.useCallback)((()=>Na(void 0,void 0,void 0,(function*(){const r=new(0,ba.LegacyIndexedDBProxy);if(!u||!f||!t||Array.isArray(t)&&0===t.length)throw new Error("missing accountIdentifier or chainId or transaction");const a=Pa.includes(i);try{const i=(0,j.getVaultProxy)(),l={ownerAddress:d,networkID:f,data:{signature:""},type:F.PendingTransactionType.DappInteraction,display:{summary:{topLeft:{label:o("transactionsPendingAppInteraction")}}}},c=[];for(let e=0;e<t.length;e++){const n=t[e];(0,w.setLedgerTransportStateOverride)(s,w.LEDGER_WAITING_FOR_APPROVAL_STATE),c.push(yield(0,F.signSolanaTransactionAsync)({accountIdentifier:u,feePayer:new(0,xa.PublicKey)(d),connection:h,accountSigner:i,transaction:n,pendingTransactionInput:l,storage:r}).finally((()=>(0,w.setLedgerTransportStateOverride)(s,w.LEDGER_RECONNECTING_STATE))))}const g=c.map((t=>({signedTransaction:F.TransactionSerializationUtils.serialize(t).transaction,signature:e(Ia).encode((0,xa.getSignatures)(t)[0]),version:"version"in t?t.version:"legacy"})));a?C(I.result(n,{type:"send",result:g})):S(I.result(n,Object.assign({type:"send"},g[0])))}catch(t){throw(0,z.isKnownLedgerActionError)(t)&&E(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerActionError,{ledgerActionError:t,onRetryClick:()=>{b()},onCancelClick:()=>{const e=I.userRejectedRequest(n);a?C(e):S(e)}}))),new Error("error signing with ledger: "+t,{cause:t})}}))),[u,f,t,i,d,o,s,h,C,n,S,E,b]);return{owner:d,isLedgerAccount:m,connection:h,ledgerSignAllTransactions:A,networkID:f}})(f,t.requestId,t.sequenceId,c,t.originalMethod),{pushDetailView:k}=(0,p.useDetailViews)(),S=(0,g.usePostOutgoingBackgroundResponse)(),T=(0,Ca.usePostResponseWithAnalytics)(S,{networkID:b,sequenceId:t.sequenceId,origin:c}),C=(0,g.usePostOutgoingBackgroundResponse)(),A=(0,ka.usePostResponseWithAnalytics)(C,{networkID:b,sequenceId:t.sequenceId,origin:c}),D=(0,l.useMemo)((()=>Pa.includes(t.originalMethod)?A:T),[t.originalMethod,A,T]),{connection:N}=G.hooks.useSelectedSolanaConnection(),{data:P,isLoading:R,isError:M}=(0,F.useEstimateFeeForMessages)(N,t.transactions),{isError:q,data:H,isFetched:U,isLoading:W}=G.hooks.useScannedTransaction({networkID:null!=b?b:y.SolanaNetworkID.Mainnet,type:"transaction",url:t.url.href,userAccount:m,params:{transactions:t.transactions,method:t.originalMethod}}),{fungible:$}=G.hooks.useGetFungibleBalance({key:Ea.FungibleTokenType.SolanaNative}),V=(0,l.useMemo)((()=>{var e;const t=null!==(e=null==$?void 0:$.data.amount)&&void 0!==e?e:"";return!!t&&(!P||BigInt(t)>P.estimatedFee)}),[$,P]),J=(null==H?void 0:H.error)===B.SIMULATION_ERRORS.INSUFFICIENT_GAS||(null==H?void 0:H.error)===B.SIMULATION_ERRORS.INSUFFICIENT_FUNDS||!V,{screen:Z,setScreen:K,showFrictionInterstitial:Q}=X({block:null==H?void 0:H.block,isLoadingSimulation:W&&!U,warnings:null==H?void 0:H.warnings}),ee=(0,l.useCallback)((()=>{const e=I.userRejectedRequest(t.requestId);D(e)}),[t.requestId,D]),{save:te,isAutoConfirmIsTouched:ne,showAutoConfirmRow:re}=Y(t.url.origin),ae=(0,l.useCallback)((()=>Na(void 0,void 0,void 0,(function*(){ne&&(yield te()),h?k(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerAction:E,cancel:ee}))):D(I.result(t.requestId,{type:"signAndSend"}))}))),[ne,te,h,k,E,ee,D,t.requestId]),ie=(0,l.useCallback)((()=>{_.analytics.capture("userIgnoredKnownMaliciousWarning",{data:{origin:c,sequenceId:t.sequenceId}}),K("main")}),[c,t.sequenceId,K]),{data:oe}=G.hooks.usePreferredExplorers(),se=(0,l.useCallback)((e=>{if(!oe)return"";const t=oe.explorers[null!=b?b:y.NetworkIDs.Solana.Mainnet];return(0,O.generateExplorerUrl)({endpoint:"address",explorerType:t,networkID:null!=b?b:y.NetworkIDs.Solana.Mainnet,param:e})}),[oe,b]),le=(0,l.useMemo)((()=>{var t;if(!H||!(null===(t=H.advancedDetails)||void 0===t?void 0:t.advancedRows))return[];const n=H.advancedDetails.advancedRows.map((e=>({title:e.title,rowItems:e.items.map((e=>({key:e.title,link:e.isAddress?se(e.value):void 0,value:e.isAddress?(0,v.formatAddressValue)(e.value):e.value})))})));return 0===n.length?[]:[{value:e(l).createElement(Xt,{parsedInstructions:n})}]}),[H,se]),ue=yn({origin:t.url.origin,autoConfirmStatusCode:t.autoConfirmStatusCode,networkID:b||void 0}),de=[],ge=(0,l.useMemo)((()=>(null==P?void 0:P.highFees)?d("notificationTransactionApprovalNetworkFeeHighWarning"):J?d("transactionNotEnoughNative",{nativeTokenSymbol:"SOL"}):M?d("networkFeeCouldNotFetch"):void 0),[P,d,J,M]);if(re&&de.push(ue),"block"===Z)return e(l).createElement(vt,{warningMessage:null!==(r=null===(n=null==H?void 0:H.block)||void 0===n?void 0:n.message)&&void 0!==r?r:"",origin:t.url.origin,onConfirm:ie,onClose:ee});const pe={networkID:null!=b?b:y.SolanaNetworkID.Mainnet,transaction:f};return"loading"===Z?e(l).createElement(wn,{type:1===t.transactions.length?"APPROVE_TRANSACTIONS":"APPROVE_TRANSACTION",tabId:t.tabId,domain:u,onClose:ee}):"friction"===Z?e(l).createElement(Rt,{onClose:ee,onConfirm:ae,onBack:()=>K("main"),origin:t.url.origin,warningMessage:null===(i=null===(a=null==H?void 0:H.warnings)||void 0===a?void 0:a[0])||void 0===i?void 0:i.message}):e(l).createElement(lt,{advancedRows:le,confirmApproval:Q?()=>K("friction"):ae,denyApproval:ee,hasSimulationFailed:!!q,numTransactions:f.length,domain:u,rows:de,simulationResults:null!==(o=null==H?void 0:H.expectedChanges)&&void 0!==o?o:[],simulationWarnings:null!==(s=null==H?void 0:H.warnings)&&void 0!==s?s:[],tabId:t.tabId,networkID:pe.networkID,showFriction:Q,showConfirmAnyway:!Q&&J,isErrorNativeTokenBalance:!1,isErrorNetworkFee:M,isLoading:R,networkFeeRows:[...gn(d,P?`${(0,Ea.formatAmount)((0,xa.lamportsToSolana)(null==P?void 0:P.estimatedFee))} SOL`:"",R,J?"#EB3742":"#999999",ge,(null==P?void 0:P.highFees)||J||ge?"#EB3742":"#999999")]})};var Ma={};t(Ma,"SolanaSignIn",(function(){return Ka}),(function(e){return Ka=e}));v=i("6Tvfa"),y=i("belzv"),E=i("gd9Oy"),Ia=i("13Nf3"),l=i("lDSNw"),j=i("5ZL0s"),z=i("hmgez"),g=i("cJ96h"),p=i("6ha3o"),G=i("gMNJN");var Oa={};t(Oa,"usePostResponseWithAnalytics",(function(){return Fa}),(function(e){return Fa=e}));oe=i("9ktGj"),y=i("belzv"),o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),_=i("h5kyv");var Ba=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Fa=function(e,t){return(n,r)=>{const{networkID:a,sequenceId:i,origin:o}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>Ba(this,void 0,void 0,(function*(){return a&&y.Chains.isSolanaNetworkID(a)&&!s.current&&("error"in r?yield t({networkID:a,sequenceId:i,origin:o}):yield e({networkID:a,sequenceId:i,origin:o}),s.current=!0),n(r)}))),[n,a,o,i])}}((function(e){return Ba(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userApprovedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signIn"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return Ba(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userDeniedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signIn"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));Je=i("j5DyG"),ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),Oe=i("44I6u"),de=i("kn91D"),ge=i("ad7JL"),pe=i("lLIZI"),Je=i("j5DyG");const La=U.default.div`
  margin-bottom: 24px;
`,qa=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,ja=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin: 16px 0;
  align-items: flex-end;
`,za=(0,U.default)(Je.Body)`
  display: flex;
  flex-direction: column;
  align-content: space-between;
`,Ga=t=>{const{tabId:n,origin:r,signInData:a,errorDetails:i,confirmApproval:o,denyApproval:s}=t,{t:c}=(0,ce.useTranslation)(),u=i.reduce(((e,t)=>(e[t.label]=t.message,e)),{}),d=et(t.networkID);return e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(za,null,e(l).createElement("div",null,e(l).createElement(Ve,{type:"SIGN_IN",domain:(0,L.removeWebPrefixes)(r),tabId:n}),e(l).createElement(La,null,e(l).createElement(qa,{color:"#999999"},c("notificationApplicationApprovalParagraphText"))),e(l).createElement(Oe.Column,{margin:"24px 0px 24px 0px ",justify:"center"},e(l).createElement(pe.WarningDialog,{message:c("siwsVerificationErrorDescription"),variant:3})),e(l).createElement("div",{style:{display:"flex",gap:8,flexDirection:"column",marginBottom:8}},e(l).createElement(er,{header:c("notificationMessageHeader"),message:t.message,isJson:!1}),e(l).createElement(Me,{rows:[d]}),e(l).createElement(en,{signInData:a,errorObject:u}))),e(l).createElement(ja,null,e(l).createElement(qa,{color:"#999999"},c("notificationApplicationApprovalSignInDisclaimer")))),e(l).createElement(Je.Footer,null,e(l).createElement(ue.ButtonPair,{primaryText:c("commandConfirm"),secondaryText:c("commandCancel"),onPrimaryClicked:o,onSecondaryClicked:s,primaryTheme:"warning"})))};ce=i("lMzyG"),L=i("4y59b"),l=i("lDSNw"),U=i("cZIbv"),ue=i("laYjG"),de=i("kn91D"),ge=i("ad7JL"),Je=i("j5DyG");const _a=U.default.div`
  margin-bottom: 24px;
`,Ha=(0,U.default)(de.Text).attrs({size:14,weight:400,lineHeight:17,textAlign:"left"})``,Ua=U.default.div`
  display: flex;
  flex: 1;
  justify-content: center;
  margin: 16px 0;
  align-items: flex-end;
`,Wa=(0,U.default)(Je.Body)`
  display: flex;
  flex-direction: column;
  align-content: space-between;
`,$a=t=>{const{tabId:n,origin:r,signInData:a,confirmApproval:i,denyApproval:o}=t,{t:s}=(0,ce.useTranslation)(),c=et(t.networkID);return e(l).createElement(Je.Container,null,e(l).createElement(ge.MultichainAccountHeader,null),e(l).createElement(Wa,null,e(l).createElement("div",null,e(l).createElement(Ve,{type:"SIGN_IN",domain:(0,L.removeWebPrefixes)(r),tabId:n}),e(l).createElement(_a,null,e(l).createElement(Ha,{color:"#999999"},s("notificationApplicationApprovalParagraphText"))),e(l).createElement("div",{style:{display:"flex",gap:8,flexDirection:"column"}},e(l).createElement(er,{header:s("notificationMessageHeader"),message:t.message,isJson:!1}),e(l).createElement(Me,{rows:[c]}),e(l).createElement(en,{signInData:a}))),e(l).createElement(Ua,null,e(l).createElement(Ha,{color:"#999999"},s("notificationApplicationApprovalSignInDisclaimer")))),e(l).createElement(Je.Footer,null,e(l).createElement(ue.ButtonPair,{primaryText:s("commandConfirm"),secondaryText:s("commandCancel"),onPrimaryClicked:i,onSecondaryClicked:o})))};var Va=i("6rT8n").Buffer,Ja=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const Za=(0,j.getVaultProxy)(),Ya=t=>{const{isLedger:n,networkID:r,signMessage:a}=(()=>{const{data:e}=G.hooks.useSelectedMultiChainAccount();return(0,l.useMemo)((()=>{var t,n;const r=null!==(t=null==e?void 0:e.identifier)&&void 0!==t?t:"",a=null===(n=null==e?void 0:e.addresses)||void 0===n?void 0:n.find((e=>y.Chains.isSolanaNetworkID(e.networkID)));return{isLedger:(null==e?void 0:e.type)===v.AccountType.Ledger,networkID:null==a?void 0:a.networkID,signMessage:e=>Ja(void 0,void 0,void 0,(function*(){const t=Va.from(e).toString("utf-8"),n=yield Za.sign(r,{chainType:E.AddressType.Solana,signingType:"message",message:t});if("success"===n.status)return n.signature;throw new Error(`[${n.type}] ${n.message}`)}))}}),[e])})(),{tabId:i,url:o,requestId:s,sequenceId:c,signInData:u,message:d,errorDetails:f}=t,m=o.origin,h=e(Ia).decode(d),w=(0,g.usePostOutgoingBackgroundResponse)(),x=(0,Oa.usePostResponseWithAnalytics)(w,{networkID:r,sequenceId:c,origin:m}),{pushDetailView:b}=(0,p.useDetailViews)(),k=(0,l.useCallback)((()=>{const e=I.userRejectedRequest(s);x(e)}),[s,x]),S=(0,l.useCallback)((()=>Ja(void 0,void 0,void 0,(function*(){try{const e=yield a(h),t=I.result(s,{type:"send",signature:e});x(t)}catch(e){const t=I.internalError(s,e.message);x(t)}}))),[a,h,s,x]),T=(0,l.useCallback)((()=>{n?b(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerAction:S,cancel:k}))):x(I.result(s,{type:"signAndSend"}))}),[k,x,n,b,s,S]);return{tabId:i,origin:m,signInData:u,message:h.toString("utf8"),errorDetails:f,networkID:null!=r?r:y.SolanaNetworkID.Mainnet,confirmApproval:T,denyApproval:k}},Ka=t=>{const n=Ya(t);return"errorDetails"in n&&n.errorDetails?e(l).createElement(Ga,Object.assign({},n)):e(l).createElement($a,Object.assign({},n))};var Xa={};t(Xa,"SolanaSignMessage",(function(){return si}),(function(e){return si=e}));v=i("6Tvfa"),y=i("belzv"),E=i("gd9Oy"),Ia=i("13Nf3"),l=i("lDSNw"),j=i("5ZL0s"),z=i("hmgez"),g=i("cJ96h"),p=i("6ha3o"),G=i("gMNJN");var Qa={};t(Qa,"usePostResponseWithAnalytics",(function(){return ti}),(function(e){return ti=e}));oe=i("9ktGj"),y=i("belzv"),o=i("4chX7"),s=i("4yY1D"),l=i("lDSNw"),_=i("h5kyv");var ei=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const ti=function(e,t){return(n,r)=>{const{networkID:a,sequenceId:i,origin:o}=r,s=(0,l.useRef)(!1);return(0,l.useCallback)((r=>ei(this,void 0,void 0,(function*(){return y.Chains.isSolanaNetworkID(a)&&!s.current&&("error"in r?yield t({networkID:a,sequenceId:i,origin:o}):yield e({networkID:a,sequenceId:i,origin:o}),s.current=!0),n(r)}))),[n,a,o,i])}}((function(e){return ei(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userApprovedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signMessage"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (approve)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserApprove: "+typeof e),s.FeatureTag.Provider)}}))}),(function(e){return ei(this,void 0,void 0,(function*(){var t;try{const n=null!==(t=(0,o.legacyTokenListChainIdToSolanaChainId)(e.networkID.replace("solana:","")))&&void 0!==t?t:"localnet",r=(0,o.getSupportedChainDescriptor)(n);if("solana"!==(null==r?void 0:r.chainType))throw new Error(`Failed to capture message signature event analytics: Unsupported Solana Network ID "${n}"`);return yield oe.dapp.userDeniedAction(_.analytics,e.sequenceId,Object.assign(Object.assign({},r),{origin:e.origin,method:"signMessage"}))}catch(e){s.telemetry.addBreadcrumb("analytics","Could not log dapp user action (deny)",s.Severity.Error),e instanceof Error?s.telemetry.captureError(e,s.FeatureTag.Provider):s.telemetry.captureError(new Error("Non-Error instance thrown in captureUserDeny: "+typeof e),s.FeatureTag.Provider)}}))}));Je=i("j5DyG"),l=i("lDSNw");var ni=i("6rT8n").Buffer;const ri=l.memo((({tabId:e,origin:t,message:n,display:r,confirmApproval:a,denyApproval:i,networkID:o,isSimulationLoading:s,hasSimulationFailed:c,scanResult:u})=>{const d=l.useMemo((()=>"hex"===r?`0x${ni.from(n).toString("hex")}`:(new TextDecoder).decode(n)),[r,n]);return s?l.createElement(wn,{type:"SIGN_MESSAGE",tabId:e,domain:t,onClose:i}):l.createElement(gr.SignPlainMessage,{tabId:e,origin:t,message:d,networkID:o,confirmApproval:a,denyApproval:i,scanFailed:c,scanIsLoading:s,scanWarnings:(null==u?void 0:u.warnings)||[],advancedDetails:null==u?void 0:u.advancedDetails})}));var ai=i("6rT8n").Buffer,ii=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};const oi=(0,j.getVaultProxy)(),si=t=>{const n=(()=>{const{data:e}=G.hooks.useSelectedMultiChainAccount();return(0,l.useMemo)((()=>{var t,n,r;const a=null!==(t=null==e?void 0:e.identifier)&&void 0!==t?t:"",{address:i,networkID:o}=null!==(r=null===(n=null==e?void 0:e.addresses)||void 0===n?void 0:n.find((e=>y.Chains.isSolanaNetworkID(e.networkID))))&&void 0!==r?r:{address:"",networkID:y.NetworkIDs.Solana.Mainnet};return{isLedger:(null==e?void 0:e.type)===v.AccountType.Ledger,publicKey:i,networkID:o,signMessage:e=>ii(void 0,void 0,void 0,(function*(){const t=ai.from(e).toString("utf-8"),n=yield oi.sign(a,{chainType:E.AddressType.Solana,signingType:"message",message:t});if("success"===n.status)return n.signature;throw new Error(`[${n.type}] ${n.message}`)}))}}),[e])})(),r=(t=>{const{url:n,requestId:r,sequenceId:a,message:i,display:o,tabId:s,networkID:c}=t,u=n.origin,d=e(Ia).decode(i),f=(0,g.usePostOutgoingBackgroundResponse)(),m=(0,Qa.usePostResponseWithAnalytics)(f,{networkID:c,sequenceId:a,origin:u}),{pushDetailView:h}=(0,p.useDetailViews)(),v=(0,l.useCallback)((()=>{const e=I.userRejectedRequest(r);m(e)}),[r,m]),w=(0,l.useCallback)((()=>ii(void 0,void 0,void 0,(function*(){try{const e=yield t.signMessage(d),n=I.result(r,{type:"send",signature:e});m(n)}catch(e){const t=I.internalError(r,e.message);m(t)}}))),[t,d,r,m]),E=(0,l.useCallback)((()=>{t.isLedger?h(e(l).createElement(Je.LedgerWrapper,null,e(l).createElement(z.LedgerAction,{ledgerAction:w,cancel:v}))):m(I.result(r,{type:"signAndSend"}))}),[v,m,t.isLedger,h,r,w]),{isError:x,data:b,isLoading:k}=G.hooks.useScannedMessage({networkID:null!=c?c:y.SolanaNetworkID.Mainnet,type:"message",url:n.href,params:{message:ai.from(d).toString("utf8")}});return{networkID:c,tabId:s,origin:u,requestId:r,message:d,display:o,isSimulationLoading:k,hasSimulationFailed:x,scanResult:b,confirmApproval:E,denyApproval:v}})(Object.assign(Object.assign({},t),n));return e(l).createElement(ri,Object.assign({},r))};ce=i("lMzyG"),E=i("gd9Oy"),l=i("lDSNw"),U=i("cZIbv"),fn=i("axUHJ"),de=i("kn91D");const li=(0,U.default)(de.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,ci=({url:e,targetAddressType:t,addressType:n})=>{const{t:r}=(0,ce.useTranslation)(),a=e.origin;return l.createElement(Qr.UnsupportedNotification,{origin:a,title:r("notificationUnsupportedAccount"),onClose:()=>window.close()},l.createElement(li,null,l.createElement(fn.PTrans,{t:r,i18nKey:"notificationUnsupportedAccountDescription",values:{origin:a,targetChainType:E.AddressTypes.getDisplayName(t),chainType:E.AddressTypes.getDisplayName(n)}})),l.createElement(li,{margin:"16px 0 0 0"},r("notificationUnsupportedAccountDescription2")))};ce=i("lMzyG"),l=i("lDSNw"),U=i("cZIbv"),fn=i("axUHJ"),de=i("kn91D");const ui=(0,U.default)(de.Text)`
  text-align: left;
  font-size: 16px;
  line-height: 20px;
  strong {
    font-weight: 600;
  }
`,di=({url:e})=>{const{t:t}=(0,ce.useTranslation)(),n=e.origin;return l.createElement(Qr.UnsupportedNotification,{origin:n,title:t("unsupported_network",{defaultValue:"Unsupported network"}),onClose:()=>window.close()},l.createElement(ui,null,t("notificationUnsupportedNetworkDescription")),l.createElement(ui,{margin:"16px 0 0 0"},l.createElement(fn.PTrans,{t:t,i18nKey:"notificationUnsupportedNetworkDescriptionInterpolated"},"To proceed with a different extension, turn off",l.createElement("strong",null,"Settings → Default App Wallet, and select Always Ask"),". Then refresh the page and reconnect.")))};G=i("gMNJN");var gi=i("gdILj"),pi=i("2LZGp"),fi=i("a8kcR"),mi=i("jZyqE"),hi=(_=i("h5kyv"),Ge=i("d1qx3"),i("8DCD7")),vi=i("bLLpR"),yi=i("bcqzL"),wi=i("6rT8n").Buffer;const Ei=e(l).lazy((()=>i("1Ahka")));s.fileLogger.init({provider:vi.ClientFileLoggerProvider}),s.telemetry.init({appVersion:(0,Ge.getManifestVersion)()}),s.telemetry.setUser({id:_.analytics.getDeviceId()}),(0,hi.initializeFeatureFlags)();const xi=({req:t,url:n,tabId:r})=>{const{method:a}=t,{data:i=[]}=G.hooks.useAllMultiChainAccounts(),{data:[o]}=(0,K.useFeatureFlags)(["frontend-enable-session-start"]);return(0,gi.useEffectOnce)((()=>{mi.accountAnalytics.onAppSessionStart(i)}),i.length>0&&o),(0,l.useEffect)((()=>{_.analytics.captureOptOutStatus()}),[]),(0,l.useEffect)((()=>{_.analytics.capture("notificationOpen",{data:{method:a}})}),[a]),e(l).createElement(Ii,{req:t,url:n,tabId:r})},Ii=e(l).memo((({req:t,url:n,tabId:r})=>{const{id:a}=t,i=new URL(n),s=o.user.user_confirmIncorrectMode.request.safeParse(t);if(s.success){const{params:t}=s.data;return e(l).createElement(ga,{hostname:(0,L.removeWebPrefixes)(i.origin),enabledChains:t[1]})}const c=o.user.user_confirmEIP712IncorrectChainId.request.safeParse(t);if(c.success){const{params:t}=c.data,{connectedChainId:n,messageChainId:r}=t[1];return e(l).createElement(ua,{url:i,connectedChainId:n,messageChainId:r})}const u=o.user.user_confirmUnsupportedNetwork.request.safeParse(t);if(u.success){const t=u.data.params[1];return e(l).createElement(di,{url:i,targetNetworkId:t})}const d=o.user.user_confirmUnsupportedAccount.request.safeParse(t);if(d.success&&"ethereum"===d.data.params[1])return e(l).createElement(ci,{targetAddressType:E.AddressType.EVM,addressType:E.AddressType.Solana,url:i});if(d.success&&"solana"===d.data.params[1])return e(l).createElement(ci,{targetAddressType:E.AddressType.Solana,addressType:E.AddressType.EVM,url:i});if(o.user.user_approveSolConnect.request.safeParse(t).success)return e(l).createElement(Lr,{tabId:r,url:i,requestId:a,allowSwitchingAccountsFor:E.AddressType.Solana});const g=o.user.user_approveSolSignTransaction.request.safeParse(t);if(g.success){const{params:t}=g.data,{transaction:n,sequenceId:o,autoConfirmStatusCode:s}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(wa.SolanaSignAllTransactions,{tabId:r,url:i,requestId:a,transactions:[n],autoConfirmStatusCode:s,sequenceId:o,originalMethod:"signTransaction"}))}const f=o.user.user_approveSolSignAndSendTransaction.request.safeParse(t);if(f.success){const{params:t}=f.data,{transaction:n,sequenceId:o,autoConfirmStatusCode:s}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(wa.SolanaSignAllTransactions,{tabId:r,url:i,requestId:a,transactions:[n],autoConfirmStatusCode:s,sequenceId:o,originalMethod:"signAndSendTransaction"}))}const m=o.user.user_approveSolSignAllTransactions.request.safeParse(t);if(m.success){const{params:t}=m.data,{transactions:n,sequenceId:o,autoConfirmStatusCode:s}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(wa.SolanaSignAllTransactions,{tabId:r,url:i,requestId:a,transactions:n,autoConfirmStatusCode:s,sequenceId:o,originalMethod:"signAllTransactions"}))}const v=o.user.user_approveSolSignAndSendAllTransactions.request.safeParse(t);if(v.success){const{params:t}=v.data,{transactions:n,sequenceId:o,autoConfirmStatusCode:s}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(wa.SolanaSignAllTransactions,{tabId:r,url:i,requestId:a,transactions:n,autoConfirmStatusCode:s,sequenceId:o,originalMethod:"signAndSendAllTransactions"}))}const y=o.user.user_approveSolSignMessage.request.safeParse(t);if(y.success){const{params:t}=y.data,{message:n,display:o,sequenceId:s}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(Xa.SolanaSignMessage,{tabId:r,url:i,requestId:a,message:n,display:o,sequenceId:s}))}const w=o.user.user_approveSolSignIn.request.safeParse(t);if(w.success){const{params:t}=w.data,{signInData:n,message:o,errorDetails:s,sequenceId:c}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(Ma.SolanaSignIn,{tabId:r,url:i,requestId:a,signInData:n,message:o,errorDetails:s,sequenceId:c}))}if(o.user.user_approveEthRequestAccounts.request.safeParse(t).success)return e(l).createElement(Lr,{tabId:r,url:i,requestId:a,allowSwitchingAccountsFor:E.AddressType.EVM});const x=o.user.user_approveEthSendTransaction.request.safeParse(t);if(x.success){const{params:t}=x.data,{transaction:n,sequenceId:o,autoConfirmStatusCode:s}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(h.EthSendTransaction,{tabId:r,url:i,requestId:a,sequenceId:o,transaction:n,autoConfirmStatusCode:s}))}const I=o.user.user_approveEthSignMessage.request.safeParse(t);if(I.success){const{params:t}=I.data,{message:n,originalMethod:o,chainId:s,autoConfirmStatusCode:c,sequenceId:u}=t[1];return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(Rn.EthSignMessage,{tabId:r,url:i,requestId:a,message:n,originalMethod:o,hexChainId:s,autoConfirmStatusCode:c,sequenceId:u}))}if(o.user.user_approveBtcRequestAccounts.request.safeParse(t).success)return e(l).createElement(Lr,{tabId:r,url:i,requestId:a,allowSwitchingAccountsFor:E.AddressType.BitcoinTaproot});const b=o.user.user_approveBtcSignPSBT.request.safeParse(t);if(b.success)return e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(Jr.BtcSignTransaction,{tabId:r,url:i,requestId:a,message:wi.from(b.data.params[1].psbt).toString("hex"),sequenceId:b.data.params[1].sequenceId,finalize:b.data.params[1].finalize,inputsToSign:b.data.params[1].inputsToSign}));const k=o.user.user_approveBtcSignMessage.request.safeParse(t);return k.success?e(l).createElement(p.DetailViewsProvider,null,e(l).createElement(Hr.BtcSignMessage,{tabId:r,url:i,requestId:a,messageBytes:k.data.params[1].message,sequenceId:k.data.params[1].sequenceId})):null})),bi=()=>{const t=(0,l.useCallback)((()=>{(0,Ge.openTabAsync)({url:"onboarding.html"}),window.close()}),[]),n=(0,g.useIncomingBackgroundRequest)(),{data:r}=G.hooks.useSelectedMultiChainAccount(),a=null==r?void 0:r.isReadOnly;if(!n)return null;const{url:i,req:s,tabId:u}=n,{id:d,method:p}=s,f=o.user.user_selectEthWallet.method.safeParse(p).success,h=o.user.user_approveEthRequestAccounts.method.safeParse(p).success||o.user.user_approveSolConnect.method.safeParse(p).success||o.user.user_approveBtcRequestAccounts.method.safeParse(p).success,v=h?"Connection Error":"Transaction Error",y=`There was an error attempting to ${h?"connect to the application":"sign the transaction"}. Please try again.`;return e(l).createElement(e(l).Fragment,null,f?e(l).createElement(l.Suspense,{fallback:e(l).createElement(zr.IconLoading,{color:"#AB9FF2"})},e(l).createElement(Ei,{requestId:d})):e(l).createElement(m.ExtensionLockWrapper,{openOnboarding:t},e(l).createElement(_r.LegacyModalsProvider,null,e(l).createElement(pi.Modals,null,e(l).createElement(c.PopupAndNotificationErrorBoundary,{title:v,message:y},a&&!h?e(l).createElement(ha,{tabId:u,url:new URL(i),requestId:d}):e(l).createElement(xi,{req:s,url:i,tabId:u}),e(l).createElement(Gr.Toaster,null))))))},ki=()=>e(l).createElement(e(l).Fragment,null,e(l).createElement(jr.MemoryRouter,{future:{v7_startTransition:!0}},e(l).createElement(U.ThemeProvider,{theme:fi.theme},e(l).createElement(yi.ThemedGlobalStyle,{backgroundColor:"#222222"}),e(l).createElement(c.PopupAndNotificationErrorBoundary,null,e(l).createElement(u.Main,null,e(l).createElement(f.QueryProvider,null,e(l).createElement(g.BackgroundConnectionProvider,null,e(l).createElement(bi,null))),e(l).createElement("div",{id:d.MODAL_ID})))))),Si=document.getElementById("root");(0,qr.createRoot)(Si).render(e(l).createElement(ki,null));
//# sourceMappingURL=notification.dc3d6c69.js.map
define=__define;})(window.define);